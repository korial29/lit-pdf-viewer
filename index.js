var Ci=Object.create;var Ct=Object.defineProperty;var Wt=Object.getOwnPropertyDescriptor;var Ei=Object.getOwnPropertyNames;var xi=Object.getPrototypeOf,Ti=Object.prototype.hasOwnProperty;var Et=(j=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(j,{get:(e,n)=>(typeof require!="undefined"?require:e)[n]}):j)(function(j){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+j+'" is not supported')});var Ge=(j,e)=>()=>(e||j((e={exports:{}}).exports,e),e.exports);var Ri=(j,e,n,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let u of Ei(e))!Ti.call(j,u)&&u!==n&&Ct(j,u,{get:()=>e[u],enumerable:!(t=Wt(e,u))||t.enumerable});return j};var xt=(j,e,n)=>(n=j!=null?Ci(xi(j)):{},Ri(e||!j||!j.__esModule?Ct(n,"default",{value:j,enumerable:!0}):n,j));var he=(j,e,n,t)=>{for(var u=t>1?void 0:t?Wt(e,n):e,s=j.length-1,k;s>=0;s--)(k=j[s])&&(u=(t?k(e,n,u):k(u))||u);return t&&u&&Ct(e,n,u),u};var $t=Ge(()=>{});var ci=Ge(()=>{});var hi=Ge(()=>{});var di=Ge(()=>{});var ui=Ge(()=>{});var fi=Ge(()=>{});var yt=Ge((exports,module)=>{(function(e,n){typeof exports=="object"&&typeof module=="object"?module.exports=n():typeof define=="function"&&define.amd?define("pdfjs-dist/build/pdf",[],n):typeof exports=="object"?exports["pdfjs-dist/build/pdf"]=n():e["pdfjs-dist/build/pdf"]=e.pdfjsLib=n()})(exports,function(){return(()=>{"use strict";var __webpack_modules__=[,(j,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.VerbosityLevel=e.Util=e.UnknownErrorException=e.UnexpectedResponseException=e.UNSUPPORTED_FEATURES=e.TextRenderingMode=e.StreamType=e.RenderingIntentFlag=e.PermissionFlag=e.PasswordResponses=e.PasswordException=e.PageActionEventType=e.OPS=e.MissingPDFException=e.IsLittleEndianCached=e.IsEvalSupportedCached=e.InvalidPDFException=e.ImageKind=e.IDENTITY_MATRIX=e.FormatError=e.FontType=e.FONT_IDENTITY_MATRIX=e.DocumentActionEventType=e.CMapCompressionType=e.BaseException=e.AnnotationType=e.AnnotationStateModelType=e.AnnotationReviewState=e.AnnotationReplyType=e.AnnotationMode=e.AnnotationMarkedState=e.AnnotationFlag=e.AnnotationFieldFlag=e.AnnotationBorderStyleType=e.AnnotationActionEventType=e.AbortException=void 0,e.arrayByteLength=Q,e.arraysToBytes=W,e.assert=G,e.bytesToString=X,e.createPromiseCapability=Re,e.createValidAbsoluteUrl=h,e.escapeString=ke,e.getModificationDate=ve,e.getVerbosityLevel=I,e.info=U,e.isArrayBuffer=ge,e.isArrayEqual=ye,e.isAscii=we,e.isSameOrigin=d,e.objectFromMap=te,e.objectSize=ne,e.setVerbosityLevel=x,e.shadow=C,e.string32=Z,e.stringToBytes=Y,e.stringToPDFString=_e,e.stringToUTF16BEString=Ce,e.stringToUTF8String=be,e.unreachable=z,e.utf8StringToString=Le,e.warn=V,n(2);let t=[1,0,0,1,0,0];e.IDENTITY_MATRIX=t;let u=[.001,0,0,.001,0,0];e.FONT_IDENTITY_MATRIX=u;let s={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};e.RenderingIntentFlag=s;let k={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};e.AnnotationMode=k;let _={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};e.PermissionFlag=_;let p={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};e.TextRenderingMode=p;let E={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};e.ImageKind=E;let M={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};e.AnnotationType=M;let b={MARKED:"Marked",REVIEW:"Review"};e.AnnotationStateModelType=b;let A={MARKED:"Marked",UNMARKED:"Unmarked"};e.AnnotationMarkedState=A;let w={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};e.AnnotationReviewState=w;let g={GROUP:"Group",REPLY:"R"};e.AnnotationReplyType=g;let P={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};e.AnnotationFlag=P;let f={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};e.AnnotationFieldFlag=f;let L={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};e.AnnotationBorderStyleType=L;let R={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};e.AnnotationActionEventType=R;let F={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};e.DocumentActionEventType=F;let D={O:"PageOpen",C:"PageClose"};e.PageActionEventType=D;let o={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"};e.StreamType=o;let l={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};e.FontType=l;let N={ERRORS:0,WARNINGS:1,INFOS:5};e.VerbosityLevel=N;let r={NONE:0,BINARY:1,STREAM:2};e.CMapCompressionType=r;let a={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};e.OPS=a;let v={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"};e.UNSUPPORTED_FEATURES=v;let S={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};e.PasswordResponses=S;let O=N.WARNINGS;function x(ee){Number.isInteger(ee)&&(O=ee)}function I(){return O}function U(ee){O>=N.INFOS&&console.log(`Info: ${ee}`)}function V(ee){O>=N.WARNINGS&&console.log(`Warning: ${ee}`)}function z(ee){throw new Error(ee)}function G(ee,K){ee||z(K)}function d(ee,K){let J;try{if(J=new URL(ee),!J.origin||J.origin==="null")return!1}catch{return!1}let oe=new URL(K,J);return J.origin===oe.origin}function m(ee){if(!ee)return!1;switch(ee.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function h(ee,K=null,J=null){if(!ee)return null;try{if(J&&typeof ee=="string"){if(J.addDefaultProtocol&&ee.startsWith("www.")){let ce=ee.match(/\./g);ce&&ce.length>=2&&(ee=`http://${ee}`)}if(J.tryConvertEncoding)try{ee=be(ee)}catch{}}let oe=K?new URL(ee,K):new URL(ee);if(m(oe))return oe}catch{}return null}function C(ee,K,J){return Object.defineProperty(ee,K,{value:J,enumerable:!0,configurable:!0,writable:!1}),J}let i=function(){function K(J,oe){this.constructor===K&&z("Cannot initialize BaseException."),this.message=J,this.name=oe}return K.prototype=new Error,K.constructor=K,K}();e.BaseException=i;class c extends i{constructor(K,J){super(K,"PasswordException"),this.code=J}}e.PasswordException=c;class y extends i{constructor(K,J){super(K,"UnknownErrorException"),this.details=J}}e.UnknownErrorException=y;class B extends i{constructor(K){super(K,"InvalidPDFException")}}e.InvalidPDFException=B;class T extends i{constructor(K){super(K,"MissingPDFException")}}e.MissingPDFException=T;class H extends i{constructor(K,J){super(K,"UnexpectedResponseException"),this.status=J}}e.UnexpectedResponseException=H;class $ extends i{constructor(K){super(K,"FormatError")}}e.FormatError=$;class q extends i{constructor(K){super(K,"AbortException")}}e.AbortException=q;function X(ee){(typeof ee!="object"||ee===null||ee.length===void 0)&&z("Invalid argument for bytesToString");let K=ee.length,J=8192;if(K<J)return String.fromCharCode.apply(null,ee);let oe=[];for(let ce=0;ce<K;ce+=J){let de=Math.min(ce+J,K),fe=ee.subarray(ce,de);oe.push(String.fromCharCode.apply(null,fe))}return oe.join("")}function Y(ee){typeof ee!="string"&&z("Invalid argument for stringToBytes");let K=ee.length,J=new Uint8Array(K);for(let oe=0;oe<K;++oe)J[oe]=ee.charCodeAt(oe)&255;return J}function Q(ee){if(ee.length!==void 0)return ee.length;if(ee.byteLength!==void 0)return ee.byteLength;z("Invalid argument for arrayByteLength")}function W(ee){let K=ee.length;if(K===1&&ee[0]instanceof Uint8Array)return ee[0];let J=0;for(let de=0;de<K;de++)J+=Q(ee[de]);let oe=0,ce=new Uint8Array(J);for(let de=0;de<K;de++){let fe=ee[de];fe instanceof Uint8Array||(typeof fe=="string"?fe=Y(fe):fe=new Uint8Array(fe));let Fe=fe.byteLength;ce.set(fe,oe),oe+=Fe}return ce}function Z(ee){return String.fromCharCode(ee>>24&255,ee>>16&255,ee>>8&255,ee&255)}function ne(ee){return Object.keys(ee).length}function te(ee){let K=Object.create(null);for(let[J,oe]of ee)K[J]=oe;return K}function ie(){let ee=new Uint8Array(4);return ee[0]=1,new Uint32Array(ee.buffer,0,1)[0]===1}let re={get value(){return C(this,"value",ie())}};e.IsLittleEndianCached=re;function le(){try{return new Function(""),!0}catch{return!1}}let se={get value(){return C(this,"value",le())}};e.IsEvalSupportedCached=se;let ae=[...Array(256).keys()].map(ee=>ee.toString(16).padStart(2,"0"));class pe{static makeHexColor(K,J,oe){return`#${ae[K]}${ae[J]}${ae[oe]}`}static transform(K,J){return[K[0]*J[0]+K[2]*J[1],K[1]*J[0]+K[3]*J[1],K[0]*J[2]+K[2]*J[3],K[1]*J[2]+K[3]*J[3],K[0]*J[4]+K[2]*J[5]+K[4],K[1]*J[4]+K[3]*J[5]+K[5]]}static applyTransform(K,J){let oe=K[0]*J[0]+K[1]*J[2]+J[4],ce=K[0]*J[1]+K[1]*J[3]+J[5];return[oe,ce]}static applyInverseTransform(K,J){let oe=J[0]*J[3]-J[1]*J[2],ce=(K[0]*J[3]-K[1]*J[2]+J[2]*J[5]-J[4]*J[3])/oe,de=(-K[0]*J[1]+K[1]*J[0]+J[4]*J[1]-J[5]*J[0])/oe;return[ce,de]}static getAxialAlignedBoundingBox(K,J){let oe=pe.applyTransform(K,J),ce=pe.applyTransform(K.slice(2,4),J),de=pe.applyTransform([K[0],K[3]],J),fe=pe.applyTransform([K[2],K[1]],J);return[Math.min(oe[0],ce[0],de[0],fe[0]),Math.min(oe[1],ce[1],de[1],fe[1]),Math.max(oe[0],ce[0],de[0],fe[0]),Math.max(oe[1],ce[1],de[1],fe[1])]}static inverseTransform(K){let J=K[0]*K[3]-K[1]*K[2];return[K[3]/J,-K[1]/J,-K[2]/J,K[0]/J,(K[2]*K[5]-K[4]*K[3])/J,(K[4]*K[1]-K[5]*K[0])/J]}static apply3dTransform(K,J){return[K[0]*J[0]+K[1]*J[1]+K[2]*J[2],K[3]*J[0]+K[4]*J[1]+K[5]*J[2],K[6]*J[0]+K[7]*J[1]+K[8]*J[2]]}static singularValueDecompose2dScale(K){let J=[K[0],K[2],K[1],K[3]],oe=K[0]*J[0]+K[1]*J[2],ce=K[0]*J[1]+K[1]*J[3],de=K[2]*J[0]+K[3]*J[2],fe=K[2]*J[1]+K[3]*J[3],Fe=(oe+fe)/2,Oe=Math.sqrt((oe+fe)**2-4*(oe*fe-de*ce))/2,Ne=Fe+Oe||1,Ee=Fe-Oe||1;return[Math.sqrt(Ne),Math.sqrt(Ee)]}static normalizeRect(K){let J=K.slice(0);return K[0]>K[2]&&(J[0]=K[2],J[2]=K[0]),K[1]>K[3]&&(J[1]=K[3],J[3]=K[1]),J}static intersect(K,J){function oe(Fe,Oe){return Fe-Oe}let ce=[K[0],K[2],J[0],J[2]].sort(oe),de=[K[1],K[3],J[1],J[3]].sort(oe),fe=[];if(K=pe.normalizeRect(K),J=pe.normalizeRect(J),ce[0]===K[0]&&ce[1]===J[0]||ce[0]===J[0]&&ce[1]===K[0])fe[0]=ce[1],fe[2]=ce[2];else return null;if(de[0]===K[1]&&de[1]===J[1]||de[0]===J[1]&&de[1]===K[1])fe[1]=de[1],fe[3]=de[2];else return null;return fe}static bezierBoundingBox(K,J,oe,ce,de,fe,Fe,Oe){let Ne=[],Ee=[[],[]],Ze,ze,pt,Ae,gt,_t,St,Pt;for(let wt=0;wt<2;++wt){if(wt===0?(ze=6*K-12*oe+6*de,Ze=-3*K+9*oe-9*de+3*Fe,pt=3*oe-3*K):(ze=6*J-12*ce+6*fe,Ze=-3*J+9*ce-9*fe+3*Oe,pt=3*ce-3*J),Math.abs(Ze)<1e-12){if(Math.abs(ze)<1e-12)continue;Ae=-pt/ze,0<Ae&&Ae<1&&Ne.push(Ae);continue}St=ze*ze-4*pt*Ze,Pt=Math.sqrt(St),!(St<0)&&(gt=(-ze+Pt)/(2*Ze),0<gt&&gt<1&&Ne.push(gt),_t=(-ze-Pt)/(2*Ze),0<_t&&_t<1&&Ne.push(_t))}let at=Ne.length,Me,ot=at;for(;at--;)Ae=Ne[at],Me=1-Ae,Ee[0][at]=Me*Me*Me*K+3*Me*Me*Ae*oe+3*Me*Ae*Ae*de+Ae*Ae*Ae*Fe,Ee[1][at]=Me*Me*Me*J+3*Me*Me*Ae*ce+3*Me*Ae*Ae*fe+Ae*Ae*Ae*Oe;return Ee[0][ot]=K,Ee[1][ot]=J,Ee[0][ot+1]=Fe,Ee[1][ot+1]=Oe,Ee[0].length=Ee[1].length=ot+2,[Math.min(...Ee[0]),Math.min(...Ee[1]),Math.max(...Ee[0]),Math.max(...Ee[1])]}}e.Util=pe;let ue=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function _e(ee){if(ee[0]>="\xEF"){let J;if(ee[0]==="\xFE"&&ee[1]==="\xFF"?J="utf-16be":ee[0]==="\xFF"&&ee[1]==="\xFE"?J="utf-16le":ee[0]==="\xEF"&&ee[1]==="\xBB"&&ee[2]==="\xBF"&&(J="utf-8"),J)try{let oe=new TextDecoder(J,{fatal:!0}),ce=Y(ee);return oe.decode(ce)}catch(oe){V(`stringToPDFString: "${oe}".`)}}let K=[];for(let J=0,oe=ee.length;J<oe;J++){let ce=ue[ee.charCodeAt(J)];K.push(ce?String.fromCharCode(ce):ee.charAt(J))}return K.join("")}function ke(ee){return ee.replace(/([()\\\n\r])/g,K=>K===`
`?"\\n":K==="\r"?"\\r":`\\${K}`)}function we(ee){return/^[\x00-\x7F]*$/.test(ee)}function Ce(ee){let K=["\xFE\xFF"];for(let J=0,oe=ee.length;J<oe;J++){let ce=ee.charCodeAt(J);K.push(String.fromCharCode(ce>>8&255),String.fromCharCode(ce&255))}return K.join("")}function be(ee){return decodeURIComponent(escape(ee))}function Le(ee){return unescape(encodeURIComponent(ee))}function ge(ee){return typeof ee=="object"&&ee!==null&&ee.byteLength!==void 0}function ye(ee,K){if(ee.length!==K.length)return!1;for(let J=0,oe=ee.length;J<oe;J++)if(ee[J]!==K[J])return!1;return!0}function ve(ee=new Date){return[ee.getUTCFullYear().toString(),(ee.getUTCMonth()+1).toString().padStart(2,"0"),ee.getUTCDate().toString().padStart(2,"0"),ee.getUTCHours().toString().padStart(2,"0"),ee.getUTCMinutes().toString().padStart(2,"0"),ee.getUTCSeconds().toString().padStart(2,"0")].join("")}function Re(){let ee=Object.create(null),K=!1;return Object.defineProperty(ee,"settled",{get(){return K}}),ee.promise=new Promise(function(J,oe){ee.resolve=function(ce){K=!0,J(ce)},ee.reject=function(ce){K=!0,oe(ce)}}),ee}},(j,e,n)=>{var t=n(3)},(j,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isNodeJS=void 0;let n=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");e.isNodeJS=n},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.version=void 0;var _util=__w_pdfjs_require__(1),_display_utils=__w_pdfjs_require__(5),_font_loader=__w_pdfjs_require__(7),_node_utils=__w_pdfjs_require__(8),_annotation_storage=__w_pdfjs_require__(9),_canvas=__w_pdfjs_require__(10),_worker_options=__w_pdfjs_require__(12),_is_node=__w_pdfjs_require__(3),_message_handler=__w_pdfjs_require__(13),_metadata=__w_pdfjs_require__(14),_optional_content_config=__w_pdfjs_require__(15),_transport_stream=__w_pdfjs_require__(16),_xfa_text=__w_pdfjs_require__(17);let DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DefaultCanvasFactory=_is_node.isNodeJS?_node_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_is_node.isNodeJS?_node_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultStandardFontDataFactory=_is_node.isNodeJS?_node_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;let createPDFNetworkStream;function setPDFNetworkStreamFactory(j){createPDFNetworkStream=j}function getDocument(j){let e=new PDFDocumentLoadingTask,n;if(typeof j=="string"||j instanceof URL)n={url:j};else if((0,_util.isArrayBuffer)(j))n={data:j};else if(j instanceof PDFDataRangeTransport)n={range:j};else{if(typeof j!="object")throw new Error("Invalid parameter in getDocument, need either string, URL, Uint8Array, or parameter object.");if(!j.url&&!j.data&&!j.range)throw new Error("Invalid parameter object: need either .data, .range or .url");n=j}let t=Object.create(null),u=null,s=null;for(let _ in n){let p=n[_];switch(_){case"url":if(typeof window<"u")try{t[_]=new URL(p,window.location).href;continue}catch(E){(0,_util.warn)(`Cannot create valid URL: "${E}".`)}else if(typeof p=="string"||p instanceof URL){t[_]=p.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":u=p;continue;case"worker":s=p;continue;case"data":if(_is_node.isNodeJS&&typeof Buffer<"u"&&p instanceof Buffer)t[_]=new Uint8Array(p);else{if(p instanceof Uint8Array)break;if(typeof p=="string")t[_]=(0,_util.stringToBytes)(p);else if(typeof p=="object"&&p!==null&&!isNaN(p.length))t[_]=new Uint8Array(p);else if((0,_util.isArrayBuffer)(p))t[_]=new Uint8Array(p);else throw new Error("Invalid PDF binary data: either typed array, string, or array-like object is expected in the data property.")}continue}t[_]=p}if(t.rangeChunkSize=t.rangeChunkSize||DEFAULT_RANGE_CHUNK_SIZE,t.CMapReaderFactory=t.CMapReaderFactory||DefaultCMapReaderFactory,t.StandardFontDataFactory=t.StandardFontDataFactory||DefaultStandardFontDataFactory,t.ignoreErrors=t.stopAtErrors!==!0,t.fontExtraProperties=t.fontExtraProperties===!0,t.pdfBug=t.pdfBug===!0,t.enableXfa=t.enableXfa===!0,(typeof t.docBaseUrl!="string"||(0,_display_utils.isDataScheme)(t.docBaseUrl))&&(t.docBaseUrl=null),Number.isInteger(t.maxImageSize)||(t.maxImageSize=-1),typeof t.useWorkerFetch!="boolean"&&(t.useWorkerFetch=t.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&t.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory),typeof t.isEvalSupported!="boolean"&&(t.isEvalSupported=!0),typeof t.disableFontFace!="boolean"&&(t.disableFontFace=_is_node.isNodeJS),typeof t.useSystemFonts!="boolean"&&(t.useSystemFonts=!_is_node.isNodeJS&&!t.disableFontFace),typeof t.ownerDocument>"u"&&(t.ownerDocument=globalThis.document),typeof t.disableRange!="boolean"&&(t.disableRange=!1),typeof t.disableStream!="boolean"&&(t.disableStream=!1),typeof t.disableAutoFetch!="boolean"&&(t.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(t.verbosity),!s){let _={verbosity:t.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};s=_.port?_PDFWorker.fromPort(_):new _PDFWorker(_),e._worker=s}let k=e.docId;return s.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");let _=_fetchDocument(s,t,u,k),p=new Promise(function(E){let M;u?M=new _transport_stream.PDFDataTransportStream({length:t.length,initialData:t.initialData,progressiveDone:t.progressiveDone,contentDispositionFilename:t.contentDispositionFilename,disableRange:t.disableRange,disableStream:t.disableStream},u):t.data||(M=createPDFNetworkStream({url:t.url,length:t.length,httpHeaders:t.httpHeaders,withCredentials:t.withCredentials,rangeChunkSize:t.rangeChunkSize,disableRange:t.disableRange,disableStream:t.disableStream})),E(M)});return Promise.all([_,p]).then(function([E,M]){if(e.destroyed)throw new Error("Loading aborted");let b=new _message_handler.MessageHandler(k,E,s.port),A=new WorkerTransport(b,e,M,t);e._transport=A,b.send("Ready",null)})}).catch(e._capability.reject),e}async function _fetchDocument(j,e,n,t){if(j.destroyed)throw new Error("Worker was destroyed");n&&(e.length=n.length,e.initialData=n.initialData,e.progressiveDone=n.progressiveDone,e.contentDispositionFilename=n.contentDispositionFilename);let u=await j.messageHandler.sendWithPromise("GetDocRequest",{docId:t,apiVersion:"2.13.216",source:{data:e.data,url:e.url,password:e.password,disableAutoFetch:e.disableAutoFetch,rangeChunkSize:e.rangeChunkSize,length:e.length},maxImageSize:e.maxImageSize,disableFontFace:e.disableFontFace,docBaseUrl:e.docBaseUrl,ignoreErrors:e.ignoreErrors,isEvalSupported:e.isEvalSupported,fontExtraProperties:e.fontExtraProperties,enableXfa:e.enableXfa,useSystemFonts:e.useSystemFonts,cMapUrl:e.useWorkerFetch?e.cMapUrl:null,standardFontDataUrl:e.useWorkerFetch?e.standardFontDataUrl:null});if(j.destroyed)throw new Error("Worker was destroyed");return u}class PDFDocumentLoadingTask{static get idCounters(){return(0,_util.shadow)(this,"idCounters",{doc:0})}constructor(){this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId=`d${PDFDocumentLoadingTask.idCounters.doc++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0,await this._transport?.destroy(),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}}exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(e,n,t=!1,u=null){this.length=e,this.initialData=n,this.progressiveDone=t,this.contentDispositionFilename=u,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,n){for(let t of this._rangeListeners)t(e,n)}onDataProgress(e,n){this._readyCapability.promise.then(()=>{for(let t of this._progressListeners)t(e,n)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(let n of this._progressiveReadListeners)n(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(let e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,n){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(e,n){this._pdfInfo=e,this._transport=n,Object.defineProperty(this,"fingerprint",{get(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.fingerprint`, please use `PDFDocumentProxy.fingerprints` instead."),this.fingerprints[0]}}),Object.defineProperty(this,"getStats",{value:async()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getStats`, please use the `PDFDocumentProxy.stats`-getter instead."),this.stats||{streamTypes:{},fontTypes:{}})})}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get stats(){return this._transport.stats}get isPureXfa(){return!!this._transport._htmlForXfa}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}saveDocument(){return this._transport.annotationStorage.size<=0&&(0,_display_utils.deprecated)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this._transport.saveDocument()}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(e,n,t,u,s=!1){this._pageIndex=e,this._pageInfo=n,this._ownerDocument=u,this._transport=t,this._stats=s?new _display_utils.StatTimer:null,this._pdfBug=s,this.commonObjs=t.commonObjs,this.objs=new PDFObjects,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this._annotationPromises=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:n=this.rotate,offsetX:t=0,offsetY:u=0,dontFlip:s=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:e,rotation:n,offsetX:t,offsetY:u,dontFlip:s})}getAnnotations({intent:e="display"}={}){let n=this._transport.getRenderingIntent(e),t=this._annotationPromises.get(n.cacheKey);return t||(t=this._transport.getAnnotations(this._pageIndex,n.renderingIntent),this._annotationPromises.set(n.cacheKey,t),t=t.then(u=>{for(let s of u)s.titleObj!==void 0&&Object.defineProperty(s,"title",{get(){return(0,_display_utils.deprecated)("`title`-property on annotation, please use `titleObj` instead."),s.titleObj.str}}),s.contentsObj!==void 0&&Object.defineProperty(s,"contents",{get(){return(0,_display_utils.deprecated)("`contents`-property on annotation, please use `contentsObj` instead."),s.contentsObj.str}});return u})),t}getJSActions(){return this._jsActionsPromise||=this._transport.getPageJSActions(this._pageIndex)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:e,viewport:n,intent:t="display",annotationMode:u=_util.AnnotationMode.ENABLE,transform:s=null,imageLayer:k=null,canvasFactory:_=null,background:p=null,optionalContentConfigPromise:E=null,annotationCanvasMap:M=null}){arguments[0]?.renderInteractiveForms!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `renderInteractiveForms`-option, please use the `annotationMode`-option instead."),arguments[0].renderInteractiveForms===!0&&u===_util.AnnotationMode.ENABLE&&(u=_util.AnnotationMode.ENABLE_FORMS)),arguments[0]?.includeAnnotationStorage!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `includeAnnotationStorage`-option, please use the `annotationMode`-option instead."),arguments[0].includeAnnotationStorage===!0&&u===_util.AnnotationMode.ENABLE&&(u=_util.AnnotationMode.ENABLE_STORAGE)),this._stats&&this._stats.time("Overall");let b=this._transport.getRenderingIntent(t,u);this.pendingCleanup=!1,E||(E=this._transport.getOptionalContentConfig());let A=this._intentStates.get(b.cacheKey);A||(A=Object.create(null),this._intentStates.set(b.cacheKey,A)),A.streamReaderCancelTimeout&&(clearTimeout(A.streamReaderCancelTimeout),A.streamReaderCancelTimeout=null);let w=_||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),g=!!(b.renderingIntent&_util.RenderingIntentFlag.PRINT);A.displayReadyCapability||(A.displayReadyCapability=(0,_util.createPromiseCapability)(),A.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(b));let P=R=>{A.renderTasks.delete(f),(this.cleanupAfterRender||g)&&(this.pendingCleanup=!0),this._tryCleanup(),R?(f.capability.reject(R),this._abortOperatorList({intentState:A,reason:R instanceof Error?R:new Error(R)})):f.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"))},f=new InternalRenderTask({callback:P,params:{canvasContext:e,viewport:n,transform:s,imageLayer:k,background:p},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:M,operatorList:A.operatorList,pageIndex:this._pageIndex,canvasFactory:w,useRequestAnimationFrame:!g,pdfBug:this._pdfBug});(A.renderTasks||=new Set).add(f);let L=f.task;return Promise.all([A.displayReadyCapability.promise,E]).then(([R,F])=>{if(this.pendingCleanup){P();return}this._stats&&this._stats.time("Rendering"),f.initializeGraphics({transparency:R,optionalContentConfig:F}),f.operatorListChanged()}).catch(P),L}getOperatorList({intent:e="display",annotationMode:n=_util.AnnotationMode.ENABLE}={}){function t(){s.operatorList.lastChunk&&(s.opListReadCapability.resolve(s.operatorList),s.renderTasks.delete(k))}let u=this._transport.getRenderingIntent(e,n,!0),s=this._intentStates.get(u.cacheKey);s||(s=Object.create(null),this._intentStates.set(u.cacheKey,s));let k;return s.opListReadCapability||(k=Object.create(null),k.operatorListChanged=t,s.opListReadCapability=(0,_util.createPromiseCapability)(),(s.renderTasks||=new Set).add(k),s.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(u)),s.opListReadCapability.promise}streamTextContent({disableCombineTextItems:e=!1,includeMarkedContent:n=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:e!==!0,includeMarkedContent:n===!0},{highWaterMark:100,size(u){return u.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(t=>_xfa_text.XfaText.textContent(t));let n=this.streamTextContent(e);return new Promise(function(t,u){function s(){k.read().then(function({value:p,done:E}){if(E){t(_);return}Object.assign(_.styles,p.styles),_.items.push(...p.items),s()},u)}let k=n.getReader(),_={items:[],styles:Object.create(null)};s()})}getStructTree(){return this._structTreePromise||=this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;let e=[];for(let n of this._intentStates.values())if(this._abortOperatorList({intentState:n,reason:new Error("Page was destroyed."),force:!0}),!n.opListReadCapability)for(let t of n.renderTasks)e.push(t.completed),t.cancel();return this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,this.pendingCleanup=!1,Promise.all(e)}cleanup(e=!1){return this.pendingCleanup=!0,this._tryCleanup(e)}_tryCleanup(e=!1){if(!this.pendingCleanup)return!1;for(let{renderTasks:n,operatorList:t}of this._intentStates.values())if(n.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,e&&this._stats&&(this._stats=new _display_utils.StatTimer),this.pendingCleanup=!1,!0}_startRenderPage(e,n){let t=this._intentStates.get(n);!t||(this._stats&&this._stats.timeEnd("Page Request"),t.displayReadyCapability&&t.displayReadyCapability.resolve(e))}_renderPageChunk(e,n){for(let t=0,u=e.length;t<u;t++)n.operatorList.fnArray.push(e.fnArray[t]),n.operatorList.argsArray.push(e.argsArray[t]);n.operatorList.lastChunk=e.lastChunk;for(let t of n.renderTasks)t.operatorListChanged();e.lastChunk&&this._tryCleanup()}_pumpOperatorList({renderingIntent:e,cacheKey:n}){let u=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:n,annotationStorage:e&_util.RenderingIntentFlag.ANNOTATIONS_STORAGE?this._transport.annotationStorage.serializable:null}).getReader(),s=this._intentStates.get(n);s.streamReader=u;let k=()=>{u.read().then(({value:_,done:p})=>{if(p){s.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(_,s),k())},_=>{if(s.streamReader=null,!this._transport.destroyed){if(s.operatorList){s.operatorList.lastChunk=!0;for(let p of s.renderTasks)p.operatorListChanged();this._tryCleanup()}if(s.displayReadyCapability)s.displayReadyCapability.reject(_);else if(s.opListReadCapability)s.opListReadCapability.reject(_);else throw _}})};k()}_abortOperatorList({intentState:e,reason:n,force:t=!1}){if(!!e.streamReader){if(!t){if(e.renderTasks.size>0)return;if(n instanceof _display_utils.RenderingCancelledException){e.streamReaderCancelTimeout=setTimeout(()=>{this._abortOperatorList({intentState:e,reason:n,force:!0}),e.streamReaderCancelTimeout=null},RENDERING_CANCELLED_TIMEOUT);return}}if(e.streamReader.cancel(new _util.AbortException(n.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(let[u,s]of this._intentStates)if(s===e){this._intentStates.delete(u);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){this._listeners=[],this._deferred=Promise.resolve()}postMessage(e,n){let t={data:structuredClone(e,n)};this._deferred.then(()=>{for(let u of this._listeners)u.call(this,t)})}addEventListener(e,n){this._listeners.push(n)}removeEventListener(e,n){let t=this._listeners.indexOf(n);this._listeners.splice(t,1)}terminate(){this._listeners.length=0}}exports.LoopbackPort=LoopbackPort;let PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};{if(_is_node.isNodeJS&&typeof Et=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){let j=document?.currentScript?.src;j&&(PDFWorkerUtil.fallbackWorkerSrc=j.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.createCDNWrapper=function(j){let e=`importScripts("${j}");`;return URL.createObjectURL(new Blob([e]))}}class _PDFWorker{static get _workerPorts(){return(0,_util.shadow)(this,"_workerPorts",new WeakMap)}constructor({name:j=null,port:e=null,verbosity:n=(0,_util.getVerbosityLevel)()}={}){if(e&&_PDFWorker._workerPorts.has(e))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=j,this.destroyed=!1,this.verbosity=n,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,e){_PDFWorker._workerPorts.set(e,this),this._initializeFromPort(e);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(j){this._port=j,this._messageHandler=new _message_handler.MessageHandler("main","worker",j),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve()}_initialize(){if(typeof Worker<"u"&&!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let j=_PDFWorker.workerSrc;try{(0,_util.isSameOrigin)(window.location.href,j)||(j=PDFWorkerUtil.createCDNWrapper(new URL(j,window.location).href));let e=new Worker(j),n=new _message_handler.MessageHandler("main","worker",e),t=()=>{e.removeEventListener("error",u),n.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},u=()=>{this._webWorker||t()};e.addEventListener("error",u),n.on("test",k=>{if(e.removeEventListener("error",u),this.destroyed){t();return}k?(this._messageHandler=n,this._port=e,this._webWorker=e,this._readyCapability.resolve(),n.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),n.destroy(),e.terminate())}),n.on("ready",k=>{if(e.removeEventListener("error",u),this.destroyed){t();return}try{s()}catch{this._setupFakeWorker()}});let s=()=>{let k=new Uint8Array([255]);try{n.send("test",k,[k.buffer])}catch{(0,_util.warn)("Cannot use postMessage transfers."),k[0]=0,n.send("test",k)}};s();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(j=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}let e=new LoopbackPort;this._port=e;let n=`fake${PDFWorkerUtil.fakeWorkerId++}`,t=new _message_handler.MessageHandler(n+"_worker",n,e);j.setup(t,e);let u=new _message_handler.MessageHandler(n,n+"_worker",e);this._messageHandler=u,this._readyCapability.resolve(),u.send("configure",{verbosity:this.verbosity})}).catch(j=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${j.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),_PDFWorker._workerPorts.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(j){if(!j?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return this._workerPorts.has(j.port)?this._workerPorts.get(j.port):new _PDFWorker(j)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){let loader=async()=>{let mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&typeof Et=="function"){let worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}exports.PDFWorker=_PDFWorker,_PDFWorker.getWorkerSrc=function(){return(0,_display_utils.deprecated)("`PDFWorker.getWorkerSrc()`, please use `PDFWorker.workerSrc` instead."),this.workerSrc};class WorkerTransport{#e=null;#t=new Map;#i=new Map;#s=null;constructor(e,n,t,u){this.messageHandler=e,this.loadingTask=n,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:n.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:u.ownerDocument,styleElement:u.styleElement}),this._params=u,u.useWorkerFetch||(this.CMapReaderFactory=new u.CMapReaderFactory({baseUrl:u.cMapUrl,isCompressed:u.cMapPacked}),this.StandardFontDataFactory=new u.StandardFontDataFactory({baseUrl:u.standardFontDataUrl})),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=t,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}get stats(){return this.#e}getRenderingIntent(e,n=_util.AnnotationMode.ENABLE,t=!1){let u=_util.RenderingIntentFlag.DISPLAY,s="";switch(e){case"any":u=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":u=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${e}`)}switch(n){case _util.AnnotationMode.DISABLE:u+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:u+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:u+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,s=this.annotationStorage.lastModified;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${n}`)}return t&&(u+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:u,cacheKey:`${u}_${s}`}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));let e=[];for(let t of this.#t.values())e.push(t._destroy());this.#t.clear(),this.#i.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();let n=this.messageHandler.sendWithPromise("Terminate",null);return e.push(n),Promise.all(e).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#s=null,this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null,this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){let{messageHandler:e,loadingTask:n}=this;e.on("GetReader",(t,u)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=s=>{this._lastProgress={loaded:s.loaded,total:s.total}},u.onPull=()=>{this._fullReader.read().then(function({value:s,done:k}){if(k){u.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(s),"GetReader - expected an ArrayBuffer."),u.enqueue(new Uint8Array(s),1,[s])}).catch(s=>{u.error(s)})},u.onCancel=s=>{this._fullReader.cancel(s),u.ready.catch(k=>{if(!this.destroyed)throw k})}}),e.on("ReaderHeadersReady",t=>{let u=(0,_util.createPromiseCapability)(),s=this._fullReader;return s.headersReady.then(()=>{(!s.isStreamingSupported||!s.isRangeSupported)&&(this._lastProgress&&n.onProgress?.(this._lastProgress),s.onProgress=k=>{n.onProgress?.({loaded:k.loaded,total:k.total})}),u.resolve({isStreamingSupported:s.isStreamingSupported,isRangeSupported:s.isRangeSupported,contentLength:s.contentLength})},u.reject),u.promise}),e.on("GetRangeReader",(t,u)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");let s=this._networkStream.getRangeReader(t.begin,t.end);if(!s){u.close();return}u.onPull=()=>{s.read().then(function({value:k,done:_}){if(_){u.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(k),"GetRangeReader - expected an ArrayBuffer."),u.enqueue(new Uint8Array(k),1,[k])}).catch(k=>{u.error(k)})},u.onCancel=k=>{s.cancel(k),u.ready.catch(_=>{if(!this.destroyed)throw _})}}),e.on("GetDoc",({pdfInfo:t})=>{this._numPages=t.numPages,this._htmlForXfa=t.htmlForXfa,delete t.htmlForXfa,n._capability.resolve(new PDFDocumentProxy(t,this))}),e.on("DocException",function(t){let u;switch(t.name){case"PasswordException":u=new _util.PasswordException(t.message,t.code);break;case"InvalidPDFException":u=new _util.InvalidPDFException(t.message);break;case"MissingPDFException":u=new _util.MissingPDFException(t.message);break;case"UnexpectedResponseException":u=new _util.UnexpectedResponseException(t.message,t.status);break;case"UnknownErrorException":u=new _util.UnknownErrorException(t.message,t.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}n._capability.reject(u)}),e.on("PasswordRequest",t=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),n.onPassword){let u=s=>{s instanceof Error?this._passwordCapability.reject(s):this._passwordCapability.resolve({password:s})};try{n.onPassword(u,t.code)}catch(s){this._passwordCapability.reject(s)}}else this._passwordCapability.reject(new _util.PasswordException(t.message,t.code));return this._passwordCapability.promise}),e.on("DataLoaded",t=>{n.onProgress?.({loaded:t.length,total:t.length}),this.downloadInfoCapability.resolve(t)}),e.on("StartRenderPage",t=>{if(this.destroyed)return;this.#t.get(t.pageIndex)._startRenderPage(t.transparency,t.cacheKey)}),e.on("commonobj",([t,u,s])=>{if(!this.destroyed&&!this.commonObjs.has(t))switch(u){case"Font":let k=this._params;if("error"in s){let E=s.error;(0,_util.warn)(`Error during font loading: ${E}`),this.commonObjs.resolve(t,E);break}let _=null;k.pdfBug&&globalThis.FontInspector?.enabled&&(_={registerFont(E,M){globalThis.FontInspector.fontAdded(E,M)}});let p=new _font_loader.FontFaceObject(s,{isEvalSupported:k.isEvalSupported,disableFontFace:k.disableFontFace,ignoreErrors:k.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:_});this.fontLoader.bind(p).catch(E=>e.sendWithPromise("FontFallback",{id:t})).finally(()=>{!k.fontExtraProperties&&p.data&&(p.data=null),this.commonObjs.resolve(t,p)});break;case"FontPath":case"Image":this.commonObjs.resolve(t,s);break;default:throw new Error(`Got unknown common object type ${u}`)}}),e.on("obj",([t,u,s,k])=>{if(this.destroyed)return;let _=this.#t.get(u);if(!_.objs.has(t))switch(s){case"Image":_.objs.resolve(t,k);let p=8e6;k?.data?.length>p&&(_.cleanupAfterRender=!0);break;case"Pattern":_.objs.resolve(t,k);break;default:throw new Error(`Got unknown object type ${s}`)}}),e.on("DocProgress",t=>{this.destroyed||n.onProgress?.({loaded:t.loaded,total:t.total})}),e.on("DocStats",t=>{this.destroyed||(this.#e=Object.freeze({streamTypes:Object.freeze(t.streamTypes),fontTypes:Object.freeze(t.fontTypes)}))}),e.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),e.on("FetchBuiltInCMap",t=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.CMapReaderFactory?this.CMapReaderFactory.fetch(t):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),e.on("FetchStandardFontData",t=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.StandardFontDataFactory?this.StandardFontDataFactory.fetch(t):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}_onUnsupportedFeature({featureId:e}){this.destroyed||this.loadingTask.onUnsupportedFeature?.(e)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));let n=e-1,t=this.#i.get(n);if(t)return t;let u=this.messageHandler.sendWithPromise("GetPage",{pageIndex:n}).then(s=>{if(this.destroyed)throw new Error("Transport destroyed");let k=new PDFPageProxy(n,s,this,this._params.ownerDocument,this._params.pdfBug);return this.#t.set(n,k),k});return this.#i.set(n,u),u}getPageIndex(e){return typeof e!="object"||e===null||!Number.isInteger(e.num)||e.num<0||!Number.isInteger(e.gen)||e.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen})}getAnnotations(e,n){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:n})}saveDocument(){return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:this._fullReader?.filename??null}).finally(()=>{this.annotationStorage.resetModified()})}getFieldObjects(){return this._getFieldObjectsPromise||=this.messageHandler.sendWithPromise("GetFieldObjects",null)}hasJSActions(){return this._hasJSActionsPromise||=this.messageHandler.sendWithPromise("HasJSActions",null)}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(e=>new _optional_content_config.OptionalContentConfig(e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return this.#s||=this.messageHandler.sendWithPromise("GetMetadata",null).then(e=>({info:e[0],metadata:e[1]?new _metadata.Metadata(e[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}))}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(await this.messageHandler.sendWithPromise("Cleanup",null),!this.destroyed){for(let n of this.#t.values())if(!n.cleanup())throw new Error(`startCleanup: Page ${n.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),this.#s=null,this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null}}get loadingParams(){let e=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:e.disableAutoFetch,enableXfa:e.enableXfa})}}class PDFObjects{#e=Object.create(null);#t(e){let n=this.#e[e];return n||(this.#e[e]={capability:(0,_util.createPromiseCapability)(),data:null})}get(e,n=null){if(n){let u=this.#t(e);return u.capability.promise.then(()=>n(u.data)),null}let t=this.#e[e];if(!t?.capability.settled)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return t.data}has(e){return this.#e[e]?.capability.settled||!1}resolve(e,n=null){let t=this.#t(e);t.data=n,t.capability.resolve()}clear(){this.#e=Object.create(null)}}class RenderTask{constructor(e){this._internalRenderTask=e,this.onContinue=null}get promise(){return this._internalRenderTask.capability.promise}cancel(){this._internalRenderTask.cancel()}}exports.RenderTask=RenderTask;class InternalRenderTask{static get canvasInUse(){return(0,_util.shadow)(this,"canvasInUse",new WeakSet)}constructor({callback:e,params:n,objs:t,commonObjs:u,annotationCanvasMap:s,operatorList:k,pageIndex:_,canvasFactory:p,useRequestAnimationFrame:E=!1,pdfBug:M=!1}){this.callback=e,this.params=n,this.objs=t,this.commonObjs=u,this.annotationCanvasMap=s,this.operatorListIdx=null,this.operatorList=k,this._pageIndex=_,this.canvasFactory=p,this._pdfBug=M,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=E===!0&&typeof window<"u",this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=n.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:n}){if(this.cancelled)return;if(this._canvas){if(InternalRenderTask.canvasInUse.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");InternalRenderTask.canvasInUse.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());let{canvasContext:t,viewport:u,transform:s,imageLayer:k,background:_}=this.params;this.gfx=new _canvas.CanvasGraphics(t,this.commonObjs,this.objs,this.canvasFactory,k,n,this.annotationCanvasMap),this.gfx.beginDrawing({transform:s,viewport:u,transparency:e,background:_}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}cancel(e=null){this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&InternalRenderTask.canvasInUse.delete(this._canvas),this.callback(e||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}this.stepper&&this.stepper.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&InternalRenderTask.canvasInUse.delete(this._canvas),this.callback())))}}let version="2.13.216";exports.version=version;let build="399a0ec60";exports.build=build},(j,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StatTimer=e.RenderingCancelledException=e.PixelsPerInch=e.PageViewport=e.PDFDateString=e.DOMStandardFontDataFactory=e.DOMSVGFactory=e.DOMCanvasFactory=e.DOMCMapReaderFactory=void 0,e.deprecated=o,e.getFilenameFromUrl=f,e.getPdfFilenameFromUrl=L,e.getXfaPageViewport=r,e.isDataScheme=g,e.isPdfFile=P,e.isValidFetchUrl=F,e.loadScript=D;var t=n(6),u=n(1);let s="http://www.w3.org/2000/svg";class k{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}e.PixelsPerInch=k;class _ extends t.BaseCanvasFactory{constructor({ownerDocument:v=globalThis.document}={}){super(),this._document=v}_createCanvas(v,S){let O=this._document.createElement("canvas");return O.width=v,O.height=S,O}}e.DOMCanvasFactory=_;async function p(a,v=!1){if(F(a,document.baseURI)){let S=await fetch(a);if(!S.ok)throw new Error(S.statusText);return v?new Uint8Array(await S.arrayBuffer()):(0,u.stringToBytes)(await S.text())}return new Promise((S,O)=>{let x=new XMLHttpRequest;x.open("GET",a,!0),v&&(x.responseType="arraybuffer"),x.onreadystatechange=()=>{if(x.readyState===XMLHttpRequest.DONE){if(x.status===200||x.status===0){let I;if(v&&x.response?I=new Uint8Array(x.response):!v&&x.responseText&&(I=(0,u.stringToBytes)(x.responseText)),I){S(I);return}}O(new Error(x.statusText))}},x.send(null)})}class E extends t.BaseCMapReaderFactory{_fetchData(v,S){return p(v,this.isCompressed).then(O=>({cMapData:O,compressionType:S}))}}e.DOMCMapReaderFactory=E;class M extends t.BaseStandardFontDataFactory{_fetchData(v){return p(v,!0)}}e.DOMStandardFontDataFactory=M;class b extends t.BaseSVGFactory{_createSVG(v){return document.createElementNS(s,v)}}e.DOMSVGFactory=b;class A{constructor({viewBox:v,scale:S,rotation:O,offsetX:x=0,offsetY:I=0,dontFlip:U=!1}){this.viewBox=v,this.scale=S,this.rotation=O,this.offsetX=x,this.offsetY=I;let V=(v[2]+v[0])/2,z=(v[3]+v[1])/2,G,d,m,h;switch(O%=360,O<0&&(O+=360),O){case 180:G=-1,d=0,m=0,h=1;break;case 90:G=0,d=1,m=1,h=0;break;case 270:G=0,d=-1,m=-1,h=0;break;case 0:G=1,d=0,m=0,h=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}U&&(m=-m,h=-h);let C,i,c,y;G===0?(C=Math.abs(z-v[1])*S+x,i=Math.abs(V-v[0])*S+I,c=Math.abs(v[3]-v[1])*S,y=Math.abs(v[2]-v[0])*S):(C=Math.abs(V-v[0])*S+x,i=Math.abs(z-v[1])*S+I,c=Math.abs(v[2]-v[0])*S,y=Math.abs(v[3]-v[1])*S),this.transform=[G*S,d*S,m*S,h*S,C-G*S*V-m*S*z,i-d*S*V-h*S*z],this.width=c,this.height=y}clone({scale:v=this.scale,rotation:S=this.rotation,offsetX:O=this.offsetX,offsetY:x=this.offsetY,dontFlip:I=!1}={}){return new A({viewBox:this.viewBox.slice(),scale:v,rotation:S,offsetX:O,offsetY:x,dontFlip:I})}convertToViewportPoint(v,S){return u.Util.applyTransform([v,S],this.transform)}convertToViewportRectangle(v){let S=u.Util.applyTransform([v[0],v[1]],this.transform),O=u.Util.applyTransform([v[2],v[3]],this.transform);return[S[0],S[1],O[0],O[1]]}convertToPdfPoint(v,S){return u.Util.applyInverseTransform([v,S],this.transform)}}e.PageViewport=A;class w extends u.BaseException{constructor(v,S){super(v,"RenderingCancelledException"),this.type=S}}e.RenderingCancelledException=w;function g(a){let v=a.length,S=0;for(;S<v&&a[S].trim()==="";)S++;return a.substring(S,S+5).toLowerCase()==="data:"}function P(a){return typeof a=="string"&&/\.pdf$/i.test(a)}function f(a){let v=a.indexOf("#"),S=a.indexOf("?"),O=Math.min(v>0?v:a.length,S>0?S:a.length);return a.substring(a.lastIndexOf("/",O)+1,O)}function L(a,v="document.pdf"){if(typeof a!="string")return v;if(g(a))return(0,u.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),v;let S=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,O=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,x=S.exec(a),I=O.exec(x[1])||O.exec(x[2])||O.exec(x[3]);if(I&&(I=I[0],I.includes("%")))try{I=O.exec(decodeURIComponent(I))[0]}catch{}return I||v}class R{constructor(){this.started=Object.create(null),this.times=[]}time(v){v in this.started&&(0,u.warn)(`Timer is already running for ${v}`),this.started[v]=Date.now()}timeEnd(v){v in this.started||(0,u.warn)(`Timer has not been started for ${v}`),this.times.push({name:v,start:this.started[v],end:Date.now()}),delete this.started[v]}toString(){let v=[],S=0;for(let O of this.times){let x=O.name;x.length>S&&(S=x.length)}for(let O of this.times){let x=O.end-O.start;v.push(`${O.name.padEnd(S)} ${x}ms
`)}return v.join("")}}e.StatTimer=R;function F(a,v){try{let{protocol:S}=v?new URL(a,v):new URL(a);return S==="http:"||S==="https:"}catch{return!1}}function D(a,v=!1){return new Promise((S,O)=>{let x=document.createElement("script");x.src=a,x.onload=function(I){v&&x.remove(),S(I)},x.onerror=function(){O(new Error(`Cannot load script at: ${x.src}`))},(document.head||document.documentElement).appendChild(x)})}function o(a){console.log("Deprecated API usage: "+a)}let l;class N{static toDateObject(v){if(!v||typeof v!="string")return null;l||(l=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));let S=l.exec(v);if(!S)return null;let O=parseInt(S[1],10),x=parseInt(S[2],10);x=x>=1&&x<=12?x-1:0;let I=parseInt(S[3],10);I=I>=1&&I<=31?I:1;let U=parseInt(S[4],10);U=U>=0&&U<=23?U:0;let V=parseInt(S[5],10);V=V>=0&&V<=59?V:0;let z=parseInt(S[6],10);z=z>=0&&z<=59?z:0;let G=S[7]||"Z",d=parseInt(S[8],10);d=d>=0&&d<=23?d:0;let m=parseInt(S[9],10)||0;return m=m>=0&&m<=59?m:0,G==="-"?(U+=d,V+=m):G==="+"&&(U-=d,V-=m),new Date(Date.UTC(O,x,I,U,V,z))}}e.PDFDateString=N;function r(a,{scale:v=1,rotation:S=0}){let{width:O,height:x}=a.attributes.style,I=[0,0,parseInt(O),parseInt(x)];return new A({viewBox:I,scale:v,rotation:S})}},(j,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseStandardFontDataFactory=e.BaseSVGFactory=e.BaseCanvasFactory=e.BaseCMapReaderFactory=void 0;var t=n(1);class u{constructor(){this.constructor===u&&(0,t.unreachable)("Cannot initialize BaseCanvasFactory.")}create(E,M){if(E<=0||M<=0)throw new Error("Invalid canvas size");let b=this._createCanvas(E,M);return{canvas:b,context:b.getContext("2d")}}reset(E,M,b){if(!E.canvas)throw new Error("Canvas is not specified");if(M<=0||b<=0)throw new Error("Invalid canvas size");E.canvas.width=M,E.canvas.height=b}destroy(E){if(!E.canvas)throw new Error("Canvas is not specified");E.canvas.width=0,E.canvas.height=0,E.canvas=null,E.context=null}_createCanvas(E,M){(0,t.unreachable)("Abstract method `_createCanvas` called.")}}e.BaseCanvasFactory=u;class s{constructor({baseUrl:E=null,isCompressed:M=!1}){this.constructor===s&&(0,t.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=E,this.isCompressed=M}async fetch({name:E}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!E)throw new Error("CMap name must be specified.");let M=this.baseUrl+E+(this.isCompressed?".bcmap":""),b=this.isCompressed?t.CMapCompressionType.BINARY:t.CMapCompressionType.NONE;return this._fetchData(M,b).catch(A=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${M}`)})}_fetchData(E,M){(0,t.unreachable)("Abstract method `_fetchData` called.")}}e.BaseCMapReaderFactory=s;class k{constructor({baseUrl:E=null}){this.constructor===k&&(0,t.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=E}async fetch({filename:E}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!E)throw new Error("Font filename must be specified.");let M=`${this.baseUrl}${E}`;return this._fetchData(M).catch(b=>{throw new Error(`Unable to load font data at: ${M}`)})}_fetchData(E){(0,t.unreachable)("Abstract method `_fetchData` called.")}}e.BaseStandardFontDataFactory=k;class _{constructor(){this.constructor===_&&(0,t.unreachable)("Cannot initialize BaseSVGFactory.")}create(E,M){if(E<=0||M<=0)throw new Error("Invalid SVG dimensions");let b=this._createSVG("svg:svg");return b.setAttribute("version","1.1"),b.setAttribute("width",`${E}px`),b.setAttribute("height",`${M}px`),b.setAttribute("preserveAspectRatio","none"),b.setAttribute("viewBox",`0 0 ${E} ${M}`),b}createElement(E){if(typeof E!="string")throw new Error("Invalid SVG element type");return this._createSVG(E)}_createSVG(E){(0,t.unreachable)("Abstract method `_createSVG` called.")}}e.BaseSVGFactory=_},(j,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FontLoader=e.FontFaceObject=void 0;var t=n(1);class u{constructor({docId:p,onUnsupportedFeature:E,ownerDocument:M=globalThis.document,styleElement:b=null}){this.constructor===u&&(0,t.unreachable)("Cannot initialize BaseFontLoader."),this.docId=p,this._onUnsupportedFeature=E,this._document=M,this.nativeFontFaces=[],this.styleElement=null}addNativeFontFace(p){this.nativeFontFaces.push(p),this._document.fonts.add(p)}insertRule(p){let E=this.styleElement;E||(E=this.styleElement=this._document.createElement("style"),E.id=`PDFJS_FONT_STYLE_TAG_${this.docId}`,this._document.documentElement.getElementsByTagName("head")[0].appendChild(E));let M=E.sheet;M.insertRule(p,M.cssRules.length)}clear(){for(let p of this.nativeFontFaces)this._document.fonts.delete(p);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(p){if(p.attached||p.missingFile)return;if(p.attached=!0,this.isFontLoadingAPISupported){let M=p.createNativeFontFace();if(M){this.addNativeFontFace(M);try{await M.loaded}catch(b){throw this._onUnsupportedFeature({featureId:t.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,t.warn)(`Failed to load font '${M.family}': '${b}'.`),p.disableFontFace=!0,b}}return}let E=p.createFontFaceRule();if(E){if(this.insertRule(E),this.isSyncFontLoadingSupported)return;await new Promise(M=>{let b=this._queueLoadingCallback(M);this._prepareFontLoadEvent([E],[p],b)})}}_queueLoadingCallback(p){(0,t.unreachable)("Abstract method `_queueLoadingCallback`.")}get isFontLoadingAPISupported(){let p=!!this._document?.fonts;return(0,t.shadow)(this,"isFontLoadingAPISupported",p)}get isSyncFontLoadingSupported(){(0,t.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}get _loadTestFont(){(0,t.unreachable)("Abstract method `_loadTestFont`.")}_prepareFontLoadEvent(p,E,M){(0,t.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}let s;e.FontLoader=s,e.FontLoader=s=class extends u{constructor(p){super(p),this.loadingContext={requests:[],nextRequestId:0},this.loadTestFontId=0}get isSyncFontLoadingSupported(){let p=!1;return(typeof navigator>"u"||/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent)?.[1]>=14)&&(p=!0),(0,t.shadow)(this,"isSyncFontLoadingSupported",p)}_queueLoadingCallback(p){function E(){for((0,t.assert)(!b.done,"completeRequest() cannot be called twice."),b.done=!0;M.requests.length>0&&M.requests[0].done;){let A=M.requests.shift();setTimeout(A.callback,0)}}let M=this.loadingContext,b={id:`pdfjs-font-loading-${M.nextRequestId++}`,done:!1,complete:E,callback:p};return M.requests.push(b),b}get _loadTestFont(){let p=function(){return atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==")};return(0,t.shadow)(this,"_loadTestFont",p())}_prepareFontLoadEvent(p,E,M){function b(x,I){return x.charCodeAt(I)<<24|x.charCodeAt(I+1)<<16|x.charCodeAt(I+2)<<8|x.charCodeAt(I+3)&255}function A(x,I,U,V){let z=x.substring(0,I),G=x.substring(I+U);return z+V+G}let w,g,P=this._document.createElement("canvas");P.width=1,P.height=1;let f=P.getContext("2d"),L=0;function R(x,I){if(L++,L>30){(0,t.warn)("Load test font never loaded."),I();return}if(f.font="30px "+x,f.fillText(".",0,20),f.getImageData(0,0,1,1).data[3]>0){I();return}setTimeout(R.bind(null,x,I))}let F=`lt${Date.now()}${this.loadTestFontId++}`,D=this._loadTestFont;D=A(D,976,F.length,F);let l=16,N=1482184792,r=b(D,l);for(w=0,g=F.length-3;w<g;w+=4)r=r-N+b(F,w)|0;w<F.length&&(r=r-N+b(F+"XXX",w)|0),D=A(D,l,4,(0,t.string32)(r));let a=`url(data:font/opentype;base64,${btoa(D)});`,v=`@font-face {font-family:"${F}";src:${a}}`;this.insertRule(v);let S=[];for(let x of E)S.push(x.loadedName);S.push(F);let O=this._document.createElement("div");O.style.visibility="hidden",O.style.width=O.style.height="10px",O.style.position="absolute",O.style.top=O.style.left="0px";for(let x of S){let I=this._document.createElement("span");I.textContent="Hi",I.style.fontFamily=x,O.appendChild(I)}this._document.body.appendChild(O),R(F,()=>{O.remove(),M.complete()})}};class k{constructor(p,{isEvalSupported:E=!0,disableFontFace:M=!1,ignoreErrors:b=!1,onUnsupportedFeature:A,fontRegistry:w=null}){this.compiledGlyphs=Object.create(null);for(let g in p)this[g]=p[g];this.isEvalSupported=E!==!1,this.disableFontFace=M===!0,this.ignoreErrors=b===!0,this._onUnsupportedFeature=A,this.fontRegistry=w}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let p;if(!this.cssFontInfo)p=new FontFace(this.loadedName,this.data,{});else{let E={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(E.style=`oblique ${this.cssFontInfo.italicAngle}deg`),p=new FontFace(this.cssFontInfo.fontFamily,this.data,E)}return this.fontRegistry&&this.fontRegistry.registerFont(this),p}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;let p=(0,t.bytesToString)(this.data),E=`url(data:${this.mimetype};base64,${btoa(p)});`,M;if(!this.cssFontInfo)M=`@font-face {font-family:"${this.loadedName}";src:${E}}`;else{let b=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(b+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),M=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${b}src:${E}}`}return this.fontRegistry&&this.fontRegistry.registerFont(this,E),M}getPathGenerator(p,E){if(this.compiledGlyphs[E]!==void 0)return this.compiledGlyphs[E];let M;try{M=p.get(this.loadedName+"_path_"+E)}catch(b){if(!this.ignoreErrors)throw b;return this._onUnsupportedFeature({featureId:t.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,t.warn)(`getPathGenerator - ignoring character: "${b}".`),this.compiledGlyphs[E]=function(A,w){}}if(this.isEvalSupported&&t.IsEvalSupportedCached.value){let b=[];for(let A of M){let w=A.args!==void 0?A.args.join(","):"";b.push("c.",A.cmd,"(",w,`);
`)}return this.compiledGlyphs[E]=new Function("c","size",b.join(""))}return this.compiledGlyphs[E]=function(b,A){for(let w of M)w.cmd==="scale"&&(w.args=[A,-A]),b[w.cmd].apply(b,w.args)}}}e.FontFaceObject=k},(j,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NodeStandardFontDataFactory=e.NodeCanvasFactory=e.NodeCMapReaderFactory=void 0;var t=n(6),u=n(3),s=n(1);let k=class{constructor(){(0,s.unreachable)("Not implemented: NodeCanvasFactory")}};e.NodeCanvasFactory=k;let _=class{constructor(){(0,s.unreachable)("Not implemented: NodeCMapReaderFactory")}};e.NodeCMapReaderFactory=_;let p=class{constructor(){(0,s.unreachable)("Not implemented: NodeStandardFontDataFactory")}};if(e.NodeStandardFontDataFactory=p,u.isNodeJS){let E=function(M){return new Promise((b,A)=>{$t().readFile(M,(g,P)=>{if(g||!P){A(new Error(g));return}b(new Uint8Array(P))})})};e.NodeCanvasFactory=k=class extends t.BaseCanvasFactory{_createCanvas(M,b){return ci().createCanvas(M,b)}},e.NodeCMapReaderFactory=_=class extends t.BaseCMapReaderFactory{_fetchData(M,b){return E(M).then(A=>({cMapData:A,compressionType:b}))}},e.NodeStandardFontDataFactory=p=class extends t.BaseStandardFontDataFactory{_fetchData(M){return E(M)}}}},(j,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationStorage=void 0;var t=n(1);class u{constructor(){this._storage=new Map,this._timeStamp=Date.now(),this._modified=!1,this.onSetModified=null,this.onResetModified=null}getValue(k,_){let p=this._storage.get(k);return p===void 0?_:Object.assign(_,p)}setValue(k,_){let p=this._storage.get(k),E=!1;if(p!==void 0)for(let[M,b]of Object.entries(_))p[M]!==b&&(E=!0,p[M]=b);else E=!0,this._storage.set(k,_);E&&(this._timeStamp=Date.now(),this._setModified())}getAll(){return this._storage.size>0?(0,t.objectFromMap)(this._storage):null}get size(){return this._storage.size}_setModified(){this._modified||(this._modified=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this._modified&&(this._modified=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get serializable(){return this._storage.size>0?this._storage:null}get lastModified(){return this._timeStamp.toString()}}e.AnnotationStorage=u},(j,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasGraphics=void 0;var t=n(1),u=n(11),s=n(5);let k=16,_=100,p=4096,E=15,M=10,b=!0,A=1e3,w=16,g=1.000001;function P(d,m){if(d._removeMirroring)throw new Error("Context is already forwarding operations.");d.__originalSave=d.save,d.__originalRestore=d.restore,d.__originalRotate=d.rotate,d.__originalScale=d.scale,d.__originalTranslate=d.translate,d.__originalTransform=d.transform,d.__originalSetTransform=d.setTransform,d.__originalResetTransform=d.resetTransform,d.__originalClip=d.clip,d.__originalMoveTo=d.moveTo,d.__originalLineTo=d.lineTo,d.__originalBezierCurveTo=d.bezierCurveTo,d.__originalRect=d.rect,d.__originalClosePath=d.closePath,d.__originalBeginPath=d.beginPath,d._removeMirroring=()=>{d.save=d.__originalSave,d.restore=d.__originalRestore,d.rotate=d.__originalRotate,d.scale=d.__originalScale,d.translate=d.__originalTranslate,d.transform=d.__originalTransform,d.setTransform=d.__originalSetTransform,d.resetTransform=d.__originalResetTransform,d.clip=d.__originalClip,d.moveTo=d.__originalMoveTo,d.lineTo=d.__originalLineTo,d.bezierCurveTo=d.__originalBezierCurveTo,d.rect=d.__originalRect,d.closePath=d.__originalClosePath,d.beginPath=d.__originalBeginPath,delete d._removeMirroring},d.save=function(){m.save(),this.__originalSave()},d.restore=function(){m.restore(),this.__originalRestore()},d.translate=function(C,i){m.translate(C,i),this.__originalTranslate(C,i)},d.scale=function(C,i){m.scale(C,i),this.__originalScale(C,i)},d.transform=function(C,i,c,y,B,T){m.transform(C,i,c,y,B,T),this.__originalTransform(C,i,c,y,B,T)},d.setTransform=function(C,i,c,y,B,T){m.setTransform(C,i,c,y,B,T),this.__originalSetTransform(C,i,c,y,B,T)},d.resetTransform=function(){m.resetTransform(),this.__originalResetTransform()},d.rotate=function(C){m.rotate(C),this.__originalRotate(C)},d.clip=function(C){m.clip(C),this.__originalClip(C)},d.moveTo=function(h,C){m.moveTo(h,C),this.__originalMoveTo(h,C)},d.lineTo=function(h,C){m.lineTo(h,C),this.__originalLineTo(h,C)},d.bezierCurveTo=function(h,C,i,c,y,B){m.bezierCurveTo(h,C,i,c,y,B),this.__originalBezierCurveTo(h,C,i,c,y,B)},d.rect=function(h,C,i,c){m.rect(h,C,i,c),this.__originalRect(h,C,i,c)},d.closePath=function(){m.closePath(),this.__originalClosePath()},d.beginPath=function(){m.beginPath(),this.__originalBeginPath()}}function f(d){if(d._transformStack&&(d._transformStack=[]),!d.mozCurrentTransform){d._originalSave=d.save,d._originalRestore=d.restore,d._originalRotate=d.rotate,d._originalScale=d.scale,d._originalTranslate=d.translate,d._originalTransform=d.transform,d._originalSetTransform=d.setTransform,d._originalResetTransform=d.resetTransform,d._transformMatrix=d._transformMatrix||[1,0,0,1,0,0],d._transformStack=[];try{let m=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(d),"lineWidth");d._setLineWidth=m.set,d._getLineWidth=m.get,Object.defineProperty(d,"lineWidth",{set:function(C){this._setLineWidth(C*g)},get:function(){return this._getLineWidth()}})}catch{}Object.defineProperty(d,"mozCurrentTransform",{get:function(){return this._transformMatrix}}),Object.defineProperty(d,"mozCurrentTransformInverse",{get:function(){let[h,C,i,c,y,B]=this._transformMatrix,T=h*c-C*i,H=C*i-h*c;return[c/T,C/H,i/H,h/T,(c*y-i*B)/H,(C*y-h*B)/T]}}),d.save=function(){let h=this._transformMatrix;this._transformStack.push(h),this._transformMatrix=h.slice(0,6),this._originalSave()},d.restore=function(){this._transformStack.length===0&&(0,t.warn)("Tried to restore a ctx when the stack was already empty.");let h=this._transformStack.pop();h&&(this._transformMatrix=h,this._originalRestore())},d.translate=function(h,C){let i=this._transformMatrix;i[4]=i[0]*h+i[2]*C+i[4],i[5]=i[1]*h+i[3]*C+i[5],this._originalTranslate(h,C)},d.scale=function(h,C){let i=this._transformMatrix;i[0]*=h,i[1]*=h,i[2]*=C,i[3]*=C,this._originalScale(h,C)},d.transform=function(h,C,i,c,y,B){let T=this._transformMatrix;this._transformMatrix=[T[0]*h+T[2]*C,T[1]*h+T[3]*C,T[0]*i+T[2]*c,T[1]*i+T[3]*c,T[0]*y+T[2]*B+T[4],T[1]*y+T[3]*B+T[5]],d._originalTransform(h,C,i,c,y,B)},d.setTransform=function(h,C,i,c,y,B){this._transformMatrix=[h,C,i,c,y,B],d._originalSetTransform(h,C,i,c,y,B)},d.resetTransform=function(){this._transformMatrix=[1,0,0,1,0,0],d._originalResetTransform()},d.rotate=function(h){let C=Math.cos(h),i=Math.sin(h),c=this._transformMatrix;this._transformMatrix=[c[0]*C+c[2]*i,c[1]*C+c[3]*i,c[0]*-i+c[2]*C,c[1]*-i+c[3]*C,c[4],c[5]],this._originalRotate(h)}}}class L{constructor(m){this.canvasFactory=m,this.cache=Object.create(null)}getCanvas(m,h,C,i){let c;return this.cache[m]!==void 0?(c=this.cache[m],this.canvasFactory.reset(c,h,C),c.context.setTransform(1,0,0,1,0,0)):(c=this.canvasFactory.create(h,C),this.cache[m]=c),i&&f(c.context),c}clear(){for(let m in this.cache){let h=this.cache[m];this.canvasFactory.destroy(h),delete this.cache[m]}}}function R(d){let h=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),C=d.width,i=d.height,c=C+1,y,B,T,H,$=new Uint8Array(c*(i+1)),q=C+7&-8,X=d.data,Y=new Uint8Array(q*i),Q=0;for(y=0,B=X.length;y<B;y++){let ie=X[y],re=128;for(;re>0;)Y[Q++]=ie&re?0:255,re>>=1}let W=0;for(Q=0,Y[Q]!==0&&($[0]=1,++W),T=1;T<C;T++)Y[Q]!==Y[Q+1]&&($[T]=Y[Q]?2:1,++W),Q++;for(Y[Q]!==0&&($[T]=2,++W),y=1;y<i;y++){Q=y*q,H=y*c,Y[Q-q]!==Y[Q]&&($[H]=Y[Q]?1:8,++W);let ie=(Y[Q]?4:0)+(Y[Q-q]?8:0);for(T=1;T<C;T++)ie=(ie>>2)+(Y[Q+1]?4:0)+(Y[Q-q+1]?8:0),h[ie]&&($[H+T]=h[ie],++W),Q++;if(Y[Q-q]!==Y[Q]&&($[H+T]=Y[Q]?2:4,++W),W>1e3)return null}for(Q=q*(i-1),H=y*c,Y[Q]!==0&&($[H]=8,++W),T=1;T<C;T++)Y[Q]!==Y[Q+1]&&($[H+T]=Y[Q]?4:8,++W),Q++;if(Y[Q]!==0&&($[H+T]=4,++W),W>1e3)return null;let Z=new Int32Array([0,c,-1,0,-c,0,0,0,1]),ne=[];for(y=0;W&&y<=i;y++){let ie=y*c,re=ie+C;for(;ie<re&&!$[ie];)ie++;if(ie===re)continue;let le=[ie%c,y],se=ie,ae=$[ie];do{let pe=Z[ae];do ie+=pe;while(!$[ie]);let ue=$[ie];ue!==5&&ue!==10?(ae=ue,$[ie]=0):(ae=ue&51*ae>>4,$[ie]&=ae>>2|ae<<2),le.push(ie%c,ie/c|0),$[ie]||--W}while(se!==ie);ne.push(le),--y}return function(ie){ie.save(),ie.scale(1/C,-1/i),ie.translate(0,-i),ie.beginPath();for(let re=0,le=ne.length;re<le;re++){let se=ne[re];ie.moveTo(se[0],se[1]);for(let ae=2,pe=se.length;ae<pe;ae+=2)ie.lineTo(se[ae],se[ae+1])}ie.fill(),ie.beginPath(),ie.restore()}}class F{constructor(m,h){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=t.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=t.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=t.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,m,h])}clone(){let m=Object.create(this);return m.clipBox=this.clipBox.slice(),m}setCurrentPoint(m,h){this.x=m,this.y=h}updatePathMinMax(m,h,C){[h,C]=t.Util.applyTransform([h,C],m),this.minX=Math.min(this.minX,h),this.minY=Math.min(this.minY,C),this.maxX=Math.max(this.maxX,h),this.maxY=Math.max(this.maxY,C)}updateCurvePathMinMax(m,h,C,i,c,y,B,T,H){let $=t.Util.bezierBoundingBox(h,C,i,c,y,B,T,H);this.updatePathMinMax(m,$[0],$[1]),this.updatePathMinMax(m,$[2],$[3])}getPathBoundingBox(m=u.PathType.FILL,h=null){let C=[this.minX,this.minY,this.maxX,this.maxY];if(m===u.PathType.STROKE){h||(0,t.unreachable)("Stroke bounding box must include transform.");let i=t.Util.singularValueDecompose2dScale(h),c=i[0]*this.lineWidth/2,y=i[1]*this.lineWidth/2;C[0]-=c,C[1]-=y,C[2]+=c,C[3]+=y}return C}updateClipFromPath(){let m=t.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(m||[0,0,0,0])}startNewPathAndClipBox(m){this.clipBox=m,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(m=u.PathType.FILL,h=null){return t.Util.intersect(this.clipBox,this.getPathBoundingBox(m,h))}}function D(d,m,h=null){if(typeof ImageData<"u"&&m instanceof ImageData){d.putImageData(m,0,0);return}let C=m.height,i=m.width,c=C%w,y=(C-c)/w,B=c===0?y:y+1,T=d.createImageData(i,w),H=0,$,q=m.data,X=T.data,Y,Q,W,Z,ne,te,ie,re;if(h)switch(h.length){case 1:ne=h[0],te=h[0],ie=h[0],re=h[0];break;case 4:ne=h[0],te=h[1],ie=h[2],re=h[3];break}if(m.kind===t.ImageKind.GRAYSCALE_1BPP){let le=q.byteLength,se=new Uint32Array(X.buffer,0,X.byteLength>>2),ae=se.length,pe=i+7>>3,ue=4294967295,_e=t.IsLittleEndianCached.value?4278190080:255;for(re&&re[0]===255&&re[255]===0&&([ue,_e]=[_e,ue]),Y=0;Y<B;Y++){for(W=Y<y?w:c,$=0,Q=0;Q<W;Q++){let ke=le-H,we=0,Ce=ke>pe?i:ke*8-7,be=Ce&-8,Le=0,ge=0;for(;we<be;we+=8)ge=q[H++],se[$++]=ge&128?ue:_e,se[$++]=ge&64?ue:_e,se[$++]=ge&32?ue:_e,se[$++]=ge&16?ue:_e,se[$++]=ge&8?ue:_e,se[$++]=ge&4?ue:_e,se[$++]=ge&2?ue:_e,se[$++]=ge&1?ue:_e;for(;we<Ce;we++)Le===0&&(ge=q[H++],Le=128),se[$++]=ge&Le?ue:_e,Le>>=1}for(;$<ae;)se[$++]=0;d.putImageData(T,0,Y*w)}}else if(m.kind===t.ImageKind.RGBA_32BPP){let le=!!(ne||te||ie);for(Q=0,Z=i*w*4,Y=0;Y<y;Y++){if(X.set(q.subarray(H,H+Z)),H+=Z,le)for(let se=0;se<Z;se+=4)ne&&(X[se+0]=ne[X[se+0]]),te&&(X[se+1]=te[X[se+1]]),ie&&(X[se+2]=ie[X[se+2]]);d.putImageData(T,0,Q),Q+=w}if(Y<B){if(Z=i*c*4,X.set(q.subarray(H,H+Z)),le)for(let se=0;se<Z;se+=4)ne&&(X[se+0]=ne[X[se+0]]),te&&(X[se+1]=te[X[se+1]]),ie&&(X[se+2]=ie[X[se+2]]);d.putImageData(T,0,Q)}}else if(m.kind===t.ImageKind.RGB_24BPP){let le=!!(ne||te||ie);for(W=w,Z=i*W,Y=0;Y<B;Y++){for(Y>=y&&(W=c,Z=i*W),$=0,Q=Z;Q--;)X[$++]=q[H++],X[$++]=q[H++],X[$++]=q[H++],X[$++]=255;if(le)for(let se=0;se<$;se+=4)ne&&(X[se+0]=ne[X[se+0]]),te&&(X[se+1]=te[X[se+1]]),ie&&(X[se+2]=ie[X[se+2]]);d.putImageData(T,0,Y*w)}}else throw new Error(`bad image kind: ${m.kind}`)}function o(d,m){let h=m.height,C=m.width,i=h%w,c=(h-i)/w,y=i===0?c:c+1,B=d.createImageData(C,w),T=0,H=m.data,$=B.data;for(let q=0;q<y;q++){let X=q<c?w:i,Y=3;for(let Q=0;Q<X;Q++){let W,Z=0;for(let ne=0;ne<C;ne++)Z||(W=H[T++],Z=128),$[Y]=W&Z?0:255,Y+=4,Z>>=1}d.putImageData(B,0,q*w)}}function l(d,m){let h=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(let C=0,i=h.length;C<i;C++){let c=h[C];d[c]!==void 0&&(m[c]=d[c])}d.setLineDash!==void 0&&(m.setLineDash(d.getLineDash()),m.lineDashOffset=d.lineDashOffset)}function N(d){d.strokeStyle="#000000",d.fillStyle="#000000",d.fillRule="nonzero",d.globalAlpha=1,d.lineWidth=1,d.lineCap="butt",d.lineJoin="miter",d.miterLimit=10,d.globalCompositeOperation="source-over",d.font="10px sans-serif",d.setLineDash!==void 0&&(d.setLineDash([]),d.lineDashOffset=0)}function r(d,m,h,C){let i=d.length;for(let c=3;c<i;c+=4){let y=d[c];if(y===0)d[c-3]=m,d[c-2]=h,d[c-1]=C;else if(y<255){let B=255-y;d[c-3]=d[c-3]*y+m*B>>8,d[c-2]=d[c-2]*y+h*B>>8,d[c-1]=d[c-1]*y+C*B>>8}}}function a(d,m,h){let C=d.length,i=1/255;for(let c=3;c<C;c+=4){let y=h?h[d[c]]:d[c];m[c]=m[c]*y*i|0}}function v(d,m,h){let C=d.length;for(let i=3;i<C;i+=4){let c=d[i-3]*77+d[i-2]*152+d[i-1]*28;m[i]=h?m[i]*h[c>>8]>>8:m[i]*c>>16}}function S(d,m,h,C,i,c,y,B,T,H,$){let q=!!c,X=q?c[0]:0,Y=q?c[1]:0,Q=q?c[2]:0,W;i==="Luminosity"?W=v:W=a;let ne=Math.min(C,Math.ceil(1048576/h));for(let te=0;te<C;te+=ne){let ie=Math.min(ne,C-te),re=d.getImageData(B-H,te+(T-$),h,ie),le=m.getImageData(B,te+T,h,ie);q&&r(re.data,X,Y,Q),W(re.data,le.data,y),m.putImageData(le,B,te+T)}}function O(d,m,h,C){let i=C[0],c=C[1],y=C[2]-i,B=C[3]-c;y===0||B===0||(S(m.context,h,y,B,m.subtype,m.backdrop,m.transferMap,i,c,m.offsetX,m.offsetY),d.save(),d.globalAlpha=1,d.globalCompositeOperation="source-over",d.setTransform(1,0,0,1,0,0),d.drawImage(h.canvas,0,0),d.restore())}function x(d,m){let h=t.Util.singularValueDecompose2dScale(d);h[0]=Math.fround(h[0]),h[1]=Math.fround(h[1]);let C=Math.fround((globalThis.devicePixelRatio||1)*s.PixelsPerInch.PDF_TO_CSS_UNITS);return m!==void 0?m:h[0]<=C||h[1]<=C}let I=["butt","round","square"],U=["miter","round","bevel"],V={},z={};class G{constructor(m,h,C,i,c,y,B){this.ctx=m,this.current=new F(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=h,this.objs=C,this.canvasFactory=i,this.imageLayer=c,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=y,this.cachedCanvases=new L(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=B,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,m&&f(m),this._cachedGetSinglePixelWidth=null}beginDrawing({transform:m,viewport:h,transparency:C=!1,background:i=null}){let c=this.ctx.canvas.width,y=this.ctx.canvas.height;if(this.ctx.save(),this.ctx.fillStyle=i||"rgb(255, 255, 255)",this.ctx.fillRect(0,0,c,y),this.ctx.restore(),C){let B=this.cachedCanvases.getCanvas("transparent",c,y,!0);this.compositeCtx=this.ctx,this.transparentCanvas=B.canvas,this.ctx=B.context,this.ctx.save(),this.ctx.transform.apply(this.ctx,this.compositeCtx.mozCurrentTransform)}this.ctx.save(),N(this.ctx),m&&(this.ctx.transform.apply(this.ctx,m),this.outputScaleX=m[0],this.outputScaleY=m[0]),this.ctx.transform.apply(this.ctx,h.transform),this.viewportScale=h.scale,this.baseTransform=this.ctx.mozCurrentTransform.slice(),this._combinedScaleFactor=Math.hypot(this.baseTransform[0],this.baseTransform[2]),this.imageLayer&&this.imageLayer.beginLayout()}executeOperatorList(m,h,C,i){let c=m.argsArray,y=m.fnArray,B=h||0,T=c.length;if(T===B)return B;let H=T-B>M&&typeof C=="function",$=H?Date.now()+E:0,q=0,X=this.commonObjs,Y=this.objs,Q;for(;;){if(i!==void 0&&B===i.nextBreakPoint)return i.breakIt(B,C),B;if(Q=y[B],Q!==t.OPS.dependency)this[Q].apply(this,c[B]);else for(let W of c[B]){let Z=W.startsWith("g_")?X:Y;if(!Z.has(W))return Z.get(W,C),B}if(B++,B===T)return B;if(H&&++q>M){if(Date.now()>$)return C(),B;q=0}}}endDrawing(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null),this.cachedCanvases.clear(),this.cachedPatterns.clear(),this.imageLayer&&this.imageLayer.endLayout()}_scaleImage(m,h){let C=m.width,i=m.height,c=Math.max(Math.hypot(h[0],h[1]),1),y=Math.max(Math.hypot(h[2],h[3]),1),B=C,T=i,H="prescale1",$,q;for(;c>2&&B>1||y>2&&T>1;){let X=B,Y=T;c>2&&B>1&&(X=Math.ceil(B/2),c/=B/X),y>2&&T>1&&(Y=Math.ceil(T/2),y/=T/Y),$=this.cachedCanvases.getCanvas(H,X,Y),q=$.context,q.clearRect(0,0,X,Y),q.drawImage(m,0,0,B,T,0,0,X,Y),m=$.canvas,B=X,T=Y,H=H==="prescale1"?"prescale2":"prescale1"}return{img:m,paintWidth:B,paintHeight:T}}_createMaskCanvas(m){let h=this.ctx,C=m.width,i=m.height,c=this.current.fillColor,y=this.current.patternFill,B=this.cachedCanvases.getCanvas("maskCanvas",C,i),T=B.context;o(T,m);let H=h.mozCurrentTransform,$=t.Util.transform(H,[1/C,0,0,-1/i,0,0]);$=t.Util.transform($,[1,0,0,1,0,-i]);let q=t.Util.applyTransform([0,0],$),X=t.Util.applyTransform([C,i],$),Y=t.Util.normalizeRect([q[0],q[1],X[0],X[1]]),Q=Math.ceil(Y[2]-Y[0]),W=Math.ceil(Y[3]-Y[1]),Z=this.cachedCanvases.getCanvas("fillCanvas",Q,W,!0),ne=Z.context,te=Math.min(q[0],X[0]),ie=Math.min(q[1],X[1]);ne.translate(-te,-ie),ne.transform.apply(ne,$);let re=this._scaleImage(B.canvas,ne.mozCurrentTransformInverse);ne.imageSmoothingEnabled=x(ne.mozCurrentTransform,m.interpolate),ne.drawImage(re.img,0,0,re.img.width,re.img.height,0,0,C,i),ne.globalCompositeOperation="source-in";let le=t.Util.transform(ne.mozCurrentTransformInverse,[1,0,0,1,-te,-ie]);return ne.fillStyle=y?c.getPattern(h,this,le,u.PathType.FILL):c,ne.fillRect(0,0,C,i),{canvas:Z.canvas,offsetX:Math.round(te),offsetY:Math.round(ie)}}setLineWidth(m){this.current.lineWidth=m,this.ctx.lineWidth=m}setLineCap(m){this.ctx.lineCap=I[m]}setLineJoin(m){this.ctx.lineJoin=U[m]}setMiterLimit(m){this.ctx.miterLimit=m}setDash(m,h){let C=this.ctx;C.setLineDash!==void 0&&(C.setLineDash(m),C.lineDashOffset=h)}setRenderingIntent(m){}setFlatness(m){}setGState(m){for(let h=0,C=m.length;h<C;h++){let i=m[h],c=i[0],y=i[1];switch(c){case"LW":this.setLineWidth(y);break;case"LC":this.setLineCap(y);break;case"LJ":this.setLineJoin(y);break;case"ML":this.setMiterLimit(y);break;case"D":this.setDash(y[0],y[1]);break;case"RI":this.setRenderingIntent(y);break;case"FL":this.setFlatness(y);break;case"Font":this.setFont(y[0],y[1]);break;case"CA":this.current.strokeAlpha=i[1];break;case"ca":this.current.fillAlpha=i[1],this.ctx.globalAlpha=i[1];break;case"BM":this.ctx.globalCompositeOperation=y;break;case"SMask":this.current.activeSMask=y?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=y}}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){let m=this.inSMaskMode;this.current.activeSMask&&!m?this.beginSMaskMode():!this.current.activeSMask&&m&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");let m=this.ctx.canvas.width,h=this.ctx.canvas.height,C="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(C,m,h,!0);this.suspendedCtx=this.ctx,this.ctx=i.context;let c=this.ctx;c.setTransform.apply(c,this.suspendedCtx.mozCurrentTransform),l(this.suspendedCtx,c),P(c,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),l(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(m){if(!this.current.activeSMask)return;m?(m[0]=Math.floor(m[0]),m[1]=Math.floor(m[1]),m[2]=Math.ceil(m[2]),m[3]=Math.ceil(m[3])):m=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];let h=this.current.activeSMask,C=this.suspendedCtx;O(C,h,this.ctx,m),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(l(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();let m=this.current;this.stateStack.push(m),this.current=m.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),l(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedGetSinglePixelWidth=null)}transform(m,h,C,i,c,y){this.ctx.transform(m,h,C,i,c,y),this._cachedGetSinglePixelWidth=null}constructPath(m,h){let C=this.ctx,i=this.current,c=i.x,y=i.y,B,T;for(let H=0,$=0,q=m.length;H<q;H++)switch(m[H]|0){case t.OPS.rectangle:c=h[$++],y=h[$++];let X=h[$++],Y=h[$++],Q=c+X,W=y+Y;C.moveTo(c,y),X===0||Y===0?C.lineTo(Q,W):(C.lineTo(Q,y),C.lineTo(Q,W),C.lineTo(c,W)),i.updatePathMinMax(C.mozCurrentTransform,c,y),i.updatePathMinMax(C.mozCurrentTransform,Q,W),C.closePath();break;case t.OPS.moveTo:c=h[$++],y=h[$++],C.moveTo(c,y),i.updatePathMinMax(C.mozCurrentTransform,c,y);break;case t.OPS.lineTo:c=h[$++],y=h[$++],C.lineTo(c,y),i.updatePathMinMax(C.mozCurrentTransform,c,y);break;case t.OPS.curveTo:B=c,T=y,c=h[$+4],y=h[$+5],C.bezierCurveTo(h[$],h[$+1],h[$+2],h[$+3],c,y),i.updateCurvePathMinMax(C.mozCurrentTransform,B,T,h[$],h[$+1],h[$+2],h[$+3],c,y),$+=6;break;case t.OPS.curveTo2:B=c,T=y,C.bezierCurveTo(c,y,h[$],h[$+1],h[$+2],h[$+3]),i.updateCurvePathMinMax(C.mozCurrentTransform,B,T,c,y,h[$],h[$+1],h[$+2],h[$+3]),c=h[$+2],y=h[$+3],$+=4;break;case t.OPS.curveTo3:B=c,T=y,c=h[$+2],y=h[$+3],C.bezierCurveTo(h[$],h[$+1],c,y,c,y),i.updateCurvePathMinMax(C.mozCurrentTransform,B,T,h[$],h[$+1],c,y,c,y),$+=4;break;case t.OPS.closePath:C.closePath();break}i.setCurrentPoint(c,y)}closePath(){this.ctx.closePath()}stroke(m){m=typeof m<"u"?m:!0;let h=this.ctx,C=this.current.strokeColor;if(h.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof C=="object"&&C?.getPattern){let i=this.getSinglePixelWidth();h.save(),h.strokeStyle=C.getPattern(h,this,h.mozCurrentTransformInverse,u.PathType.STROKE),h.lineWidth=Math.max(i,this.current.lineWidth),h.stroke(),h.restore()}else{let i=this.getSinglePixelWidth();i<0&&-i>=this.current.lineWidth?(h.save(),h.resetTransform(),h.lineWidth=Math.floor(this._combinedScaleFactor),h.stroke(),h.restore()):(h.lineWidth=Math.max(i,this.current.lineWidth),h.stroke())}m&&this.consumePath(this.current.getClippedPathBoundingBox()),h.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(m){m=typeof m<"u"?m:!0;let h=this.ctx,C=this.current.fillColor,i=this.current.patternFill,c=!1;i&&(h.save(),h.fillStyle=C.getPattern(h,this,h.mozCurrentTransformInverse,u.PathType.FILL),c=!0);let y=this.current.getClippedPathBoundingBox();this.contentVisible&&y!==null&&(this.pendingEOFill?(h.fill("evenodd"),this.pendingEOFill=!1):h.fill()),c&&h.restore(),m&&this.consumePath(y)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=V}eoClip(){this.pendingClip=z}beginText(){this.current.textMatrix=t.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){let m=this.pendingTextPaths,h=this.ctx;if(m===void 0){h.beginPath();return}h.save(),h.beginPath();for(let C=0;C<m.length;C++){let i=m[C];h.setTransform.apply(h,i.transform),h.translate(i.x,i.y),i.addToPath(h,i.fontSize)}h.restore(),h.clip(),h.beginPath(),delete this.pendingTextPaths}setCharSpacing(m){this.current.charSpacing=m}setWordSpacing(m){this.current.wordSpacing=m}setHScale(m){this.current.textHScale=m/100}setLeading(m){this.current.leading=-m}setFont(m,h){let C=this.commonObjs.get(m),i=this.current;if(!C)throw new Error(`Can't find font for ${m}`);if(i.fontMatrix=C.fontMatrix||t.FONT_IDENTITY_MATRIX,(i.fontMatrix[0]===0||i.fontMatrix[3]===0)&&(0,t.warn)("Invalid font matrix for font "+m),h<0?(h=-h,i.fontDirection=-1):i.fontDirection=1,this.current.font=C,this.current.fontSize=h,C.isType3Font)return;let c=C.loadedName||"sans-serif",y="normal";C.black?y="900":C.bold&&(y="bold");let B=C.italic?"italic":"normal",T=`"${c}", ${C.fallbackName}`,H=h;h<k?H=k:h>_&&(H=_),this.current.fontSizeScale=h/H,this.ctx.font=`${B} ${y} ${H}px ${T}`}setTextRenderingMode(m){this.current.textRenderingMode=m}setTextRise(m){this.current.textRise=m}moveText(m,h){this.current.x=this.current.lineX+=m,this.current.y=this.current.lineY+=h}setLeadingMoveText(m,h){this.setLeading(-h),this.moveText(m,h)}setTextMatrix(m,h,C,i,c,y){this.current.textMatrix=[m,h,C,i,c,y],this.current.textMatrixScale=Math.hypot(m,h),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(m,h,C,i,c){let y=this.ctx,B=this.current,T=B.font,H=B.textRenderingMode,$=B.fontSize/B.fontSizeScale,q=H&t.TextRenderingMode.FILL_STROKE_MASK,X=!!(H&t.TextRenderingMode.ADD_TO_PATH_FLAG),Y=B.patternFill&&!T.missingFile,Q;(T.disableFontFace||X||Y)&&(Q=T.getPathGenerator(this.commonObjs,m)),T.disableFontFace||Y?(y.save(),y.translate(h,C),y.beginPath(),Q(y,$),i&&y.setTransform.apply(y,i),(q===t.TextRenderingMode.FILL||q===t.TextRenderingMode.FILL_STROKE)&&y.fill(),(q===t.TextRenderingMode.STROKE||q===t.TextRenderingMode.FILL_STROKE)&&(c&&(y.resetTransform(),y.lineWidth=Math.floor(this._combinedScaleFactor)),y.stroke()),y.restore()):((q===t.TextRenderingMode.FILL||q===t.TextRenderingMode.FILL_STROKE)&&y.fillText(m,h,C),(q===t.TextRenderingMode.STROKE||q===t.TextRenderingMode.FILL_STROKE)&&(c?(y.save(),y.moveTo(h,C),y.resetTransform(),y.lineWidth=Math.floor(this._combinedScaleFactor),y.strokeText(m,0,0),y.restore()):y.strokeText(m,h,C))),X&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:y.mozCurrentTransform,x:h,y:C,fontSize:$,addToPath:Q})}get isFontSubpixelAAEnabled(){let{context:m}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);m.scale(1.5,1),m.fillText("I",0,10);let h=m.getImageData(0,0,10,10).data,C=!1;for(let i=3;i<h.length;i+=4)if(h[i]>0&&h[i]<255){C=!0;break}return(0,t.shadow)(this,"isFontSubpixelAAEnabled",C)}showText(m){let h=this.current,C=h.font;if(C.isType3Font)return this.showType3Text(m);let i=h.fontSize;if(i===0)return;let c=this.ctx,y=h.fontSizeScale,B=h.charSpacing,T=h.wordSpacing,H=h.fontDirection,$=h.textHScale*H,q=m.length,X=C.vertical,Y=X?1:-1,Q=C.defaultVMetrics,W=i*h.fontMatrix[0],Z=h.textRenderingMode===t.TextRenderingMode.FILL&&!C.disableFontFace&&!h.patternFill;c.save(),c.transform.apply(c,h.textMatrix),c.translate(h.x,h.y+h.textRise),H>0?c.scale($,-1):c.scale($,1);let ne;if(h.patternFill){c.save();let ae=h.fillColor.getPattern(c,this,c.mozCurrentTransformInverse,u.PathType.FILL);ne=c.mozCurrentTransform,c.restore(),c.fillStyle=ae}let te=h.lineWidth,ie=!1,re=h.textMatrixScale;if(re===0||te===0){let ae=h.textRenderingMode&t.TextRenderingMode.FILL_STROKE_MASK;(ae===t.TextRenderingMode.STROKE||ae===t.TextRenderingMode.FILL_STROKE)&&(this._cachedGetSinglePixelWidth=null,te=this.getSinglePixelWidth(),ie=te<0)}else te/=re;y!==1&&(c.scale(y,y),te/=y),c.lineWidth=te;let le=0,se;for(se=0;se<q;++se){let ae=m[se];if(typeof ae=="number"){le+=Y*ae*i/1e3;continue}let pe=!1,ue=(ae.isSpace?T:0)+B,_e=ae.fontChar,ke=ae.accent,we,Ce,be=ae.width;if(X){let ge=ae.vmetric||Q,ye=-(ae.vmetric?ge[1]:be*.5)*W,ve=ge[2]*W;be=ge?-ge[0]:be,we=ye/y,Ce=(le+ve)/y}else we=le/y,Ce=0;if(C.remeasure&&be>0){let ge=c.measureText(_e).width*1e3/i*y;if(be<ge&&this.isFontSubpixelAAEnabled){let ye=be/ge;pe=!0,c.save(),c.scale(ye,1),we/=ye}else be!==ge&&(we+=(be-ge)/2e3*i/y)}if(this.contentVisible&&(ae.isInFont||C.missingFile)){if(Z&&!ke)c.fillText(_e,we,Ce);else if(this.paintChar(_e,we,Ce,ne,ie),ke){let ge=we+i*ke.offset.x/y,ye=Ce-i*ke.offset.y/y;this.paintChar(ke.fontChar,ge,ye,ne,ie)}}let Le;X?Le=be*W-ue*H:Le=be*W+ue*H,le+=Le,pe&&c.restore()}X?h.y-=le:h.x+=le*$,c.restore(),this.compose()}showType3Text(m){let h=this.ctx,C=this.current,i=C.font,c=C.fontSize,y=C.fontDirection,B=i.vertical?1:-1,T=C.charSpacing,H=C.wordSpacing,$=C.textHScale*y,q=C.fontMatrix||t.FONT_IDENTITY_MATRIX,X=m.length,Y=C.textRenderingMode===t.TextRenderingMode.INVISIBLE,Q,W,Z,ne;if(!(Y||c===0)){for(this._cachedGetSinglePixelWidth=null,h.save(),h.transform.apply(h,C.textMatrix),h.translate(C.x,C.y),h.scale($,y),Q=0;Q<X;++Q){if(W=m[Q],typeof W=="number"){ne=B*W*c/1e3,this.ctx.translate(ne,0),C.x+=ne*$;continue}let te=(W.isSpace?H:0)+T,ie=i.charProcOperatorList[W.operatorListId];if(!ie){(0,t.warn)(`Type3 character "${W.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=W,this.save(),h.scale(c,c),h.transform.apply(h,q),this.executeOperatorList(ie),this.restore()),Z=t.Util.applyTransform([W.width,0],q)[0]*c+te,h.translate(Z,0),C.x+=Z*$}h.restore(),this.processingType3=null}}setCharWidth(m,h){}setCharWidthAndBounds(m,h,C,i,c,y){this.ctx.rect(C,i,c-C,y-i),this.clip(),this.endPath()}getColorN_Pattern(m){let h;if(m[0]==="TilingPattern"){let C=m[1],i=this.baseTransform||this.ctx.mozCurrentTransform.slice(),c={createCanvasGraphics:y=>new G(y,this.commonObjs,this.objs,this.canvasFactory)};h=new u.TilingPattern(m,C,this.ctx,c,i)}else h=this._getPattern(m[1],m[2]);return h}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(m,h,C){let i=t.Util.makeHexColor(m,h,C);this.ctx.strokeStyle=i,this.current.strokeColor=i}setFillRGBColor(m,h,C){let i=t.Util.makeHexColor(m,h,C);this.ctx.fillStyle=i,this.current.fillColor=i,this.current.patternFill=!1}_getPattern(m,h=null){let C;return this.cachedPatterns.has(m)?C=this.cachedPatterns.get(m):(C=(0,u.getShadingPattern)(this.objs.get(m)),this.cachedPatterns.set(m,C)),h&&(C.matrix=h),C}shadingFill(m){if(!this.contentVisible)return;let h=this.ctx;this.save();let C=this._getPattern(m);h.fillStyle=C.getPattern(h,this,h.mozCurrentTransformInverse,u.PathType.SHADING);let i=h.mozCurrentTransformInverse;if(i){let c=h.canvas,y=c.width,B=c.height,T=t.Util.applyTransform([0,0],i),H=t.Util.applyTransform([0,B],i),$=t.Util.applyTransform([y,0],i),q=t.Util.applyTransform([y,B],i),X=Math.min(T[0],H[0],$[0],q[0]),Y=Math.min(T[1],H[1],$[1],q[1]),Q=Math.max(T[0],H[0],$[0],q[0]),W=Math.max(T[1],H[1],$[1],q[1]);this.ctx.fillRect(X,Y,Q-X,W-Y)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,t.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,t.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(m,h){if(!!this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(m)&&m.length===6&&this.transform.apply(this,m),this.baseTransform=this.ctx.mozCurrentTransform,h)){let C=h[2]-h[0],i=h[3]-h[1];this.ctx.rect(h[0],h[1],C,i),this.current.updatePathMinMax(this.ctx.mozCurrentTransform,h[0],h[1]),this.current.updatePathMinMax(this.ctx.mozCurrentTransform,h[2],h[3]),this.clip(),this.endPath()}}paintFormXObjectEnd(){!this.contentVisible||(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(m){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);let h=this.ctx;m.isolated||(0,t.info)("TODO: Support non-isolated groups."),m.knockout&&(0,t.warn)("Knockout groups not supported.");let C=h.mozCurrentTransform;if(m.matrix&&h.transform.apply(h,m.matrix),!m.bbox)throw new Error("Bounding box is required.");let i=t.Util.getAxialAlignedBoundingBox(m.bbox,h.mozCurrentTransform),c=[0,0,h.canvas.width,h.canvas.height];i=t.Util.intersect(i,c)||[0,0,0,0];let y=Math.floor(i[0]),B=Math.floor(i[1]),T=Math.max(Math.ceil(i[2])-y,1),H=Math.max(Math.ceil(i[3])-B,1),$=1,q=1;T>p&&($=T/p,T=p),H>p&&(q=H/p,H=p),this.current.startNewPathAndClipBox([0,0,T,H]);let X="groupAt"+this.groupLevel;m.smask&&(X+="_smask_"+this.smaskCounter++%2);let Y=this.cachedCanvases.getCanvas(X,T,H,!0),Q=Y.context;Q.scale(1/$,1/q),Q.translate(-y,-B),Q.transform.apply(Q,C),m.smask?this.smaskStack.push({canvas:Y.canvas,context:Q,offsetX:y,offsetY:B,scaleX:$,scaleY:q,subtype:m.smask.subtype,backdrop:m.smask.backdrop,transferMap:m.smask.transferMap||null,startTransformInverse:null}):(h.setTransform(1,0,0,1,0,0),h.translate(y,B),h.scale($,q),h.save()),l(h,Q),this.ctx=Q,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(h),this.groupLevel++}endGroup(m){if(!this.contentVisible)return;this.groupLevel--;let h=this.ctx,C=this.groupStack.pop();if(this.ctx=C,this.ctx.imageSmoothingEnabled=!1,m.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();let i=this.ctx.mozCurrentTransform;this.restore(),this.ctx.save(),this.ctx.setTransform.apply(this.ctx,i);let c=t.Util.getAxialAlignedBoundingBox([0,0,h.canvas.width,h.canvas.height],i);this.ctx.drawImage(h.canvas,0,0),this.ctx.restore(),this.compose(c)}}beginAnnotations(){this.save(),this.baseTransform&&this.ctx.setTransform.apply(this.ctx,this.baseTransform)}endAnnotations(){this.restore()}beginAnnotation(m,h,C,i,c){if(this.save(),Array.isArray(h)&&h.length===4){let y=h[2]-h[0],B=h[3]-h[1];if(c&&this.annotationCanvasMap){C=C.slice(),C[4]-=h[0],C[5]-=h[1],h=h.slice(),h[0]=h[1]=0,h[2]=y,h[3]=B;let[T,H]=t.Util.singularValueDecompose2dScale(this.ctx.mozCurrentTransform),{viewportScale:$}=this,q=Math.ceil(y*this.outputScaleX*$),X=Math.ceil(B*this.outputScaleY*$);this.annotationCanvas=this.canvasFactory.create(q,X);let{canvas:Y,context:Q}=this.annotationCanvas;Y.style.width=`calc(${y}px * var(--viewport-scale-factor))`,Y.style.height=`calc(${B}px * var(--viewport-scale-factor))`,this.annotationCanvasMap.set(m,Y),this.annotationCanvas.savedCtx=this.ctx,this.ctx=Q,this.ctx.setTransform(T,0,0,-H,0,B*H),f(this.ctx),N(this.ctx)}else N(this.ctx),this.ctx.rect(h[0],h[1],y,B),this.clip(),this.endPath()}this.current=new F(this.ctx.canvas.width,this.ctx.canvas.height),this.transform.apply(this,C),this.transform.apply(this,i)}endAnnotation(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas),this.restore()}paintImageMaskXObject(m){if(!this.contentVisible)return;let h=this.ctx,C=m.width,i=m.height,c=this.processingType3;if(b&&c&&c.compiled===void 0&&(C<=A&&i<=A?c.compiled=R({data:m.data,width:C,height:i}):c.compiled=null),c?.compiled){c.compiled(h);return}let y=this._createMaskCanvas(m),B=y.canvas;h.save(),h.setTransform(1,0,0,1,0,0),h.drawImage(B,y.offsetX,y.offsetY),h.restore(),this.compose()}paintImageMaskXObjectRepeat(m,h,C=0,i=0,c,y){if(!this.contentVisible)return;let B=this.ctx;B.save();let T=B.mozCurrentTransform;B.transform(h,C,i,c,0,0);let H=this._createMaskCanvas(m);B.setTransform(1,0,0,1,0,0);for(let $=0,q=y.length;$<q;$+=2){let X=t.Util.transform(T,[h,C,i,c,y[$],y[$+1]]),[Y,Q]=t.Util.applyTransform([0,0],X);B.drawImage(H.canvas,Y,Q)}B.restore(),this.compose()}paintImageMaskXObjectGroup(m){if(!this.contentVisible)return;let h=this.ctx,C=this.current.fillColor,i=this.current.patternFill;for(let c=0,y=m.length;c<y;c++){let B=m[c],T=B.width,H=B.height,$=this.cachedCanvases.getCanvas("maskCanvas",T,H),q=$.context;q.save(),o(q,B),q.globalCompositeOperation="source-in",q.fillStyle=i?C.getPattern(q,this,h.mozCurrentTransformInverse,u.PathType.FILL):C,q.fillRect(0,0,T,H),q.restore(),h.save(),h.transform.apply(h,B.transform),h.scale(1,-1),h.drawImage($.canvas,0,0,T,H,0,-1,1,1),h.restore()}this.compose()}paintImageXObject(m){if(!this.contentVisible)return;let h=m.startsWith("g_")?this.commonObjs.get(m):this.objs.get(m);if(!h){(0,t.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(h)}paintImageXObjectRepeat(m,h,C,i){if(!this.contentVisible)return;let c=m.startsWith("g_")?this.commonObjs.get(m):this.objs.get(m);if(!c){(0,t.warn)("Dependent image isn't ready yet");return}let y=c.width,B=c.height,T=[];for(let H=0,$=i.length;H<$;H+=2)T.push({transform:[h,0,0,C,i[H],i[H+1]],x:0,y:0,w:y,h:B});this.paintInlineImageXObjectGroup(c,T)}paintInlineImageXObject(m){if(!this.contentVisible)return;let h=m.width,C=m.height,i=this.ctx;this.save(),i.scale(1/h,-1/C);let c;if(typeof HTMLElement=="function"&&m instanceof HTMLElement||!m.data)c=m;else{let B=this.cachedCanvases.getCanvas("inlineImage",h,C),T=B.context;D(T,m,this.current.transferMaps),c=B.canvas}let y=this._scaleImage(c,i.mozCurrentTransformInverse);if(i.imageSmoothingEnabled=x(i.mozCurrentTransform,m.interpolate),i.drawImage(y.img,0,0,y.paintWidth,y.paintHeight,0,-C,h,C),this.imageLayer){let B=this.getCanvasPosition(0,-C);this.imageLayer.appendImage({imgData:m,left:B[0],top:B[1],width:h/i.mozCurrentTransformInverse[0],height:C/i.mozCurrentTransformInverse[3]})}this.compose(),this.restore()}paintInlineImageXObjectGroup(m,h){if(!this.contentVisible)return;let C=this.ctx,i=m.width,c=m.height,y=this.cachedCanvases.getCanvas("inlineImage",i,c),B=y.context;D(B,m,this.current.transferMaps);for(let T=0,H=h.length;T<H;T++){let $=h[T];if(C.save(),C.transform.apply(C,$.transform),C.scale(1,-1),C.drawImage(y.canvas,$.x,$.y,$.w,$.h,0,-1,1,1),this.imageLayer){let q=this.getCanvasPosition($.x,$.y);this.imageLayer.appendImage({imgData:m,left:q[0],top:q[1],width:i,height:c})}C.restore()}this.compose()}paintSolidColorImageMask(){!this.contentVisible||(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(m){}markPointProps(m,h){}beginMarkedContent(m){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(m,h){m==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(h)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(m){this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(m);let h=this.ctx;this.pendingClip&&(this.pendingClip===z?h.clip("evenodd"):h.clip(),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),h.beginPath()}getSinglePixelWidth(){if(this._cachedGetSinglePixelWidth===null){let m=this.ctx.mozCurrentTransform,h=Math.abs(m[0]*m[3]-m[2]*m[1]),C=m[0]**2+m[2]**2,i=m[1]**2+m[3]**2,c=Math.sqrt(Math.max(C,i))/h;C!==i&&this._combinedScaleFactor*c>1?this._cachedGetSinglePixelWidth=-(this._combinedScaleFactor*c):h>Number.EPSILON?this._cachedGetSinglePixelWidth=c:this._cachedGetSinglePixelWidth=1}return this._cachedGetSinglePixelWidth}getCanvasPosition(m,h){let C=this.ctx.mozCurrentTransform;return[C[0]*m+C[2]*h+C[4],C[1]*m+C[3]*h+C[5]]}isContentVisible(){for(let m=this.markedContentStack.length-1;m>=0;m--)if(!this.markedContentStack[m].visible)return!1;return!0}}e.CanvasGraphics=G;for(let d in t.OPS)G.prototype[d]!==void 0&&(G.prototype[t.OPS[d]]=G.prototype[d])},(j,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TilingPattern=e.PathType=void 0,e.getShadingPattern=A;var t=n(1);let u={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};e.PathType=u;function s(P,f){if(!f||typeof Path2D>"u")return;let L=f[2]-f[0],R=f[3]-f[1],F=new Path2D;F.rect(f[0],f[1],L,R),P.clip(F)}class k{constructor(){this.constructor===k&&(0,t.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,t.unreachable)("Abstract method `getPattern` called.")}}class _ extends k{constructor(f){super(),this._type=f[1],this._bbox=f[2],this._colorStops=f[3],this._p0=f[4],this._p1=f[5],this._r0=f[6],this._r1=f[7],this.matrix=null}_createGradient(f){let L;this._type==="axial"?L=f.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(L=f.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(let R of this._colorStops)L.addColorStop(R[0],R[1]);return L}getPattern(f,L,R,F){let D;if(F===u.STROKE||F===u.FILL){let o=L.current.getClippedPathBoundingBox(F,f.mozCurrentTransform)||[0,0,0,0],l=Math.ceil(o[2]-o[0])||1,N=Math.ceil(o[3]-o[1])||1,r=L.cachedCanvases.getCanvas("pattern",l,N,!0),a=r.context;a.clearRect(0,0,a.canvas.width,a.canvas.height),a.beginPath(),a.rect(0,0,a.canvas.width,a.canvas.height),a.translate(-o[0],-o[1]),R=t.Util.transform(R,[1,0,0,1,o[0],o[1]]),a.transform.apply(a,L.baseTransform),this.matrix&&a.transform.apply(a,this.matrix),s(a,this._bbox),a.fillStyle=this._createGradient(a),a.fill(),D=f.createPattern(r.canvas,"no-repeat");let v=new DOMMatrix(R);try{D.setTransform(v)}catch(S){(0,t.warn)(`RadialAxialShadingPattern.getPattern: "${S?.message}".`)}}else s(f,this._bbox),D=this._createGradient(f);return D}}function p(P,f,L,R,F,D,o,l){let N=f.coords,r=f.colors,a=P.data,v=P.width*4,S;N[L+1]>N[R+1]&&(S=L,L=R,R=S,S=D,D=o,o=S),N[R+1]>N[F+1]&&(S=R,R=F,F=S,S=o,o=l,l=S),N[L+1]>N[R+1]&&(S=L,L=R,R=S,S=D,D=o,o=S);let O=(N[L]+f.offsetX)*f.scaleX,x=(N[L+1]+f.offsetY)*f.scaleY,I=(N[R]+f.offsetX)*f.scaleX,U=(N[R+1]+f.offsetY)*f.scaleY,V=(N[F]+f.offsetX)*f.scaleX,z=(N[F+1]+f.offsetY)*f.scaleY;if(x>=z)return;let G=r[D],d=r[D+1],m=r[D+2],h=r[o],C=r[o+1],i=r[o+2],c=r[l],y=r[l+1],B=r[l+2],T=Math.round(x),H=Math.round(z),$,q,X,Y,Q,W,Z,ne;for(let te=T;te<=H;te++){if(te<U){let ae;te<x?ae=0:ae=(x-te)/(x-U),$=O-(O-I)*ae,q=G-(G-h)*ae,X=d-(d-C)*ae,Y=m-(m-i)*ae}else{let ae;te>z?ae=1:U===z?ae=0:ae=(U-te)/(U-z),$=I-(I-V)*ae,q=h-(h-c)*ae,X=C-(C-y)*ae,Y=i-(i-B)*ae}let ie;te<x?ie=0:te>z?ie=1:ie=(x-te)/(x-z),Q=O-(O-V)*ie,W=G-(G-c)*ie,Z=d-(d-y)*ie,ne=m-(m-B)*ie;let re=Math.round(Math.min($,Q)),le=Math.round(Math.max($,Q)),se=v*te+re*4;for(let ae=re;ae<=le;ae++)ie=($-ae)/($-Q),ie<0?ie=0:ie>1&&(ie=1),a[se++]=q-(q-W)*ie|0,a[se++]=X-(X-Z)*ie|0,a[se++]=Y-(Y-ne)*ie|0,a[se++]=255}}function E(P,f,L){let R=f.coords,F=f.colors,D,o;switch(f.type){case"lattice":let l=f.verticesPerRow,N=Math.floor(R.length/l)-1,r=l-1;for(D=0;D<N;D++){let a=D*l;for(let v=0;v<r;v++,a++)p(P,L,R[a],R[a+1],R[a+l],F[a],F[a+1],F[a+l]),p(P,L,R[a+l+1],R[a+1],R[a+l],F[a+l+1],F[a+1],F[a+l])}break;case"triangles":for(D=0,o=R.length;D<o;D+=3)p(P,L,R[D],R[D+1],R[D+2],F[D],F[D+1],F[D+2]);break;default:throw new Error("illegal figure")}}class M extends k{constructor(f){super(),this._coords=f[2],this._colors=f[3],this._figures=f[4],this._bounds=f[5],this._bbox=f[7],this._background=f[8],this.matrix=null}_createMeshCanvas(f,L,R){let l=Math.floor(this._bounds[0]),N=Math.floor(this._bounds[1]),r=Math.ceil(this._bounds[2])-l,a=Math.ceil(this._bounds[3])-N,v=Math.min(Math.ceil(Math.abs(r*f[0]*1.1)),3e3),S=Math.min(Math.ceil(Math.abs(a*f[1]*1.1)),3e3),O=r/v,x=a/S,I={coords:this._coords,colors:this._colors,offsetX:-l,offsetY:-N,scaleX:1/O,scaleY:1/x},U=v+2*2,V=S+2*2,z=R.getCanvas("mesh",U,V,!1),G=z.context,d=G.createImageData(v,S);if(L){let h=d.data;for(let C=0,i=h.length;C<i;C+=4)h[C]=L[0],h[C+1]=L[1],h[C+2]=L[2],h[C+3]=255}for(let h of this._figures)E(d,h,I);return G.putImageData(d,2,2),{canvas:z.canvas,offsetX:l-2*O,offsetY:N-2*x,scaleX:O,scaleY:x}}getPattern(f,L,R,F){s(f,this._bbox);let D;if(F===u.SHADING)D=t.Util.singularValueDecompose2dScale(f.mozCurrentTransform);else if(D=t.Util.singularValueDecompose2dScale(L.baseTransform),this.matrix){let l=t.Util.singularValueDecompose2dScale(this.matrix);D=[D[0]*l[0],D[1]*l[1]]}let o=this._createMeshCanvas(D,F===u.SHADING?null:this._background,L.cachedCanvases);return F!==u.SHADING&&(f.setTransform.apply(f,L.baseTransform),this.matrix&&f.transform.apply(f,this.matrix)),f.translate(o.offsetX,o.offsetY),f.scale(o.scaleX,o.scaleY),f.createPattern(o.canvas,"no-repeat")}}class b extends k{getPattern(){return"hotpink"}}function A(P){switch(P[0]){case"RadialAxial":return new _(P);case"Mesh":return new M(P);case"Dummy":return new b}throw new Error(`Unknown IR type: ${P[0]}`)}let w={COLORED:1,UNCOLORED:2};class g{static get MAX_PATTERN_SIZE(){return(0,t.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(f,L,R,F,D){this.operatorList=f[2],this.matrix=f[3]||[1,0,0,1,0,0],this.bbox=f[4],this.xstep=f[5],this.ystep=f[6],this.paintType=f[7],this.tilingType=f[8],this.color=L,this.ctx=R,this.canvasGraphicsFactory=F,this.baseTransform=D}createPatternCanvas(f){let L=this.operatorList,R=this.bbox,F=this.xstep,D=this.ystep,o=this.paintType,l=this.tilingType,N=this.color,r=this.canvasGraphicsFactory;(0,t.info)("TilingType: "+l);let a=R[0],v=R[1],S=R[2],O=R[3],x=t.Util.singularValueDecompose2dScale(this.matrix),I=t.Util.singularValueDecompose2dScale(this.baseTransform),U=[x[0]*I[0],x[1]*I[1]],V=this.getSizeAndScale(F,this.ctx.canvas.width,U[0]),z=this.getSizeAndScale(D,this.ctx.canvas.height,U[1]),G=f.cachedCanvases.getCanvas("pattern",V.size,z.size,!0),d=G.context,m=r.createCanvasGraphics(d);m.groupLevel=f.groupLevel,this.setFillAndStrokeStyleToContext(m,o,N);let h=a,C=v,i=S,c=O;return a<0&&(h=0,i+=Math.abs(a)),v<0&&(C=0,c+=Math.abs(v)),d.translate(-(V.scale*h),-(z.scale*C)),m.transform(V.scale,0,0,z.scale,0,0),d.save(),this.clipBbox(m,h,C,i,c),m.baseTransform=m.ctx.mozCurrentTransform.slice(),m.executeOperatorList(L),m.endDrawing(),{canvas:G.canvas,scaleX:V.scale,scaleY:z.scale,offsetX:h,offsetY:C}}getSizeAndScale(f,L,R){f=Math.abs(f);let F=Math.max(g.MAX_PATTERN_SIZE,L),D=Math.ceil(f*R);return D>=F?D=F:R=D/f,{scale:R,size:D}}clipBbox(f,L,R,F,D){let o=F-L,l=D-R;f.ctx.rect(L,R,o,l),f.clip(),f.endPath()}setFillAndStrokeStyleToContext(f,L,R){let F=f.ctx,D=f.current;switch(L){case w.COLORED:let o=this.ctx;F.fillStyle=o.fillStyle,F.strokeStyle=o.strokeStyle,D.fillColor=o.fillStyle,D.strokeColor=o.strokeStyle;break;case w.UNCOLORED:let l=t.Util.makeHexColor(R[0],R[1],R[2]);F.fillStyle=l,F.strokeStyle=l,D.fillColor=l,D.strokeColor=l;break;default:throw new t.FormatError(`Unsupported paint type: ${L}`)}}getPattern(f,L,R,F){let D=R;F!==u.SHADING&&(D=t.Util.transform(D,L.baseTransform),this.matrix&&(D=t.Util.transform(D,this.matrix)));let o=this.createPatternCanvas(L),l=new DOMMatrix(D);l=l.translate(o.offsetX,o.offsetY),l=l.scale(1/o.scaleX,1/o.scaleY);let N=f.createPattern(o.canvas,"repeat");try{N.setTransform(l)}catch(r){(0,t.warn)(`TilingPattern.getPattern: "${r?.message}".`)}return N}}e.TilingPattern=g},(j,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GlobalWorkerOptions=void 0;let n=Object.create(null);e.GlobalWorkerOptions=n,n.workerPort=n.workerPort===void 0?null:n.workerPort,n.workerSrc=n.workerSrc===void 0?"":n.workerSrc},(j,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MessageHandler=void 0;var t=n(1);let u={UNKNOWN:0,DATA:1,ERROR:2},s={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function k(p){switch(p instanceof Error||typeof p=="object"&&p!==null||(0,t.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),p.name){case"AbortException":return new t.AbortException(p.message);case"MissingPDFException":return new t.MissingPDFException(p.message);case"PasswordException":return new t.PasswordException(p.message,p.code);case"UnexpectedResponseException":return new t.UnexpectedResponseException(p.message,p.status);case"UnknownErrorException":return new t.UnknownErrorException(p.message,p.details);default:return new t.UnknownErrorException(p.message,p.toString())}}class _{constructor(E,M,b){this.sourceName=E,this.targetName=M,this.comObj=b,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=A=>{let w=A.data;if(w.targetName!==this.sourceName)return;if(w.stream){this._processStreamMessage(w);return}if(w.callback){let P=w.callbackId,f=this.callbackCapabilities[P];if(!f)throw new Error(`Cannot resolve callback ${P}`);if(delete this.callbackCapabilities[P],w.callback===u.DATA)f.resolve(w.data);else if(w.callback===u.ERROR)f.reject(k(w.reason));else throw new Error("Unexpected callback case");return}let g=this.actionHandler[w.action];if(!g)throw new Error(`Unknown action from worker: ${w.action}`);if(w.callbackId){let P=this.sourceName,f=w.sourceName;new Promise(function(L){L(g(w.data))}).then(function(L){b.postMessage({sourceName:P,targetName:f,callback:u.DATA,callbackId:w.callbackId,data:L})},function(L){b.postMessage({sourceName:P,targetName:f,callback:u.ERROR,callbackId:w.callbackId,reason:k(L)})});return}if(w.streamId){this._createStreamSink(w);return}g(w.data)},b.addEventListener("message",this._onComObjOnMessage)}on(E,M){let b=this.actionHandler;if(b[E])throw new Error(`There is already an actionName called "${E}"`);b[E]=M}send(E,M,b){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:E,data:M},b)}sendWithPromise(E,M,b){let A=this.callbackId++,w=(0,t.createPromiseCapability)();this.callbackCapabilities[A]=w;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:E,callbackId:A,data:M},b)}catch(g){w.reject(g)}return w.promise}sendWithStream(E,M,b,A){let w=this.streamId++,g=this.sourceName,P=this.targetName,f=this.comObj;return new ReadableStream({start:L=>{let R=(0,t.createPromiseCapability)();return this.streamControllers[w]={controller:L,startCall:R,pullCall:null,cancelCall:null,isClosed:!1},f.postMessage({sourceName:g,targetName:P,action:E,streamId:w,data:M,desiredSize:L.desiredSize},A),R.promise},pull:L=>{let R=(0,t.createPromiseCapability)();return this.streamControllers[w].pullCall=R,f.postMessage({sourceName:g,targetName:P,stream:s.PULL,streamId:w,desiredSize:L.desiredSize}),R.promise},cancel:L=>{(0,t.assert)(L instanceof Error,"cancel must have a valid reason");let R=(0,t.createPromiseCapability)();return this.streamControllers[w].cancelCall=R,this.streamControllers[w].isClosed=!0,f.postMessage({sourceName:g,targetName:P,stream:s.CANCEL,streamId:w,reason:k(L)}),R.promise}},b)}_createStreamSink(E){let M=E.streamId,b=this.sourceName,A=E.sourceName,w=this.comObj,g=this,P=this.actionHandler[E.action],f={enqueue(L,R=1,F){if(this.isCancelled)return;let D=this.desiredSize;this.desiredSize-=R,D>0&&this.desiredSize<=0&&(this.sinkCapability=(0,t.createPromiseCapability)(),this.ready=this.sinkCapability.promise),w.postMessage({sourceName:b,targetName:A,stream:s.ENQUEUE,streamId:M,chunk:L},F)},close(){this.isCancelled||(this.isCancelled=!0,w.postMessage({sourceName:b,targetName:A,stream:s.CLOSE,streamId:M}),delete g.streamSinks[M])},error(L){(0,t.assert)(L instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,w.postMessage({sourceName:b,targetName:A,stream:s.ERROR,streamId:M,reason:k(L)}))},sinkCapability:(0,t.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:E.desiredSize,ready:null};f.sinkCapability.resolve(),f.ready=f.sinkCapability.promise,this.streamSinks[M]=f,new Promise(function(L){L(P(E.data,f))}).then(function(){w.postMessage({sourceName:b,targetName:A,stream:s.START_COMPLETE,streamId:M,success:!0})},function(L){w.postMessage({sourceName:b,targetName:A,stream:s.START_COMPLETE,streamId:M,reason:k(L)})})}_processStreamMessage(E){let M=E.streamId,b=this.sourceName,A=E.sourceName,w=this.comObj,g=this.streamControllers[M],P=this.streamSinks[M];switch(E.stream){case s.START_COMPLETE:E.success?g.startCall.resolve():g.startCall.reject(k(E.reason));break;case s.PULL_COMPLETE:E.success?g.pullCall.resolve():g.pullCall.reject(k(E.reason));break;case s.PULL:if(!P){w.postMessage({sourceName:b,targetName:A,stream:s.PULL_COMPLETE,streamId:M,success:!0});break}P.desiredSize<=0&&E.desiredSize>0&&P.sinkCapability.resolve(),P.desiredSize=E.desiredSize,new Promise(function(f){f(P.onPull&&P.onPull())}).then(function(){w.postMessage({sourceName:b,targetName:A,stream:s.PULL_COMPLETE,streamId:M,success:!0})},function(f){w.postMessage({sourceName:b,targetName:A,stream:s.PULL_COMPLETE,streamId:M,reason:k(f)})});break;case s.ENQUEUE:if((0,t.assert)(g,"enqueue should have stream controller"),g.isClosed)break;g.controller.enqueue(E.chunk);break;case s.CLOSE:if((0,t.assert)(g,"close should have stream controller"),g.isClosed)break;g.isClosed=!0,g.controller.close(),this._deleteStreamController(g,M);break;case s.ERROR:(0,t.assert)(g,"error should have stream controller"),g.controller.error(k(E.reason)),this._deleteStreamController(g,M);break;case s.CANCEL_COMPLETE:E.success?g.cancelCall.resolve():g.cancelCall.reject(k(E.reason)),this._deleteStreamController(g,M);break;case s.CANCEL:if(!P)break;new Promise(function(f){f(P.onCancel&&P.onCancel(k(E.reason)))}).then(function(){w.postMessage({sourceName:b,targetName:A,stream:s.CANCEL_COMPLETE,streamId:M,success:!0})},function(f){w.postMessage({sourceName:b,targetName:A,stream:s.CANCEL_COMPLETE,streamId:M,reason:k(f)})}),P.sinkCapability.reject(k(E.reason)),P.isCancelled=!0,delete this.streamSinks[M];break;default:throw new Error("Unexpected stream case")}}async _deleteStreamController(E,M){await Promise.allSettled([E.startCall&&E.startCall.promise,E.pullCall&&E.pullCall.promise,E.cancelCall&&E.cancelCall.promise]),delete this.streamControllers[M]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}e.MessageHandler=_},(j,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Metadata=void 0;var t=n(1);class u{#e;#t;constructor({parsedData:k,rawData:_}){this.#e=k,this.#t=_}getRaw(){return this.#t}get(k){return this.#e.get(k)??null}getAll(){return(0,t.objectFromMap)(this.#e)}has(k){return this.#e.has(k)}}e.Metadata=u},(j,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OptionalContentConfig=void 0;var t=n(1);class u{constructor(_,p){this.visible=!0,this.name=_,this.intent=p}}class s{constructor(_){if(this.name=null,this.creator=null,this._order=null,this._groups=new Map,_!==null){this.name=_.name,this.creator=_.creator,this._order=_.order;for(let p of _.groups)this._groups.set(p.id,new u(p.name,p.intent));if(_.baseState==="OFF")for(let p of this._groups)p.visible=!1;for(let p of _.on)this._groups.get(p).visible=!0;for(let p of _.off)this._groups.get(p).visible=!1}}_evaluateVisibilityExpression(_){let p=_.length;if(p<2)return!0;let E=_[0];for(let M=1;M<p;M++){let b=_[M],A;if(Array.isArray(b))A=this._evaluateVisibilityExpression(b);else if(this._groups.has(b))A=this._groups.get(b).visible;else return(0,t.warn)(`Optional content group not found: ${b}`),!0;switch(E){case"And":if(!A)return!1;break;case"Or":if(A)return!0;break;case"Not":return!A;default:return!0}}return E==="And"}isVisible(_){if(this._groups.size===0)return!0;if(!_)return(0,t.warn)("Optional content group not defined."),!0;if(_.type==="OCG")return this._groups.has(_.id)?this._groups.get(_.id).visible:((0,t.warn)(`Optional content group not found: ${_.id}`),!0);if(_.type==="OCMD"){if(_.expression)return this._evaluateVisibilityExpression(_.expression);if(!_.policy||_.policy==="AnyOn"){for(let p of _.ids){if(!this._groups.has(p))return(0,t.warn)(`Optional content group not found: ${p}`),!0;if(this._groups.get(p).visible)return!0}return!1}else if(_.policy==="AllOn"){for(let p of _.ids){if(!this._groups.has(p))return(0,t.warn)(`Optional content group not found: ${p}`),!0;if(!this._groups.get(p).visible)return!1}return!0}else if(_.policy==="AnyOff"){for(let p of _.ids){if(!this._groups.has(p))return(0,t.warn)(`Optional content group not found: ${p}`),!0;if(!this._groups.get(p).visible)return!0}return!1}else if(_.policy==="AllOff"){for(let p of _.ids){if(!this._groups.has(p))return(0,t.warn)(`Optional content group not found: ${p}`),!0;if(this._groups.get(p).visible)return!1}return!0}return(0,t.warn)(`Unknown optional content policy ${_.policy}.`),!0}return(0,t.warn)(`Unknown group type ${_.type}.`),!0}setVisibility(_,p=!0){if(!this._groups.has(_)){(0,t.warn)(`Optional content group not found: ${_}`);return}this._groups.get(_).visible=!!p}getOrder(){return this._groups.size?this._order?this._order.slice():Array.from(this._groups.keys()):null}getGroups(){return this._groups.size>0?(0,t.objectFromMap)(this._groups):null}getGroup(_){return this._groups.get(_)||null}}e.OptionalContentConfig=s},(j,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFDataTransportStream=void 0;var t=n(1),u=n(5);class s{constructor(E,M){(0,t.assert)(M,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=E.progressiveDone||!1,this._contentDispositionFilename=E.contentDispositionFilename||null;let b=E.initialData;if(b?.length>0){let A=new Uint8Array(b).buffer;this._queuedChunks.push(A)}this._pdfDataRangeTransport=M,this._isStreamingSupported=!E.disableStream,this._isRangeSupported=!E.disableRange,this._contentLength=E.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((A,w)=>{this._onReceiveData({begin:A,chunk:w})}),this._pdfDataRangeTransport.addProgressListener((A,w)=>{this._onProgress({loaded:A,total:w})}),this._pdfDataRangeTransport.addProgressiveReadListener(A=>{this._onReceiveData({chunk:A})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(E){let M=new Uint8Array(E.chunk).buffer;if(E.begin===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(M):this._queuedChunks.push(M);else{let b=this._rangeReaders.some(function(A){return A._begin!==E.begin?!1:(A._enqueue(M),!0)});(0,t.assert)(b,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(E){if(E.total===void 0){let M=this._rangeReaders[0];M?.onProgress&&M.onProgress({loaded:E.loaded})}else{let M=this._fullRequestReader;M?.onProgress&&M.onProgress({loaded:E.loaded,total:E.total})}}_onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(E){let M=this._rangeReaders.indexOf(E);M>=0&&this._rangeReaders.splice(M,1)}getFullReader(){(0,t.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");let E=this._queuedChunks;return this._queuedChunks=null,new k(this,E,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(E,M){if(M<=this._progressiveDataLength)return null;let b=new _(this,E,M);return this._pdfDataRangeTransport.requestDataRange(E,M),this._rangeReaders.push(b),b}cancelAllRequests(E){this._fullRequestReader&&this._fullRequestReader.cancel(E);for(let M of this._rangeReaders.slice(0))M.cancel(E);this._pdfDataRangeTransport.abort()}}e.PDFDataTransportStream=s;class k{constructor(E,M,b=!1,A=null){this._stream=E,this._done=b||!1,this._filename=(0,u.isPdfFile)(A)?A:null,this._queuedChunks=M||[],this._loaded=0;for(let w of this._queuedChunks)this._loaded+=w.byteLength;this._requests=[],this._headersReady=Promise.resolve(),E._fullRequestReader=this,this.onProgress=null}_enqueue(E){this._done||(this._requests.length>0?this._requests.shift().resolve({value:E,done:!1}):this._queuedChunks.push(E),this._loaded+=E.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};let E=(0,t.createPromiseCapability)();return this._requests.push(E),E.promise}cancel(E){this._done=!0;for(let M of this._requests)M.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class _{constructor(E,M,b){this._stream=E,this._begin=M,this._end=b,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(E){if(!this._done){if(this._requests.length===0)this._queuedChunk=E;else{this._requests.shift().resolve({value:E,done:!1});for(let b of this._requests)b.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){let M=this._queuedChunk;return this._queuedChunk=null,{value:M,done:!1}}if(this._done)return{value:void 0,done:!0};let E=(0,t.createPromiseCapability)();return this._requests.push(E),E.promise}cancel(E){this._done=!0;for(let M of this._requests)M.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(j,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaText=void 0;class n{static textContent(u){let s=[],k={items:s,styles:Object.create(null)};function _(p){if(!p)return;let E=null,M=p.name;if(M==="#text")E=p.value;else if(n.shouldBuildText(M))p?.attributes?.textContent?E=p.attributes.textContent:p.value&&(E=p.value);else return;if(E!==null&&s.push({str:E}),!!p.children)for(let b of p.children)_(b)}return _(u),k}static shouldBuildText(u){return!(u==="textarea"||u==="input"||u==="option"||u==="select")}}e.XfaText=n},(j,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationLayer=void 0;var t=n(1),u=n(5),s=n(9),k=n(19),_=n(20);let p=1e3,E=new WeakSet;function M(C){return{width:C[2]-C[0],height:C[3]-C[1]}}class b{static create(i){switch(i.data.annotationType){case t.AnnotationType.LINK:return new w(i);case t.AnnotationType.TEXT:return new g(i);case t.AnnotationType.WIDGET:switch(i.data.fieldType){case"Tx":return new f(i);case"Btn":return i.data.radioButton?new R(i):i.data.checkBox?new L(i):new F(i);case"Ch":return new D(i)}return new P(i);case t.AnnotationType.POPUP:return new o(i);case t.AnnotationType.FREETEXT:return new N(i);case t.AnnotationType.LINE:return new r(i);case t.AnnotationType.SQUARE:return new a(i);case t.AnnotationType.CIRCLE:return new v(i);case t.AnnotationType.POLYLINE:return new S(i);case t.AnnotationType.CARET:return new x(i);case t.AnnotationType.INK:return new I(i);case t.AnnotationType.POLYGON:return new O(i);case t.AnnotationType.HIGHLIGHT:return new U(i);case t.AnnotationType.UNDERLINE:return new V(i);case t.AnnotationType.SQUIGGLY:return new z(i);case t.AnnotationType.STRIKEOUT:return new G(i);case t.AnnotationType.STAMP:return new d(i);case t.AnnotationType.FILEATTACHMENT:return new m(i);default:return new A(i)}}}class A{constructor(i,{isRenderable:c=!1,ignoreBorder:y=!1,createQuadrilaterals:B=!1}={}){this.isRenderable=c,this.data=i.data,this.layer=i.layer,this.page=i.page,this.viewport=i.viewport,this.linkService=i.linkService,this.downloadManager=i.downloadManager,this.imageResourcesPath=i.imageResourcesPath,this.renderForms=i.renderForms,this.svgFactory=i.svgFactory,this.annotationStorage=i.annotationStorage,this.enableScripting=i.enableScripting,this.hasJSActions=i.hasJSActions,this._fieldObjects=i.fieldObjects,this._mouseState=i.mouseState,c&&(this.container=this._createContainer(y)),B&&(this.quadrilaterals=this._createQuadrilaterals(y))}_createContainer(i=!1){let c=this.data,y=this.page,B=this.viewport,T=document.createElement("section"),{width:H,height:$}=M(c.rect);T.setAttribute("data-annotation-id",c.id);let q=t.Util.normalizeRect([c.rect[0],y.view[3]-c.rect[1]+y.view[1],c.rect[2],y.view[3]-c.rect[3]+y.view[1]]);if(c.hasOwnCanvas){let X=B.transform.slice(),[Y,Q]=t.Util.singularValueDecompose2dScale(X);H=Math.ceil(H*Y),$=Math.ceil($*Q),q[0]*=Y,q[1]*=Q;for(let W=0;W<4;W++)X[W]=Math.sign(X[W]);T.style.transform=`matrix(${X.join(",")})`}else T.style.transform=`matrix(${B.transform.join(",")})`;if(T.style.transformOrigin=`${-q[0]}px ${-q[1]}px`,!i&&c.borderStyle.width>0){T.style.borderWidth=`${c.borderStyle.width}px`,c.borderStyle.style!==t.AnnotationBorderStyleType.UNDERLINE&&(H-=2*c.borderStyle.width,$-=2*c.borderStyle.width);let X=c.borderStyle.horizontalCornerRadius,Y=c.borderStyle.verticalCornerRadius;if(X>0||Y>0){let W=`${X}px / ${Y}px`;T.style.borderRadius=W}switch(c.borderStyle.style){case t.AnnotationBorderStyleType.SOLID:T.style.borderStyle="solid";break;case t.AnnotationBorderStyleType.DASHED:T.style.borderStyle="dashed";break;case t.AnnotationBorderStyleType.BEVELED:(0,t.warn)("Unimplemented border style: beveled");break;case t.AnnotationBorderStyleType.INSET:(0,t.warn)("Unimplemented border style: inset");break;case t.AnnotationBorderStyleType.UNDERLINE:T.style.borderBottomStyle="solid";break;default:break}c.borderColor||c.color||null?T.style.borderColor=t.Util.makeHexColor(c.color[0]|0,c.color[1]|0,c.color[2]|0):T.style.borderWidth=0}return T.style.left=`${q[0]}px`,T.style.top=`${q[1]}px`,c.hasOwnCanvas?T.style.width=T.style.height="auto":(T.style.width=`${H}px`,T.style.height=`${$}px`),T}_createQuadrilaterals(i=!1){if(!this.data.quadPoints)return null;let c=[],y=this.data.rect;for(let B of this.data.quadPoints)this.data.rect=[B[2].x,B[2].y,B[1].x,B[1].y],c.push(this._createContainer(i));return this.data.rect=y,c}_createPopup(i,c){let y=this.container;this.quadrilaterals&&(i=i||this.quadrilaterals,y=this.quadrilaterals[0]),i||(i=document.createElement("div"),i.style.height=y.style.height,i.style.width=y.style.width,y.appendChild(i));let T=new l({container:y,trigger:i,color:c.color,titleObj:c.titleObj,modificationDate:c.modificationDate,contentsObj:c.contentsObj,richText:c.richText,hideWrapper:!0}).render();T.style.left=y.style.width,y.appendChild(T)}_renderQuadrilaterals(i){for(let c of this.quadrilaterals)c.className=i;return this.quadrilaterals}render(){(0,t.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(i,c=null){let y=[];if(this._fieldObjects){let B=this._fieldObjects[i];if(B)for(let{page:T,id:H,exportValues:$}of B){if(T===-1||H===c)continue;let q=typeof $=="string"?$:null,X=document.getElementById(H);if(X&&!E.has(X)){(0,t.warn)(`_getElementsByName - element not allowed: ${H}`);continue}y.push({id:H,exportValue:q,domElement:X})}return y}for(let B of document.getElementsByName(i)){let{id:T,exportValue:H}=B;T!==c&&(!E.has(B)||y.push({id:T,exportValue:H,domElement:B}))}return y}static get platform(){let i=typeof navigator<"u"?navigator.platform:"";return(0,t.shadow)(this,"platform",{isWin:i.includes("Win"),isMac:i.includes("Mac")})}}class w extends A{constructor(i,c=null){let y=!!(i.data.url||i.data.dest||i.data.action||i.data.isTooltipOnly||i.data.resetForm||i.data.actions&&(i.data.actions.Action||i.data.actions["Mouse Up"]||i.data.actions["Mouse Down"]));super(i,{isRenderable:y,ignoreBorder:!!c?.ignoreBorder,createQuadrilaterals:!0})}render(){let{data:i,linkService:c}=this,y=document.createElement("a");if(i.url)c.addLinkAttributes||(0,t.warn)("LinkAnnotationElement.render - missing `addLinkAttributes`-method on the `linkService`-instance."),c.addLinkAttributes?.(y,i.url,i.newWindow);else if(i.action)this._bindNamedAction(y,i.action);else if(i.dest)this._bindLink(y,i.dest);else{let B=!1;i.actions&&(i.actions.Action||i.actions["Mouse Up"]||i.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(B=!0,this._bindJSAction(y,i)),i.resetForm?this._bindResetFormAction(y,i.resetForm):B||this._bindLink(y,"")}return this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((B,T)=>{let H=T===0?y:y.cloneNode();return B.appendChild(H),B}):(this.container.className="linkAnnotation",this.container.appendChild(y),this.container)}_bindLink(i,c){i.href=this.linkService.getDestinationHash(c),i.onclick=()=>(c&&this.linkService.goToDestination(c),!1),(c||c==="")&&(i.className="internalLink")}_bindNamedAction(i,c){i.href=this.linkService.getAnchorUrl(""),i.onclick=()=>(this.linkService.executeNamedAction(c),!1),i.className="internalLink"}_bindJSAction(i,c){i.href=this.linkService.getAnchorUrl("");let y=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(let B of Object.keys(c.actions)){let T=y.get(B);!T||(i[T]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:c.id,name:B}}),!1))}i.onclick||(i.onclick=()=>!1),i.className="internalLink"}_bindResetFormAction(i,c){let y=i.onclick;if(y||(i.href=this.linkService.getAnchorUrl("")),i.className="internalLink",!this._fieldObjects){(0,t.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),y||(i.onclick=()=>!1);return}i.onclick=()=>{y&&y();let{fields:B,refs:T,include:H}=c,$=[];if(B.length!==0||T.length!==0){let Y=new Set(T);for(let Q of B){let W=this._fieldObjects[Q]||[];for(let{id:Z}of W)Y.add(Z)}for(let Q of Object.values(this._fieldObjects))for(let W of Q)Y.has(W.id)===H&&$.push(W)}else for(let Y of Object.values(this._fieldObjects))$.push(...Y);let q=this.annotationStorage,X=[];for(let Y of $){let{id:Q}=Y;switch(X.push(Q),Y.type){case"text":{let Z=Y.defaultValue||"";q.setValue(Q,{value:Z,valueAsString:Z});break}case"checkbox":case"radiobutton":{let Z=Y.defaultValue===Y.exportValues;q.setValue(Q,{value:Z});break}case"combobox":case"listbox":{let Z=Y.defaultValue||"";q.setValue(Q,{value:Z});break}default:continue}let W=document.getElementById(Q);!W||!E.has(W)||W.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:X,name:"ResetForm"}}),!1}}}class g extends A{constructor(i){let c=!!(i.data.hasPopup||i.data.titleObj?.str||i.data.contentsObj?.str||i.data.richText?.str);super(i,{isRenderable:c})}render(){this.container.className="textAnnotation";let i=document.createElement("img");return i.style.height=this.container.style.height,i.style.width=this.container.style.width,i.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",i.alt="[{{type}} Annotation]",i.dataset.l10nId="text_annotation_type",i.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(i,this.data),this.container.appendChild(i),this.container}}class P extends A{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(i){let{isWin:c,isMac:y}=A.platform;return c&&i.ctrlKey||y&&i.metaKey}_setEventListener(i,c,y,B){c.includes("mouse")?i.addEventListener(c,T=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:y,value:B(T),shift:T.shiftKey,modifier:this._getKeyModifier(T)}})}):i.addEventListener(c,T=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:y,value:B(T)}})})}_setEventListeners(i,c,y){for(let[B,T]of c)(T==="Action"||this.data.actions?.[T])&&this._setEventListener(i,B,T,y)}_setBackgroundColor(i){let c=this.data.backgroundColor||null;i.style.backgroundColor=c===null?"transparent":t.Util.makeHexColor(c[0],c[1],c[2])}_dispatchEventFromSandbox(i,c){let y=(T,H,$)=>{let q=$.detail[T];$.target.style[H]=k.ColorConverters[`${q[0]}_HTML`](q.slice(1))},B={display:T=>{let H=T.detail.display%2===1;T.target.style.visibility=H?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:H,print:T.detail.display===0||T.detail.display===3})},print:T=>{this.annotationStorage.setValue(this.data.id,{print:T.detail.print})},hidden:T=>{T.target.style.visibility=T.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:T.detail.hidden})},focus:T=>{setTimeout(()=>T.target.focus({preventScroll:!1}),0)},userName:T=>{T.target.title=T.detail.userName},readonly:T=>{T.detail.readonly?T.target.setAttribute("readonly",""):T.target.removeAttribute("readonly")},required:T=>{T.detail.required?T.target.setAttribute("required",""):T.target.removeAttribute("required")},bgColor:T=>{y("bgColor","backgroundColor",T)},fillColor:T=>{y("fillColor","backgroundColor",T)},fgColor:T=>{y("fgColor","color",T)},textColor:T=>{y("textColor","color",T)},borderColor:T=>{y("borderColor","borderColor",T)},strokeColor:T=>{y("strokeColor","borderColor",T)}};for(let T of Object.keys(c.detail)){let H=i[T]||B[T];H&&H(c)}}}class f extends P{constructor(i){let c=i.renderForms||!i.data.hasAppearance&&!!i.data.fieldValue;super(i,{isRenderable:c})}setPropertyOnSiblings(i,c,y,B){let T=this.annotationStorage;for(let H of this._getElementsByName(i.name,i.id))H.domElement&&(H.domElement[c]=y),T.setValue(H.id,{[B]:y})}render(){let i=this.annotationStorage,c=this.data.id;this.container.className="textWidgetAnnotation";let y=null;if(this.renderForms){let B=i.getValue(c,{value:this.data.fieldValue,valueAsString:this.data.fieldValue}),T=B.valueAsString||B.value||"",H={userValue:null,formattedValue:null};this.data.multiLine?(y=document.createElement("textarea"),y.textContent=T):(y=document.createElement("input"),y.type="text",y.setAttribute("value",T)),E.add(y),y.disabled=this.data.readOnly,y.name=this.data.fieldName,y.tabIndex=p,H.userValue=T,y.setAttribute("id",c),y.addEventListener("input",q=>{i.setValue(c,{value:q.target.value}),this.setPropertyOnSiblings(y,"value",q.target.value,"value")}),y.addEventListener("resetform",q=>{let X=this.data.defaultFieldValue||"";y.value=H.userValue=X,delete H.formattedValue});let $=q=>{H.formattedValue&&(q.target.value=H.formattedValue),q.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){y.addEventListener("focus",X=>{H.userValue&&(X.target.value=H.userValue)}),y.addEventListener("updatefromsandbox",X=>{let Y={value(Q){H.userValue=Q.detail.value||"",i.setValue(c,{value:H.userValue.toString()}),H.formattedValue||(Q.target.value=H.userValue)},valueAsString(Q){H.formattedValue=Q.detail.valueAsString||"",Q.target!==document.activeElement&&(Q.target.value=H.formattedValue),i.setValue(c,{formattedValue:H.formattedValue})},selRange(Q){let[W,Z]=Q.detail.selRange;W>=0&&Z<Q.target.value.length&&Q.target.setSelectionRange(W,Z)}};this._dispatchEventFromSandbox(Y,X)}),y.addEventListener("keydown",X=>{let Y=-1;X.key==="Escape"?Y=0:X.key==="Enter"?Y=2:X.key==="Tab"&&(Y=3),Y!==-1&&(H.userValue=X.target.value,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:c,name:"Keystroke",value:X.target.value,willCommit:!0,commitKey:Y,selStart:X.target.selectionStart,selEnd:X.target.selectionEnd}}))});let q=$;$=null,y.addEventListener("blur",X=>{H.userValue=X.target.value,this._mouseState.isDown&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:c,name:"Keystroke",value:X.target.value,willCommit:!0,commitKey:1,selStart:X.target.selectionStart,selEnd:X.target.selectionEnd}}),q(X)}),this.data.actions?.Keystroke&&y.addEventListener("beforeinput",X=>{H.formattedValue="";let{data:Y,target:Q}=X,{value:W,selectionStart:Z,selectionEnd:ne}=Q;this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:c,name:"Keystroke",value:W,change:Y,willCommit:!1,selStart:Z,selEnd:ne}})}),this._setEventListeners(y,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],X=>X.target.value)}if($&&y.addEventListener("blur",$),this.data.maxLen!==null&&(y.maxLength=this.data.maxLen),this.data.comb){let X=(this.data.rect[2]-this.data.rect[0])/this.data.maxLen;y.classList.add("comb"),y.style.letterSpacing=`calc(${X}px - 1ch)`}}else y=document.createElement("div"),y.textContent=this.data.fieldValue,y.style.verticalAlign="middle",y.style.display="table-cell";return this._setTextStyle(y),this._setBackgroundColor(y),this.container.appendChild(y),this.container}_setTextStyle(i){let c=["left","center","right"],{fontSize:y,fontColor:B}=this.data.defaultAppearanceData,T=i.style;y&&(T.fontSize=`${y}px`),T.color=t.Util.makeHexColor(B[0],B[1],B[2]),this.data.textAlignment!==null&&(T.textAlign=c[this.data.textAlignment])}}class L extends P{constructor(i){super(i,{isRenderable:i.renderForms})}render(){let i=this.annotationStorage,c=this.data,y=c.id,B=i.getValue(y,{value:c.exportValue===c.fieldValue}).value;typeof B=="string"&&(B=B!=="Off",i.setValue(y,{value:B})),this.container.className="buttonWidgetAnnotation checkBox";let T=document.createElement("input");return E.add(T),T.disabled=c.readOnly,T.type="checkbox",T.name=c.fieldName,B&&T.setAttribute("checked",!0),T.setAttribute("id",y),T.setAttribute("exportValue",c.exportValue),T.tabIndex=p,T.addEventListener("change",H=>{let{name:$,checked:q}=H.target;for(let X of this._getElementsByName($,y)){let Y=q&&X.exportValue===c.exportValue;X.domElement&&(X.domElement.checked=Y),i.setValue(X.id,{value:Y})}i.setValue(y,{value:q})}),T.addEventListener("resetform",H=>{let $=c.defaultFieldValue||"Off";H.target.checked=$===c.exportValue}),this.enableScripting&&this.hasJSActions&&(T.addEventListener("updatefromsandbox",H=>{let $={value(q){q.target.checked=q.detail.value!=="Off",i.setValue(y,{value:q.target.checked})}};this._dispatchEventFromSandbox($,H)}),this._setEventListeners(T,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],H=>H.target.checked)),this._setBackgroundColor(T),this.container.appendChild(T),this.container}}class R extends P{constructor(i){super(i,{isRenderable:i.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";let i=this.annotationStorage,c=this.data,y=c.id,B=i.getValue(y,{value:c.fieldValue===c.buttonValue}).value;typeof B=="string"&&(B=B!==c.buttonValue,i.setValue(y,{value:B}));let T=document.createElement("input");if(E.add(T),T.disabled=c.readOnly,T.type="radio",T.name=c.fieldName,B&&T.setAttribute("checked",!0),T.setAttribute("id",y),T.tabIndex=p,T.addEventListener("change",H=>{let{name:$,checked:q}=H.target;for(let X of this._getElementsByName($,y))i.setValue(X.id,{value:!1});i.setValue(y,{value:q})}),T.addEventListener("resetform",H=>{let $=c.defaultFieldValue;H.target.checked=$!=null&&$===c.buttonValue}),this.enableScripting&&this.hasJSActions){let H=c.buttonValue;T.addEventListener("updatefromsandbox",$=>{let q={value:X=>{let Y=H===X.detail.value;for(let Q of this._getElementsByName(X.target.name)){let W=Y&&Q.id===y;Q.domElement&&(Q.domElement.checked=W),i.setValue(Q.id,{value:W})}}};this._dispatchEventFromSandbox(q,$)}),this._setEventListeners(T,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],$=>$.target.checked)}return this._setBackgroundColor(T),this.container.appendChild(T),this.container}}class F extends w{constructor(i){super(i,{ignoreBorder:i.data.hasAppearance})}render(){let i=super.render();return i.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(i.title=this.data.alternativeText),i}}class D extends P{constructor(i){super(i,{isRenderable:i.renderForms})}render(){this.container.className="choiceWidgetAnnotation";let i=this.annotationStorage,c=this.data.id;i.getValue(c,{value:this.data.fieldValue.length>0?this.data.fieldValue[0]:void 0});let{fontSize:y}=this.data.defaultAppearanceData;y||(y=9);let B=`calc(${y}px * var(--zoom-factor))`,T=document.createElement("select");E.add(T),T.disabled=this.data.readOnly,T.name=this.data.fieldName,T.setAttribute("id",c),T.tabIndex=p,T.style.fontSize=`${y}px`,this.data.combo||(T.size=this.data.options.length,this.data.multiSelect&&(T.multiple=!0)),T.addEventListener("resetform",q=>{let X=this.data.defaultFieldValue;for(let Y of T.options)Y.selected=Y.value===X});for(let q of this.data.options){let X=document.createElement("option");X.textContent=q.displayValue,X.value=q.exportValue,this.data.combo&&(X.style.fontSize=B),this.data.fieldValue.includes(q.exportValue)&&X.setAttribute("selected",!0),T.appendChild(X)}let H=(q,X)=>{let Y=X?"value":"textContent",Q=q.target.options;return q.target.multiple?Array.prototype.filter.call(Q,W=>W.selected).map(W=>W[Y]):Q.selectedIndex===-1?null:Q[Q.selectedIndex][Y]},$=q=>{let X=q.target.options;return Array.prototype.map.call(X,Y=>({displayValue:Y.textContent,exportValue:Y.value}))};return this.enableScripting&&this.hasJSActions?(T.addEventListener("updatefromsandbox",q=>{let X={value(Y){let Q=Y.detail.value,W=new Set(Array.isArray(Q)?Q:[Q]);for(let Z of T.options)Z.selected=W.has(Z.value);i.setValue(c,{value:H(Y,!0)})},multipleSelection(Y){T.multiple=!0},remove(Y){let Q=T.options,W=Y.detail.remove;Q[W].selected=!1,T.remove(W),Q.length>0&&Array.prototype.findIndex.call(Q,ne=>ne.selected)===-1&&(Q[0].selected=!0),i.setValue(c,{value:H(Y,!0),items:$(Y)})},clear(Y){for(;T.length!==0;)T.remove(0);i.setValue(c,{value:null,items:[]})},insert(Y){let{index:Q,displayValue:W,exportValue:Z}=Y.detail.insert,ne=document.createElement("option");ne.textContent=W,ne.value=Z,T.insertBefore(ne,T.children[Q]),i.setValue(c,{value:H(Y,!0),items:$(Y)})},items(Y){let{items:Q}=Y.detail;for(;T.length!==0;)T.remove(0);for(let W of Q){let{displayValue:Z,exportValue:ne}=W,te=document.createElement("option");te.textContent=Z,te.value=ne,T.appendChild(te)}T.options.length>0&&(T.options[0].selected=!0),i.setValue(c,{value:H(Y,!0),items:$(Y)})},indices(Y){let Q=new Set(Y.detail.indices);for(let W of Y.target.options)W.selected=Q.has(W.index);i.setValue(c,{value:H(Y,!0)})},editable(Y){Y.target.disabled=!Y.detail.editable}};this._dispatchEventFromSandbox(X,q)}),T.addEventListener("input",q=>{let X=H(q,!0),Y=H(q,!1);i.setValue(c,{value:X}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:c,name:"Keystroke",value:Y,changeEx:X,willCommit:!0,commitKey:1,keyDown:!1}})}),this._setEventListeners(T,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],q=>q.target.checked)):T.addEventListener("input",function(q){i.setValue(c,{value:H(q)})}),this._setBackgroundColor(T),this.container.appendChild(T),this.container}}class o extends A{constructor(i){let c=!!(i.data.titleObj?.str||i.data.contentsObj?.str||i.data.richText?.str);super(i,{isRenderable:c})}render(){let i=["Line","Square","Circle","PolyLine","Polygon","Ink"];if(this.container.className="popupAnnotation",i.includes(this.data.parentType))return this.container;let c=`[data-annotation-id="${this.data.parentId}"]`,y=this.layer.querySelectorAll(c);if(y.length===0)return this.container;let B=new l({container:this.container,trigger:Array.from(y),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),T=this.page,H=t.Util.normalizeRect([this.data.parentRect[0],T.view[3]-this.data.parentRect[1]+T.view[1],this.data.parentRect[2],T.view[3]-this.data.parentRect[3]+T.view[1]]),$=H[0]+this.data.parentRect[2]-this.data.parentRect[0],q=H[1];return this.container.style.transformOrigin=`${-$}px ${-q}px`,this.container.style.left=`${$}px`,this.container.style.top=`${q}px`,this.container.appendChild(B.render()),this.container}}class l{constructor(i){this.container=i.container,this.trigger=i.trigger,this.color=i.color,this.titleObj=i.titleObj,this.modificationDate=i.modificationDate,this.contentsObj=i.contentsObj,this.richText=i.richText,this.hideWrapper=i.hideWrapper||!1,this.pinned=!1}render(){let c=document.createElement("div");c.className="popupWrapper",this.hideElement=this.hideWrapper?c:this.container,this.hideElement.hidden=!0;let y=document.createElement("div");y.className="popup";let B=this.color;if(B){let $=.7*(255-B[0])+B[0],q=.7*(255-B[1])+B[1],X=.7*(255-B[2])+B[2];y.style.backgroundColor=t.Util.makeHexColor($|0,q|0,X|0)}let T=document.createElement("h1");T.dir=this.titleObj.dir,T.textContent=this.titleObj.str,y.appendChild(T);let H=u.PDFDateString.toDateObject(this.modificationDate);if(H){let $=document.createElement("span");$.className="popupDate",$.textContent="{{date}}, {{time}}",$.dataset.l10nId="annotation_date_string",$.dataset.l10nArgs=JSON.stringify({date:H.toLocaleDateString(),time:H.toLocaleTimeString()}),y.appendChild($)}if(this.richText?.str&&(!this.contentsObj?.str||this.contentsObj.str===this.richText.str))_.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:y}),y.lastChild.className="richText popupContent";else{let $=this._formatContents(this.contentsObj);y.appendChild($)}Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(let $ of this.trigger)$.addEventListener("click",this._toggle.bind(this)),$.addEventListener("mouseover",this._show.bind(this,!1)),$.addEventListener("mouseout",this._hide.bind(this,!1));return y.addEventListener("click",this._hide.bind(this,!0)),c.appendChild(y),c}_formatContents({str:i,dir:c}){let y=document.createElement("p");y.className="popupContent",y.dir=c;let B=i.split(/(?:\r\n?|\n)/);for(let T=0,H=B.length;T<H;++T){let $=B[T];y.appendChild(document.createTextNode($)),T<H-1&&y.appendChild(document.createElement("br"))}return y}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(i=!1){i&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex+=1)}_hide(i=!0){i&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex-=1)}}class N extends A{constructor(i){let c=!!(i.data.hasPopup||i.data.titleObj?.str||i.data.contentsObj?.str||i.data.richText?.str);super(i,{isRenderable:c,ignoreBorder:!0})}render(){return this.container.className="freeTextAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class r extends A{constructor(i){let c=!!(i.data.hasPopup||i.data.titleObj?.str||i.data.contentsObj?.str||i.data.richText?.str);super(i,{isRenderable:c,ignoreBorder:!0})}render(){this.container.className="lineAnnotation";let i=this.data,{width:c,height:y}=M(i.rect),B=this.svgFactory.create(c,y),T=this.svgFactory.createElement("svg:line");return T.setAttribute("x1",i.rect[2]-i.lineCoordinates[0]),T.setAttribute("y1",i.rect[3]-i.lineCoordinates[1]),T.setAttribute("x2",i.rect[2]-i.lineCoordinates[2]),T.setAttribute("y2",i.rect[3]-i.lineCoordinates[3]),T.setAttribute("stroke-width",i.borderStyle.width||1),T.setAttribute("stroke","transparent"),T.setAttribute("fill","transparent"),B.appendChild(T),this.container.append(B),this._createPopup(T,i),this.container}}class a extends A{constructor(i){let c=!!(i.data.hasPopup||i.data.titleObj?.str||i.data.contentsObj?.str||i.data.richText?.str);super(i,{isRenderable:c,ignoreBorder:!0})}render(){this.container.className="squareAnnotation";let i=this.data,{width:c,height:y}=M(i.rect),B=this.svgFactory.create(c,y),T=i.borderStyle.width,H=this.svgFactory.createElement("svg:rect");return H.setAttribute("x",T/2),H.setAttribute("y",T/2),H.setAttribute("width",c-T),H.setAttribute("height",y-T),H.setAttribute("stroke-width",T||1),H.setAttribute("stroke","transparent"),H.setAttribute("fill","transparent"),B.appendChild(H),this.container.append(B),this._createPopup(H,i),this.container}}class v extends A{constructor(i){let c=!!(i.data.hasPopup||i.data.titleObj?.str||i.data.contentsObj?.str||i.data.richText?.str);super(i,{isRenderable:c,ignoreBorder:!0})}render(){this.container.className="circleAnnotation";let i=this.data,{width:c,height:y}=M(i.rect),B=this.svgFactory.create(c,y),T=i.borderStyle.width,H=this.svgFactory.createElement("svg:ellipse");return H.setAttribute("cx",c/2),H.setAttribute("cy",y/2),H.setAttribute("rx",c/2-T/2),H.setAttribute("ry",y/2-T/2),H.setAttribute("stroke-width",T||1),H.setAttribute("stroke","transparent"),H.setAttribute("fill","transparent"),B.appendChild(H),this.container.append(B),this._createPopup(H,i),this.container}}class S extends A{constructor(i){let c=!!(i.data.hasPopup||i.data.titleObj?.str||i.data.contentsObj?.str||i.data.richText?.str);super(i,{isRenderable:c,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;let i=this.data,{width:c,height:y}=M(i.rect),B=this.svgFactory.create(c,y),T=[];for(let $ of i.vertices){let q=$.x-i.rect[0],X=i.rect[3]-$.y;T.push(q+","+X)}T=T.join(" ");let H=this.svgFactory.createElement(this.svgElementName);return H.setAttribute("points",T),H.setAttribute("stroke-width",i.borderStyle.width||1),H.setAttribute("stroke","transparent"),H.setAttribute("fill","transparent"),B.appendChild(H),this.container.append(B),this._createPopup(H,i),this.container}}class O extends S{constructor(i){super(i),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class x extends A{constructor(i){let c=!!(i.data.hasPopup||i.data.titleObj?.str||i.data.contentsObj?.str||i.data.richText?.str);super(i,{isRenderable:c,ignoreBorder:!0})}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class I extends A{constructor(i){let c=!!(i.data.hasPopup||i.data.titleObj?.str||i.data.contentsObj?.str||i.data.richText?.str);super(i,{isRenderable:c,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;let i=this.data,{width:c,height:y}=M(i.rect),B=this.svgFactory.create(c,y);for(let T of i.inkLists){let H=[];for(let q of T){let X=q.x-i.rect[0],Y=i.rect[3]-q.y;H.push(`${X},${Y}`)}H=H.join(" ");let $=this.svgFactory.createElement(this.svgElementName);$.setAttribute("points",H),$.setAttribute("stroke-width",i.borderStyle.width||1),$.setAttribute("stroke","transparent"),$.setAttribute("fill","transparent"),this._createPopup($,i),B.appendChild($)}return this.container.append(B),this.container}}class U extends A{constructor(i){let c=!!(i.data.hasPopup||i.data.titleObj?.str||i.data.contentsObj?.str||i.data.richText?.str);super(i,{isRenderable:c,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}class V extends A{constructor(i){let c=!!(i.data.hasPopup||i.data.titleObj?.str||i.data.contentsObj?.str||i.data.richText?.str);super(i,{isRenderable:c,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}class z extends A{constructor(i){let c=!!(i.data.hasPopup||i.data.titleObj?.str||i.data.contentsObj?.str||i.data.richText?.str);super(i,{isRenderable:c,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}class G extends A{constructor(i){let c=!!(i.data.hasPopup||i.data.titleObj?.str||i.data.contentsObj?.str||i.data.richText?.str);super(i,{isRenderable:c,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}class d extends A{constructor(i){let c=!!(i.data.hasPopup||i.data.titleObj?.str||i.data.contentsObj?.str||i.data.richText?.str);super(i,{isRenderable:c,ignoreBorder:!0})}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class m extends A{constructor(i){super(i,{isRenderable:!0});let{filename:c,content:y}=this.data.file;this.filename=(0,u.getFilenameFromUrl)(c),this.content=y,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,id:(0,t.stringToPDFString)(c),filename:c,content:y})}render(){this.container.className="fileAttachmentAnnotation";let i=document.createElement("div");return i.style.height=this.container.style.height,i.style.width=this.container.style.width,i.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&(this.data.titleObj?.str||this.data.contentsObj?.str||this.data.richText)&&this._createPopup(i,this.data),this.container.appendChild(i),this.container}_download(){this.downloadManager?.openOrDownloadData(this.container,this.content,this.filename)}}class h{static render(i){let c=[],y=[];for(let T of i.annotations){if(!T)continue;let{width:H,height:$}=M(T.rect);if(!(H<=0||$<=0)){if(T.annotationType===t.AnnotationType.POPUP){y.push(T);continue}c.push(T)}}y.length&&c.push(...y);let B=i.div;for(let T of c){let H=b.create({data:T,layer:B,page:i.page,viewport:i.viewport,linkService:i.linkService,downloadManager:i.downloadManager,imageResourcesPath:i.imageResourcesPath||"",renderForms:i.renderForms!==!1,svgFactory:new u.DOMSVGFactory,annotationStorage:i.annotationStorage||new s.AnnotationStorage,enableScripting:i.enableScripting,hasJSActions:i.hasJSActions,fieldObjects:i.fieldObjects,mouseState:i.mouseState||{isDown:!1}});if(H.isRenderable){let $=H.render();if(T.hidden&&($.style.visibility="hidden"),Array.isArray($))for(let q of $)B.appendChild(q);else H instanceof o?B.prepend($):B.appendChild($)}}this.#e(B,i.annotationCanvasMap)}static update(i){let{page:c,viewport:y,annotations:B,annotationCanvasMap:T,div:H}=i,$=y.transform,q=`matrix(${$.join(",")})`,X,Y;for(let Q of B){let W=H.querySelectorAll(`[data-annotation-id="${Q.id}"]`);if(W)for(let Z of W)if(Q.hasOwnCanvas){let ne=t.Util.normalizeRect([Q.rect[0],c.view[3]-Q.rect[1]+c.view[1],Q.rect[2],c.view[3]-Q.rect[3]+c.view[1]]);if(!Y){X=Math.abs($[0]||$[1]);let re=$.slice();for(let le=0;le<4;le++)re[le]=Math.sign(re[le]);Y=`matrix(${re.join(",")})`}let te=ne[0]*X,ie=ne[1]*X;Z.style.left=`${te}px`,Z.style.top=`${ie}px`,Z.style.transformOrigin=`${-te}px ${-ie}px`,Z.style.transform=Y}else Z.style.transform=q}this.#e(H,T),H.hidden=!1}static#e(i,c){if(!!c){for(let[y,B]of c){let T=i.querySelector(`[data-annotation-id="${y}"]`);if(!T)continue;let{firstChild:H}=T;H.nodeName==="CANVAS"?T.replaceChild(B,H):T.insertBefore(B,H)}c.clear()}}}e.AnnotationLayer=h},(j,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ColorConverters=void 0;function n(u){return Math.floor(Math.max(0,Math.min(1,u))*255).toString(16).padStart(2,"0")}class t{static CMYK_G([s,k,_,p]){return["G",1-Math.min(1,.3*s+.59*_+.11*k+p)]}static G_CMYK([s]){return["CMYK",0,0,0,1-s]}static G_RGB([s]){return["RGB",s,s,s]}static G_HTML([s]){let k=n(s);return`#${k}${k}${k}`}static RGB_G([s,k,_]){return["G",.3*s+.59*k+.11*_]}static RGB_HTML([s,k,_]){let p=n(s),E=n(k),M=n(_);return`#${p}${E}${M}`}static T_HTML(){return"#00000000"}static CMYK_RGB([s,k,_,p]){return["RGB",1-Math.min(1,s+p),1-Math.min(1,_+p),1-Math.min(1,k+p)]}static CMYK_HTML(s){return this.RGB_HTML(this.CMYK_RGB(s))}static RGB_CMYK([s,k,_]){let p=1-s,E=1-k,M=1-_,b=Math.min(p,E,M);return["CMYK",p,E,M,b]}}e.ColorConverters=t},(j,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaLayer=void 0;var t=n(1),u=n(17);class s{static setupStorage(_,p,E,M,b){let A=M.getValue(p,{value:null});switch(E.name){case"textarea":if(A.value!==null&&(_.textContent=A.value),b==="print")break;_.addEventListener("input",w=>{M.setValue(p,{value:w.target.value})});break;case"input":if(E.attributes.type==="radio"||E.attributes.type==="checkbox"){if(A.value===E.attributes.xfaOn?_.setAttribute("checked",!0):A.value===E.attributes.xfaOff&&_.removeAttribute("checked"),b==="print")break;_.addEventListener("change",w=>{M.setValue(p,{value:w.target.checked?w.target.getAttribute("xfaOn"):w.target.getAttribute("xfaOff")})})}else{if(A.value!==null&&_.setAttribute("value",A.value),b==="print")break;_.addEventListener("input",w=>{M.setValue(p,{value:w.target.value})})}break;case"select":if(A.value!==null)for(let w of E.children)w.attributes.value===A.value&&(w.attributes.selected=!0);_.addEventListener("input",w=>{let g=w.target.options,P=g.selectedIndex===-1?"":g[g.selectedIndex].value;M.setValue(p,{value:P})});break}}static setAttributes({html:_,element:p,storage:E=null,intent:M,linkService:b}){let{attributes:A}=p,w=_ instanceof HTMLAnchorElement;A.type==="radio"&&(A.name=`${A.name}-${M}`);for(let[g,P]of Object.entries(A))if(!(P==null||g==="dataId"))if(g!=="style")if(g==="textContent")_.textContent=P;else if(g==="class")P.length&&_.setAttribute(g,P.join(" "));else{if(w&&(g==="href"||g==="newWindow"))continue;_.setAttribute(g,P)}else Object.assign(_.style,P);w&&(b.addLinkAttributes||(0,t.warn)("XfaLayer.setAttribute - missing `addLinkAttributes`-method on the `linkService`-instance."),b.addLinkAttributes?.(_,A.href,A.newWindow)),E&&A.dataId&&this.setupStorage(_,A.dataId,p,E)}static render(_){let p=_.annotationStorage,E=_.linkService,M=_.xfaHtml,b=_.intent||"display",A=document.createElement(M.name);M.attributes&&this.setAttributes({html:A,element:M,intent:b,linkService:E});let w=[[M,-1,A]],g=_.div;if(g.appendChild(A),_.viewport){let f=`matrix(${_.viewport.transform.join(",")})`;g.style.transform=f}b!=="richText"&&g.setAttribute("class","xfaLayer xfaFont");let P=[];for(;w.length>0;){let[f,L,R]=w[w.length-1];if(L+1===f.children.length){w.pop();continue}let F=f.children[++w[w.length-1][1]];if(F===null)continue;let{name:D}=F;if(D==="#text"){let l=document.createTextNode(F.value);P.push(l),R.appendChild(l);continue}let o;if(F?.attributes?.xmlns?o=document.createElementNS(F.attributes.xmlns,D):o=document.createElement(D),R.appendChild(o),F.attributes&&this.setAttributes({html:o,element:F,storage:p,intent:b,linkService:E}),F.children&&F.children.length>0)w.push([F,-1,o]);else if(F.value){let l=document.createTextNode(F.value);u.XfaText.shouldBuildText(D)&&P.push(l),o.appendChild(l)}}for(let f of g.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))f.setAttribute("readOnly",!0);return{textDivs:P}}static update(_){let p=`matrix(${_.viewport.transform.join(",")})`;_.div.style.transform=p,_.div.hidden=!1}}e.XfaLayer=s},(j,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.renderTextLayer=L;var t=n(1);let u=1e5,s=30,k=.8,_=new Map,p=/^\s+$/g;function E(R,F){let D=_.get(R);if(D)return D;F.save(),F.font=`${s}px ${R}`;let o=F.measureText(""),l=o.fontBoundingBoxAscent,N=Math.abs(o.fontBoundingBoxDescent);if(l){F.restore();let a=l/(l+N);return _.set(R,a),a}F.strokeStyle="red",F.clearRect(0,0,s,s),F.strokeText("g",0,0);let r=F.getImageData(0,0,s,s).data;N=0;for(let a=r.length-1-3;a>=0;a-=4)if(r[a]>0){N=Math.ceil(a/4/s);break}F.clearRect(0,0,s,s),F.strokeText("A",0,s),r=F.getImageData(0,0,s,s).data,l=0;for(let a=0,v=r.length;a<v;a+=4)if(r[a]>0){l=s-Math.floor(a/4/s);break}if(F.restore(),l){let a=l/(l+N);return _.set(R,a),a}return _.set(R,k),k}function M(R,F,D,o){let l=document.createElement("span"),N=R._enhanceTextSelection?{angle:0,canvasWidth:0,hasText:F.str!=="",hasEOL:F.hasEOL,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1}:{angle:0,canvasWidth:0,hasText:F.str!=="",hasEOL:F.hasEOL};R._textDivs.push(l);let r=t.Util.transform(R._viewport.transform,F.transform),a=Math.atan2(r[1],r[0]),v=D[F.fontName];v.vertical&&(a+=Math.PI/2);let S=Math.hypot(r[2],r[3]),O=S*E(v.fontFamily,o),x,I;a===0?(x=r[4],I=r[5]-O):(x=r[4]+O*Math.sin(a),I=r[5]-O*Math.cos(a)),l.style.left=`${x}px`,l.style.top=`${I}px`,l.style.fontSize=`${S}px`,l.style.fontFamily=v.fontFamily,l.setAttribute("role","presentation"),l.textContent=F.str,l.dir=F.dir,R._fontInspectorEnabled&&(l.dataset.fontName=F.fontName),a!==0&&(N.angle=a*(180/Math.PI));let U=!1;if(F.str.length>1||R._enhanceTextSelection&&p.test(F.str))U=!0;else if(F.str!==" "&&F.transform[0]!==F.transform[3]){let V=Math.abs(F.transform[0]),z=Math.abs(F.transform[3]);V!==z&&Math.max(V,z)/Math.min(V,z)>1.5&&(U=!0)}if(U&&(v.vertical?N.canvasWidth=F.height*R._viewport.scale:N.canvasWidth=F.width*R._viewport.scale),R._textDivProperties.set(l,N),R._textContentStream&&R._layoutText(l),R._enhanceTextSelection&&N.hasText){let V=1,z=0;a!==0&&(V=Math.cos(a),z=Math.sin(a));let G=(v.vertical?F.height:F.width)*R._viewport.scale,d=S,m,h;a!==0?(m=[V,z,-z,V,x,I],h=t.Util.getAxialAlignedBoundingBox([0,0,G,d],m)):h=[x,I,x+G,I+d],R._bounds.push({left:h[0],top:h[1],right:h[2],bottom:h[3],div:l,size:[G,d],m})}}function b(R){if(R._canceled)return;let F=R._textDivs,D=R._capability,o=F.length;if(o>u){R._renderingDone=!0,D.resolve();return}if(!R._textContentStream)for(let l=0;l<o;l++)R._layoutText(F[l]);R._renderingDone=!0,D.resolve()}function A(R,F,D){let o=0;for(let l=0;l<D;l++){let N=R[F++];N>0&&(o=o?Math.min(N,o):N)}return o}function w(R){let F=R._bounds,D=R._viewport,o=g(D.width,D.height,F);for(let l=0;l<o.length;l++){let N=F[l].div,r=R._textDivProperties.get(N);if(r.angle===0){r.paddingLeft=F[l].left-o[l].left,r.paddingTop=F[l].top-o[l].top,r.paddingRight=o[l].right-F[l].right,r.paddingBottom=o[l].bottom-F[l].bottom,R._textDivProperties.set(N,r);continue}let a=o[l],v=F[l],S=v.m,O=S[0],x=S[1],I=[[0,0],[0,v.size[1]],[v.size[0],0],v.size],U=new Float64Array(64);for(let z=0,G=I.length;z<G;z++){let d=t.Util.applyTransform(I[z],S);U[z+0]=O&&(a.left-d[0])/O,U[z+4]=x&&(a.top-d[1])/x,U[z+8]=O&&(a.right-d[0])/O,U[z+12]=x&&(a.bottom-d[1])/x,U[z+16]=x&&(a.left-d[0])/-x,U[z+20]=O&&(a.top-d[1])/O,U[z+24]=x&&(a.right-d[0])/-x,U[z+28]=O&&(a.bottom-d[1])/O,U[z+32]=O&&(a.left-d[0])/-O,U[z+36]=x&&(a.top-d[1])/-x,U[z+40]=O&&(a.right-d[0])/-O,U[z+44]=x&&(a.bottom-d[1])/-x,U[z+48]=x&&(a.left-d[0])/x,U[z+52]=O&&(a.top-d[1])/-O,U[z+56]=x&&(a.right-d[0])/x,U[z+60]=O&&(a.bottom-d[1])/-O}let V=1+Math.min(Math.abs(O),Math.abs(x));r.paddingLeft=A(U,32,16)/V,r.paddingTop=A(U,48,16)/V,r.paddingRight=A(U,0,16)/V,r.paddingBottom=A(U,16,16)/V,R._textDivProperties.set(N,r)}}function g(R,F,D){let o=D.map(function(N,r){return{x1:N.left,y1:N.top,x2:N.right,y2:N.bottom,index:r,x1New:void 0,x2New:void 0}});P(R,o);let l=new Array(D.length);for(let N of o){let r=N.index;l[r]={left:N.x1New,top:0,right:N.x2New,bottom:0}}D.map(function(N,r){let a=l[r],v=o[r];v.x1=N.top,v.y1=R-a.right,v.x2=N.bottom,v.y2=R-a.left,v.index=r,v.x1New=void 0,v.x2New=void 0}),P(F,o);for(let N of o){let r=N.index;l[r].top=N.x1New,l[r].bottom=N.x2New}return l}function P(R,F){F.sort(function(l,N){return l.x1-N.x1||l.index-N.index});let o=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}];for(let l of F){let N=0;for(;N<o.length&&o[N].end<=l.y1;)N++;let r=o.length-1;for(;r>=0&&o[r].start>=l.y2;)r--;let a,v,S,O,x=-1/0;for(S=N;S<=r;S++){a=o[S],v=a.boundary;let V;v.x2>l.x1?V=v.index>l.index?v.x1New:l.x1:v.x2New===void 0?V=(v.x2+l.x1)/2:V=v.x2New,V>x&&(x=V)}for(l.x1New=x,S=N;S<=r;S++)a=o[S],v=a.boundary,v.x2New===void 0?v.x2>l.x1?v.index>l.index&&(v.x2New=v.x2):v.x2New=x:v.x2New>x&&(v.x2New=Math.max(x,v.x2));let I=[],U=null;for(S=N;S<=r;S++){a=o[S],v=a.boundary;let V=v.x2>l.x2?v:l;U===V?I[I.length-1].end=a.end:(I.push({start:a.start,end:a.end,boundary:V}),U=V)}for(o[N].start<l.y1&&(I[0].start=l.y1,I.unshift({start:o[N].start,end:l.y1,boundary:o[N].boundary})),l.y2<o[r].end&&(I[I.length-1].end=l.y2,I.push({start:l.y2,end:o[r].end,boundary:o[r].boundary})),S=N;S<=r;S++){if(a=o[S],v=a.boundary,v.x2New!==void 0)continue;let V=!1;for(O=N-1;!V&&O>=0&&o[O].start>=v.y1;O--)V=o[O].boundary===v;for(O=r+1;!V&&O<o.length&&o[O].end<=v.y2;O++)V=o[O].boundary===v;for(O=0;!V&&O<I.length;O++)V=I[O].boundary===v;V||(v.x2New=x)}Array.prototype.splice.apply(o,[N,r-N+1].concat(I))}for(let l of o){let N=l.boundary;N.x2New===void 0&&(N.x2New=Math.max(R,N.x2))}}class f{constructor({textContent:F,textContentStream:D,container:o,viewport:l,textDivs:N,textContentItemsStr:r,enhanceTextSelection:a}){this._textContent=F,this._textContentStream=D,this._container=o,this._document=o.ownerDocument,this._viewport=l,this._textDivs=N||[],this._textContentItemsStr=r||[],this._enhanceTextSelection=!!a,this._fontInspectorEnabled=!!globalThis.FontInspector?.enabled,this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,t.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._capability.promise.finally(()=>{this._enhanceTextSelection||(this._textDivProperties=null),this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new t.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._renderTimer!==null&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))}_processItems(F,D){for(let o=0,l=F.length;o<l;o++){if(F[o].str===void 0){if(F[o].type==="beginMarkedContentProps"||F[o].type==="beginMarkedContent"){let N=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),F[o].id!==null&&this._container.setAttribute("id",`${F[o].id}`),N.appendChild(this._container)}else F[o].type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(F[o].str),M(this,F[o],D,this._layoutTextCtx)}}_layoutText(F){let D=this._textDivProperties.get(F),o="";if(D.canvasWidth!==0&&D.hasText){let{fontSize:l,fontFamily:N}=F.style;(l!==this._layoutTextLastFontSize||N!==this._layoutTextLastFontFamily)&&(this._layoutTextCtx.font=`${l} ${N}`,this._layoutTextLastFontSize=l,this._layoutTextLastFontFamily=N);let{width:r}=this._layoutTextCtx.measureText(F.textContent);if(r>0){let a=D.canvasWidth/r;this._enhanceTextSelection&&(D.scale=a),o=`scaleX(${a})`}}if(D.angle!==0&&(o=`rotate(${D.angle}deg) ${o}`),o.length>0&&(this._enhanceTextSelection&&(D.originalTransform=o),F.style.transform=o),D.hasText&&this._container.appendChild(F),D.hasEOL){let l=document.createElement("br");l.setAttribute("role","presentation"),this._container.appendChild(l)}}_render(F=0){let D=(0,t.createPromiseCapability)(),o=Object.create(null),l=this._document.createElement("canvas");if(l.height=l.width=s,l.mozOpaque=!0,this._layoutTextCtx=l.getContext("2d",{alpha:!1}),this._textContent){let N=this._textContent.items,r=this._textContent.styles;this._processItems(N,r),D.resolve()}else if(this._textContentStream){let N=()=>{this._reader.read().then(({value:r,done:a})=>{if(a){D.resolve();return}Object.assign(o,r.styles),this._processItems(r.items,o),N()},D.reject)};this._reader=this._textContentStream.getReader(),N()}else throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');D.promise.then(()=>{o=null,F?this._renderTimer=setTimeout(()=>{b(this),this._renderTimer=null},F):b(this)},this._capability.reject)}expandTextDivs(F=!1){if(!this._enhanceTextSelection||!this._renderingDone)return;this._bounds!==null&&(w(this),this._bounds=null);let D=[],o=[];for(let l=0,N=this._textDivs.length;l<N;l++){let r=this._textDivs[l],a=this._textDivProperties.get(r);!a.hasText||(F?(D.length=0,o.length=0,a.originalTransform&&D.push(a.originalTransform),a.paddingTop>0?(o.push(`${a.paddingTop}px`),D.push(`translateY(${-a.paddingTop}px)`)):o.push(0),a.paddingRight>0?o.push(`${a.paddingRight/a.scale}px`):o.push(0),a.paddingBottom>0?o.push(`${a.paddingBottom}px`):o.push(0),a.paddingLeft>0?(o.push(`${a.paddingLeft/a.scale}px`),D.push(`translateX(${-a.paddingLeft/a.scale}px)`)):o.push(0),r.style.padding=o.join(" "),D.length&&(r.style.transform=D.join(" "))):(r.style.padding=null,r.style.transform=a.originalTransform))}}}function L(R){let F=new f({textContent:R.textContent,textContentStream:R.textContentStream,container:R.container,viewport:R.viewport,textDivs:R.textDivs,textContentItemsStr:R.textContentItemsStr,enhanceTextSelection:R.enhanceTextSelection});return F._render(R.timeout),F}},(j,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SVGGraphics=void 0;var t=n(1),u=n(5),s=n(3);let k=class{constructor(){(0,t.unreachable)("Not implemented: SVGGraphics")}};e.SVGGraphics=k;{let P=function(o){let l=[],N=[];for(let r of o){if(r.fn==="save"){l.push({fnId:92,fn:"group",items:[]}),N.push(l),l=l[l.length-1].items;continue}r.fn==="restore"?l=N.pop():l.push(r)}return l},f=function(o){if(Number.isInteger(o))return o.toString();let l=o.toFixed(10),N=l.length-1;if(l[N]!=="0")return l;do N--;while(l[N]==="0");return l.substring(0,l[N]==="."?N:N+1)},L=function(o){if(o[4]===0&&o[5]===0){if(o[1]===0&&o[2]===0)return o[0]===1&&o[3]===1?"":`scale(${f(o[0])} ${f(o[3])})`;if(o[0]===o[3]&&o[1]===-o[2]){let l=Math.acos(o[0])*180/Math.PI;return`rotate(${f(l)})`}}else if(o[0]===1&&o[1]===0&&o[2]===0&&o[3]===1)return`translate(${f(o[4])} ${f(o[5])})`;return`matrix(${f(o[0])} ${f(o[1])} ${f(o[2])} ${f(o[3])} ${f(o[4])} ${f(o[5])})`},_={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},p="http://www.w3.org/XML/1998/namespace",E="http://www.w3.org/1999/xlink",M=["butt","round","square"],b=["miter","round","bevel"],A=function(o,l="",N=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!N)return URL.createObjectURL(new Blob([o],{type:l}));let r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a=`data:${l};base64,`;for(let v=0,S=o.length;v<S;v+=3){let O=o[v]&255,x=o[v+1]&255,I=o[v+2]&255,U=O>>2,V=(O&3)<<4|x>>4,z=v+1<S?(x&15)<<2|I>>6:64,G=v+2<S?I&63:64;a+=r[U]+r[V]+r[z]+r[G]}return a},w=function(){let o=new Uint8Array([137,80,78,71,13,10,26,10]),l=12,N=new Int32Array(256);for(let I=0;I<256;I++){let U=I;for(let V=0;V<8;V++)U&1?U=3988292384^U>>1&2147483647:U=U>>1&2147483647;N[I]=U}function r(I,U,V){let z=-1;for(let G=U;G<V;G++){let d=(z^I[G])&255,m=N[d];z=z>>>8^m}return z^-1}function a(I,U,V,z){let G=z,d=U.length;V[G]=d>>24&255,V[G+1]=d>>16&255,V[G+2]=d>>8&255,V[G+3]=d&255,G+=4,V[G]=I.charCodeAt(0)&255,V[G+1]=I.charCodeAt(1)&255,V[G+2]=I.charCodeAt(2)&255,V[G+3]=I.charCodeAt(3)&255,G+=4,V.set(U,G),G+=U.length;let m=r(V,z+4,G);V[G]=m>>24&255,V[G+1]=m>>16&255,V[G+2]=m>>8&255,V[G+3]=m&255}function v(I,U,V){let z=1,G=0;for(let d=U;d<V;++d)z=(z+(I[d]&255))%65521,G=(G+z)%65521;return G<<16|z}function S(I){if(!s.isNodeJS)return O(I);try{let U;parseInt(process.versions.node)>=8?U=I:U=Buffer.from(I);let V=hi().deflateSync(U,{level:9});return V instanceof Uint8Array?V:new Uint8Array(V)}catch(U){(0,t.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+U)}return O(I)}function O(I){let U=I.length,V=65535,z=Math.ceil(U/V),G=new Uint8Array(2+U+z*5+4),d=0;G[d++]=120,G[d++]=156;let m=0;for(;U>V;)G[d++]=0,G[d++]=255,G[d++]=255,G[d++]=0,G[d++]=0,G.set(I.subarray(m,m+V),d),d+=V,m+=V,U-=V;G[d++]=1,G[d++]=U&255,G[d++]=U>>8&255,G[d++]=~U&65535&255,G[d++]=(~U&65535)>>8&255,G.set(I.subarray(m),d),d+=I.length-m;let h=v(I,0,I.length);return G[d++]=h>>24&255,G[d++]=h>>16&255,G[d++]=h>>8&255,G[d++]=h&255,G}function x(I,U,V,z){let G=I.width,d=I.height,m,h,C,i=I.data;switch(U){case t.ImageKind.GRAYSCALE_1BPP:h=0,m=1,C=G+7>>3;break;case t.ImageKind.RGB_24BPP:h=2,m=8,C=G*3;break;case t.ImageKind.RGBA_32BPP:h=6,m=8,C=G*4;break;default:throw new Error("invalid format")}let c=new Uint8Array((1+C)*d),y=0,B=0;for(let Y=0;Y<d;++Y)c[y++]=0,c.set(i.subarray(B,B+C),y),B+=C,y+=C;if(U===t.ImageKind.GRAYSCALE_1BPP&&z){y=0;for(let Y=0;Y<d;Y++){y++;for(let Q=0;Q<C;Q++)c[y++]^=255}}let T=new Uint8Array([G>>24&255,G>>16&255,G>>8&255,G&255,d>>24&255,d>>16&255,d>>8&255,d&255,m,h,0,0,0]),H=S(c),$=o.length+l*3+T.length+H.length,q=new Uint8Array($),X=0;return q.set(o,X),X+=o.length,a("IHDR",T,q,X),X+=l+T.length,a("IDATA",H,q,X),X+=l+H.length,a("IEND",new Uint8Array(0),q,X),A(q,"image/png",V)}return function(U,V,z){let G=U.kind===void 0?t.ImageKind.GRAYSCALE_1BPP:U.kind;return x(U,G,V,z)}}();class g{constructor(){this.fontSizeScale=1,this.fontWeight=_.fontWeight,this.fontSize=0,this.textMatrix=t.IDENTITY_MATRIX,this.fontMatrix=t.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=t.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=_.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(l,N){this.x=l,this.y=N}}let R=0,F=0,D=0;e.SVGGraphics=k=class{constructor(o,l,N=!1){this.svgFactory=new u.DOMSVGFactory,this.current=new g,this.transformMatrix=t.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=o,this.objs=l,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!N,this._operatorIdMapping=[];for(let r in t.OPS)this._operatorIdMapping[t.OPS[r]]=r}save(){this.transformStack.push(this.transformMatrix);let o=this.current;this.extraStack.push(o),this.current=o.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(o){this.save(),this.executeOpTree(o),this.restore()}loadDependencies(o){let l=o.fnArray,N=o.argsArray;for(let r=0,a=l.length;r<a;r++)if(l[r]===t.OPS.dependency)for(let v of N[r]){let S=v.startsWith("g_")?this.commonObjs:this.objs,O=new Promise(x=>{S.get(v,x)});this.current.dependencies.push(O)}return Promise.all(this.current.dependencies)}transform(o,l,N,r,a,v){let S=[o,l,N,r,a,v];this.transformMatrix=t.Util.transform(this.transformMatrix,S),this.tgrp=null}getSVG(o,l){this.viewport=l;let N=this._initialize(l);return this.loadDependencies(o).then(()=>(this.transformMatrix=t.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(o)),N))}convertOpList(o){let l=this._operatorIdMapping,N=o.argsArray,r=o.fnArray,a=[];for(let v=0,S=r.length;v<S;v++){let O=r[v];a.push({fnId:O,fn:l[O],args:N[v]})}return P(a)}executeOpTree(o){for(let l of o){let N=l.fn,r=l.fnId,a=l.args;switch(r|0){case t.OPS.beginText:this.beginText();break;case t.OPS.dependency:break;case t.OPS.setLeading:this.setLeading(a);break;case t.OPS.setLeadingMoveText:this.setLeadingMoveText(a[0],a[1]);break;case t.OPS.setFont:this.setFont(a);break;case t.OPS.showText:this.showText(a[0]);break;case t.OPS.showSpacedText:this.showText(a[0]);break;case t.OPS.endText:this.endText();break;case t.OPS.moveText:this.moveText(a[0],a[1]);break;case t.OPS.setCharSpacing:this.setCharSpacing(a[0]);break;case t.OPS.setWordSpacing:this.setWordSpacing(a[0]);break;case t.OPS.setHScale:this.setHScale(a[0]);break;case t.OPS.setTextMatrix:this.setTextMatrix(a[0],a[1],a[2],a[3],a[4],a[5]);break;case t.OPS.setTextRise:this.setTextRise(a[0]);break;case t.OPS.setTextRenderingMode:this.setTextRenderingMode(a[0]);break;case t.OPS.setLineWidth:this.setLineWidth(a[0]);break;case t.OPS.setLineJoin:this.setLineJoin(a[0]);break;case t.OPS.setLineCap:this.setLineCap(a[0]);break;case t.OPS.setMiterLimit:this.setMiterLimit(a[0]);break;case t.OPS.setFillRGBColor:this.setFillRGBColor(a[0],a[1],a[2]);break;case t.OPS.setStrokeRGBColor:this.setStrokeRGBColor(a[0],a[1],a[2]);break;case t.OPS.setStrokeColorN:this.setStrokeColorN(a);break;case t.OPS.setFillColorN:this.setFillColorN(a);break;case t.OPS.shadingFill:this.shadingFill(a[0]);break;case t.OPS.setDash:this.setDash(a[0],a[1]);break;case t.OPS.setRenderingIntent:this.setRenderingIntent(a[0]);break;case t.OPS.setFlatness:this.setFlatness(a[0]);break;case t.OPS.setGState:this.setGState(a[0]);break;case t.OPS.fill:this.fill();break;case t.OPS.eoFill:this.eoFill();break;case t.OPS.stroke:this.stroke();break;case t.OPS.fillStroke:this.fillStroke();break;case t.OPS.eoFillStroke:this.eoFillStroke();break;case t.OPS.clip:this.clip("nonzero");break;case t.OPS.eoClip:this.clip("evenodd");break;case t.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case t.OPS.paintImageXObject:this.paintImageXObject(a[0]);break;case t.OPS.paintInlineImageXObject:this.paintInlineImageXObject(a[0]);break;case t.OPS.paintImageMaskXObject:this.paintImageMaskXObject(a[0]);break;case t.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(a[0],a[1]);break;case t.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case t.OPS.closePath:this.closePath();break;case t.OPS.closeStroke:this.closeStroke();break;case t.OPS.closeFillStroke:this.closeFillStroke();break;case t.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case t.OPS.nextLine:this.nextLine();break;case t.OPS.transform:this.transform(a[0],a[1],a[2],a[3],a[4],a[5]);break;case t.OPS.constructPath:this.constructPath(a[0],a[1]);break;case t.OPS.endPath:this.endPath();break;case 92:this.group(l.items);break;default:(0,t.warn)(`Unimplemented operator ${N}`);break}}}setWordSpacing(o){this.current.wordSpacing=o}setCharSpacing(o){this.current.charSpacing=o}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(o,l,N,r,a,v){let S=this.current;S.textMatrix=S.lineMatrix=[o,l,N,r,a,v],S.textMatrixScale=Math.hypot(o,l),S.x=S.lineX=0,S.y=S.lineY=0,S.xcoords=[],S.ycoords=[],S.tspan=this.svgFactory.createElement("svg:tspan"),S.tspan.setAttributeNS(null,"font-family",S.fontFamily),S.tspan.setAttributeNS(null,"font-size",`${f(S.fontSize)}px`),S.tspan.setAttributeNS(null,"y",f(-S.y)),S.txtElement=this.svgFactory.createElement("svg:text"),S.txtElement.appendChild(S.tspan)}beginText(){let o=this.current;o.x=o.lineX=0,o.y=o.lineY=0,o.textMatrix=t.IDENTITY_MATRIX,o.lineMatrix=t.IDENTITY_MATRIX,o.textMatrixScale=1,o.tspan=this.svgFactory.createElement("svg:tspan"),o.txtElement=this.svgFactory.createElement("svg:text"),o.txtgrp=this.svgFactory.createElement("svg:g"),o.xcoords=[],o.ycoords=[]}moveText(o,l){let N=this.current;N.x=N.lineX+=o,N.y=N.lineY+=l,N.xcoords=[],N.ycoords=[],N.tspan=this.svgFactory.createElement("svg:tspan"),N.tspan.setAttributeNS(null,"font-family",N.fontFamily),N.tspan.setAttributeNS(null,"font-size",`${f(N.fontSize)}px`),N.tspan.setAttributeNS(null,"y",f(-N.y))}showText(o){let l=this.current,N=l.font,r=l.fontSize;if(r===0)return;let a=l.fontSizeScale,v=l.charSpacing,S=l.wordSpacing,O=l.fontDirection,x=l.textHScale*O,I=N.vertical,U=I?1:-1,V=N.defaultVMetrics,z=r*l.fontMatrix[0],G=0;for(let h of o){if(h===null){G+=O*S;continue}else if(typeof h=="number"){G+=U*h*r/1e3;continue}let C=(h.isSpace?S:0)+v,i=h.fontChar,c,y,B=h.width;if(I){let H,$=h.vmetric||V;H=h.vmetric?$[1]:B*.5,H=-H*z;let q=$[2]*z;B=$?-$[0]:B,c=H/a,y=(G+q)/a}else c=G/a,y=0;(h.isInFont||N.missingFile)&&(l.xcoords.push(l.x+c),I&&l.ycoords.push(-l.y+y),l.tspan.textContent+=i);let T;I?T=B*z-C*O:T=B*z+C*O,G+=T}l.tspan.setAttributeNS(null,"x",l.xcoords.map(f).join(" ")),I?l.tspan.setAttributeNS(null,"y",l.ycoords.map(f).join(" ")):l.tspan.setAttributeNS(null,"y",f(-l.y)),I?l.y-=G:l.x+=G*x,l.tspan.setAttributeNS(null,"font-family",l.fontFamily),l.tspan.setAttributeNS(null,"font-size",`${f(l.fontSize)}px`),l.fontStyle!==_.fontStyle&&l.tspan.setAttributeNS(null,"font-style",l.fontStyle),l.fontWeight!==_.fontWeight&&l.tspan.setAttributeNS(null,"font-weight",l.fontWeight);let d=l.textRenderingMode&t.TextRenderingMode.FILL_STROKE_MASK;if(d===t.TextRenderingMode.FILL||d===t.TextRenderingMode.FILL_STROKE?(l.fillColor!==_.fillColor&&l.tspan.setAttributeNS(null,"fill",l.fillColor),l.fillAlpha<1&&l.tspan.setAttributeNS(null,"fill-opacity",l.fillAlpha)):l.textRenderingMode===t.TextRenderingMode.ADD_TO_PATH?l.tspan.setAttributeNS(null,"fill","transparent"):l.tspan.setAttributeNS(null,"fill","none"),d===t.TextRenderingMode.STROKE||d===t.TextRenderingMode.FILL_STROKE){let h=1/(l.textMatrixScale||1);this._setStrokeAttributes(l.tspan,h)}let m=l.textMatrix;l.textRise!==0&&(m=m.slice(),m[5]+=l.textRise),l.txtElement.setAttributeNS(null,"transform",`${L(m)} scale(${f(x)}, -1)`),l.txtElement.setAttributeNS(p,"xml:space","preserve"),l.txtElement.appendChild(l.tspan),l.txtgrp.appendChild(l.txtElement),this._ensureTransformGroup().appendChild(l.txtElement)}setLeadingMoveText(o,l){this.setLeading(-l),this.moveText(o,l)}addFontStyle(o){if(!o.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.appendChild(this.cssStyle));let l=A(o.data,o.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${o.loadedName}"; src: url(${l}); }
`}setFont(o){let l=this.current,N=this.commonObjs.get(o[0]),r=o[1];l.font=N,this.embedFonts&&!N.missingFile&&!this.embeddedFonts[N.loadedName]&&(this.addFontStyle(N),this.embeddedFonts[N.loadedName]=N),l.fontMatrix=N.fontMatrix||t.FONT_IDENTITY_MATRIX;let a="normal";N.black?a="900":N.bold&&(a="bold");let v=N.italic?"italic":"normal";r<0?(r=-r,l.fontDirection=-1):l.fontDirection=1,l.fontSize=r,l.fontFamily=N.loadedName,l.fontWeight=a,l.fontStyle=v,l.tspan=this.svgFactory.createElement("svg:tspan"),l.tspan.setAttributeNS(null,"y",f(-l.y)),l.xcoords=[],l.ycoords=[]}endText(){let o=this.current;o.textRenderingMode&t.TextRenderingMode.ADD_TO_PATH_FLAG&&o.txtElement?.hasChildNodes()&&(o.element=o.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(o){o>0&&(this.current.lineWidth=o)}setLineCap(o){this.current.lineCap=M[o]}setLineJoin(o){this.current.lineJoin=b[o]}setMiterLimit(o){this.current.miterLimit=o}setStrokeAlpha(o){this.current.strokeAlpha=o}setStrokeRGBColor(o,l,N){this.current.strokeColor=t.Util.makeHexColor(o,l,N)}setFillAlpha(o){this.current.fillAlpha=o}setFillRGBColor(o,l,N){this.current.fillColor=t.Util.makeHexColor(o,l,N),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(o){this.current.strokeColor=this._makeColorN_Pattern(o)}setFillColorN(o){this.current.fillColor=this._makeColorN_Pattern(o)}shadingFill(o){let l=this.viewport.width,N=this.viewport.height,r=t.Util.inverseTransform(this.transformMatrix),a=t.Util.applyTransform([0,0],r),v=t.Util.applyTransform([0,N],r),S=t.Util.applyTransform([l,0],r),O=t.Util.applyTransform([l,N],r),x=Math.min(a[0],v[0],S[0],O[0]),I=Math.min(a[1],v[1],S[1],O[1]),U=Math.max(a[0],v[0],S[0],O[0]),V=Math.max(a[1],v[1],S[1],O[1]),z=this.svgFactory.createElement("svg:rect");z.setAttributeNS(null,"x",x),z.setAttributeNS(null,"y",I),z.setAttributeNS(null,"width",U-x),z.setAttributeNS(null,"height",V-I),z.setAttributeNS(null,"fill",this._makeShadingPattern(o)),this.current.fillAlpha<1&&z.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().appendChild(z)}_makeColorN_Pattern(o){return o[0]==="TilingPattern"?this._makeTilingPattern(o):this._makeShadingPattern(o)}_makeTilingPattern(o){let l=o[1],N=o[2],r=o[3]||t.IDENTITY_MATRIX,[a,v,S,O]=o[4],x=o[5],I=o[6],U=o[7],V=`shading${D++}`,[z,G,d,m]=t.Util.normalizeRect([...t.Util.applyTransform([a,v],r),...t.Util.applyTransform([S,O],r)]),[h,C]=t.Util.singularValueDecompose2dScale(r),i=x*h,c=I*C,y=this.svgFactory.createElement("svg:pattern");y.setAttributeNS(null,"id",V),y.setAttributeNS(null,"patternUnits","userSpaceOnUse"),y.setAttributeNS(null,"width",i),y.setAttributeNS(null,"height",c),y.setAttributeNS(null,"x",`${z}`),y.setAttributeNS(null,"y",`${G}`);let B=this.svg,T=this.transformMatrix,H=this.current.fillColor,$=this.current.strokeColor,q=this.svgFactory.create(d-z,m-G);if(this.svg=q,this.transformMatrix=r,U===2){let X=t.Util.makeHexColor(...l);this.current.fillColor=X,this.current.strokeColor=X}return this.executeOpTree(this.convertOpList(N)),this.svg=B,this.transformMatrix=T,this.current.fillColor=H,this.current.strokeColor=$,y.appendChild(q.childNodes[0]),this.defs.appendChild(y),`url(#${V})`}_makeShadingPattern(o){switch(typeof o=="string"&&(o=this.objs.get(o)),o[0]){case"RadialAxial":let l=`shading${D++}`,N=o[3],r;switch(o[1]){case"axial":let a=o[4],v=o[5];r=this.svgFactory.createElement("svg:linearGradient"),r.setAttributeNS(null,"id",l),r.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),r.setAttributeNS(null,"x1",a[0]),r.setAttributeNS(null,"y1",a[1]),r.setAttributeNS(null,"x2",v[0]),r.setAttributeNS(null,"y2",v[1]);break;case"radial":let S=o[4],O=o[5],x=o[6],I=o[7];r=this.svgFactory.createElement("svg:radialGradient"),r.setAttributeNS(null,"id",l),r.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),r.setAttributeNS(null,"cx",O[0]),r.setAttributeNS(null,"cy",O[1]),r.setAttributeNS(null,"r",I),r.setAttributeNS(null,"fx",S[0]),r.setAttributeNS(null,"fy",S[1]),r.setAttributeNS(null,"fr",x);break;default:throw new Error(`Unknown RadialAxial type: ${o[1]}`)}for(let a of N){let v=this.svgFactory.createElement("svg:stop");v.setAttributeNS(null,"offset",a[0]),v.setAttributeNS(null,"stop-color",a[1]),r.appendChild(v)}return this.defs.appendChild(r),`url(#${l})`;case"Mesh":return(0,t.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${o[0]}`)}}setDash(o,l){this.current.dashArray=o,this.current.dashPhase=l}constructPath(o,l){let N=this.current,r=N.x,a=N.y,v=[],S=0;for(let O of o)switch(O|0){case t.OPS.rectangle:r=l[S++],a=l[S++];let x=l[S++],I=l[S++],U=r+x,V=a+I;v.push("M",f(r),f(a),"L",f(U),f(a),"L",f(U),f(V),"L",f(r),f(V),"Z");break;case t.OPS.moveTo:r=l[S++],a=l[S++],v.push("M",f(r),f(a));break;case t.OPS.lineTo:r=l[S++],a=l[S++],v.push("L",f(r),f(a));break;case t.OPS.curveTo:r=l[S+4],a=l[S+5],v.push("C",f(l[S]),f(l[S+1]),f(l[S+2]),f(l[S+3]),f(r),f(a)),S+=6;break;case t.OPS.curveTo2:v.push("C",f(r),f(a),f(l[S]),f(l[S+1]),f(l[S+2]),f(l[S+3])),r=l[S+2],a=l[S+3],S+=4;break;case t.OPS.curveTo3:r=l[S+2],a=l[S+3],v.push("C",f(l[S]),f(l[S+1]),f(r),f(a),f(r),f(a)),S+=4;break;case t.OPS.closePath:v.push("Z");break}v=v.join(" "),N.path&&o.length>0&&o[0]!==t.OPS.rectangle&&o[0]!==t.OPS.moveTo?v=N.path.getAttributeNS(null,"d")+v:(N.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().appendChild(N.path)),N.path.setAttributeNS(null,"d",v),N.path.setAttributeNS(null,"fill","none"),N.element=N.path,N.setCurrentPoint(r,a)}endPath(){let o=this.current;if(o.path=null,!this.pendingClip)return;if(!o.element){this.pendingClip=null;return}let l=`clippath${R++}`,N=this.svgFactory.createElement("svg:clipPath");N.setAttributeNS(null,"id",l),N.setAttributeNS(null,"transform",L(this.transformMatrix));let r=o.element.cloneNode(!0);if(this.pendingClip==="evenodd"?r.setAttributeNS(null,"clip-rule","evenodd"):r.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,N.appendChild(r),this.defs.appendChild(N),o.activeClipUrl){o.clipGroup=null;for(let a of this.extraStack)a.clipGroup=null;N.setAttributeNS(null,"clip-path",o.activeClipUrl)}o.activeClipUrl=`url(#${l})`,this.tgrp=null}clip(o){this.pendingClip=o}closePath(){let o=this.current;if(o.path){let l=`${o.path.getAttributeNS(null,"d")}Z`;o.path.setAttributeNS(null,"d",l)}}setLeading(o){this.current.leading=-o}setTextRise(o){this.current.textRise=o}setTextRenderingMode(o){this.current.textRenderingMode=o}setHScale(o){this.current.textHScale=o/100}setRenderingIntent(o){}setFlatness(o){}setGState(o){for(let[l,N]of o)switch(l){case"LW":this.setLineWidth(N);break;case"LC":this.setLineCap(N);break;case"LJ":this.setLineJoin(N);break;case"ML":this.setMiterLimit(N);break;case"D":this.setDash(N[0],N[1]);break;case"RI":this.setRenderingIntent(N);break;case"FL":this.setFlatness(N);break;case"Font":this.setFont(N);break;case"CA":this.setStrokeAlpha(N);break;case"ca":this.setFillAlpha(N);break;default:(0,t.warn)(`Unimplemented graphic state operator ${l}`);break}}fill(){let o=this.current;o.element&&(o.element.setAttributeNS(null,"fill",o.fillColor),o.element.setAttributeNS(null,"fill-opacity",o.fillAlpha),this.endPath())}stroke(){let o=this.current;o.element&&(this._setStrokeAttributes(o.element),o.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(o,l=1){let N=this.current,r=N.dashArray;l!==1&&r.length>0&&(r=r.map(function(a){return l*a})),o.setAttributeNS(null,"stroke",N.strokeColor),o.setAttributeNS(null,"stroke-opacity",N.strokeAlpha),o.setAttributeNS(null,"stroke-miterlimit",f(N.miterLimit)),o.setAttributeNS(null,"stroke-linecap",N.lineCap),o.setAttributeNS(null,"stroke-linejoin",N.lineJoin),o.setAttributeNS(null,"stroke-width",f(l*N.lineWidth)+"px"),o.setAttributeNS(null,"stroke-dasharray",r.map(f).join(" ")),o.setAttributeNS(null,"stroke-dashoffset",f(l*N.dashPhase)+"px")}eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){let o=this.svgFactory.createElement("svg:rect");o.setAttributeNS(null,"x","0"),o.setAttributeNS(null,"y","0"),o.setAttributeNS(null,"width","1px"),o.setAttributeNS(null,"height","1px"),o.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().appendChild(o)}paintImageXObject(o){let l=o.startsWith("g_")?this.commonObjs.get(o):this.objs.get(o);if(!l){(0,t.warn)(`Dependent image with object ID ${o} is not ready yet`);return}this.paintInlineImageXObject(l)}paintInlineImageXObject(o,l){let N=o.width,r=o.height,a=w(o,this.forceDataSchema,!!l),v=this.svgFactory.createElement("svg:rect");v.setAttributeNS(null,"x","0"),v.setAttributeNS(null,"y","0"),v.setAttributeNS(null,"width",f(N)),v.setAttributeNS(null,"height",f(r)),this.current.element=v,this.clip("nonzero");let S=this.svgFactory.createElement("svg:image");S.setAttributeNS(E,"xlink:href",a),S.setAttributeNS(null,"x","0"),S.setAttributeNS(null,"y",f(-r)),S.setAttributeNS(null,"width",f(N)+"px"),S.setAttributeNS(null,"height",f(r)+"px"),S.setAttributeNS(null,"transform",`scale(${f(1/N)} ${f(-1/r)})`),l?l.appendChild(S):this._ensureTransformGroup().appendChild(S)}paintImageMaskXObject(o){let l=this.current,N=o.width,r=o.height,a=l.fillColor;l.maskId=`mask${F++}`;let v=this.svgFactory.createElement("svg:mask");v.setAttributeNS(null,"id",l.maskId);let S=this.svgFactory.createElement("svg:rect");S.setAttributeNS(null,"x","0"),S.setAttributeNS(null,"y","0"),S.setAttributeNS(null,"width",f(N)),S.setAttributeNS(null,"height",f(r)),S.setAttributeNS(null,"fill",a),S.setAttributeNS(null,"mask",`url(#${l.maskId})`),this.defs.appendChild(v),this._ensureTransformGroup().appendChild(S),this.paintInlineImageXObject(o,v)}paintFormXObjectBegin(o,l){if(Array.isArray(o)&&o.length===6&&this.transform(o[0],o[1],o[2],o[3],o[4],o[5]),l){let N=l[2]-l[0],r=l[3]-l[1],a=this.svgFactory.createElement("svg:rect");a.setAttributeNS(null,"x",l[0]),a.setAttributeNS(null,"y",l[1]),a.setAttributeNS(null,"width",f(N)),a.setAttributeNS(null,"height",f(r)),this.current.element=a,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(o){let l=this.svgFactory.create(o.width,o.height),N=this.svgFactory.createElement("svg:defs");l.appendChild(N),this.defs=N;let r=this.svgFactory.createElement("svg:g");return r.setAttributeNS(null,"transform",L(o.transform)),l.appendChild(r),this.svg=r,l}_ensureClipGroup(){if(!this.current.clipGroup){let o=this.svgFactory.createElement("svg:g");o.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.appendChild(o),this.current.clipGroup=o}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",L(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().appendChild(this.tgrp):this.svg.appendChild(this.tgrp)),this.tgrp}}}},(j,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNodeStream=void 0;var t=n(1),u=n(24);let s=$t(),k=di(),_=ui(),p=fi(),E=/^file:\/\/\/[a-zA-Z]:\//;function M(F){let D=p.parse(F);return D.protocol==="file:"||D.host?D:/^[a-z]:[/\\]/i.test(F)?p.parse(`file:///${F}`):(D.host||(D.protocol="file:"),D)}class b{constructor(D){this.source=D,this.url=M(D.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&D.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,t.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new L(this):new P(this),this._fullRequestReader}getRangeReader(D,o){if(o<=this._progressiveDataLength)return null;let l=this.isFsUrl?new R(this,D,o):new f(this,D,o);return this._rangeRequestReaders.push(l),l}cancelAllRequests(D){this._fullRequestReader&&this._fullRequestReader.cancel(D);for(let o of this._rangeRequestReaders.slice(0))o.cancel(D)}}e.PDFNodeStream=b;class A{constructor(D){this._url=D.url,this._done=!1,this._storedError=null,this.onProgress=null;let o=D.source;this._contentLength=o.length,this._loaded=0,this._filename=null,this._disableRange=o.disableRange||!1,this._rangeChunkSize=o.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!o.disableStream,this._isRangeSupported=!o.disableRange,this._readableStream=null,this._readCapability=(0,t.createPromiseCapability)(),this._headersCapability=(0,t.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;let D=this._readableStream.read();return D===null?(this._readCapability=(0,t.createPromiseCapability)(),this.read()):(this._loaded+=D.length,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(D).buffer,done:!1})}cancel(D){if(!this._readableStream){this._error(D);return}this._readableStream.destroy(D)}_error(D){this._storedError=D,this._readCapability.resolve()}_setReadableStream(D){this._readableStream=D,D.on("readable",()=>{this._readCapability.resolve()}),D.on("end",()=>{D.destroy(),this._done=!0,this._readCapability.resolve()}),D.on("error",o=>{this._error(o)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new t.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class w{constructor(D){this._url=D.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,t.createPromiseCapability)();let o=D.source;this._isStreamingSupported=!o.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;let D=this._readableStream.read();return D===null?(this._readCapability=(0,t.createPromiseCapability)(),this.read()):(this._loaded+=D.length,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(D).buffer,done:!1})}cancel(D){if(!this._readableStream){this._error(D);return}this._readableStream.destroy(D)}_error(D){this._storedError=D,this._readCapability.resolve()}_setReadableStream(D){this._readableStream=D,D.on("readable",()=>{this._readCapability.resolve()}),D.on("end",()=>{D.destroy(),this._done=!0,this._readCapability.resolve()}),D.on("error",o=>{this._error(o)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function g(F,D){return{protocol:F.protocol,auth:F.auth,host:F.hostname,port:F.port,path:F.path,method:"GET",headers:D}}class P extends A{constructor(D){super(D);let o=l=>{if(l.statusCode===404){let v=new t.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=v,this._headersCapability.reject(v);return}this._headersCapability.resolve(),this._setReadableStream(l);let N=v=>this._readableStream.headers[v.toLowerCase()],{allowRangeRequests:r,suggestedLength:a}=(0,u.validateRangeRequestCapabilities)({getResponseHeader:N,isHttp:D.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=r,this._contentLength=a||this._contentLength,this._filename=(0,u.extractFilenameFromHeader)(N)};this._request=null,this._url.protocol==="http:"?this._request=k.request(g(this._url,D.httpHeaders),o):this._request=_.request(g(this._url,D.httpHeaders),o),this._request.on("error",l=>{this._storedError=l,this._headersCapability.reject(l)}),this._request.end()}}class f extends w{constructor(D,o,l){super(D),this._httpHeaders={};for(let r in D.httpHeaders){let a=D.httpHeaders[r];typeof a>"u"||(this._httpHeaders[r]=a)}this._httpHeaders.Range=`bytes=${o}-${l-1}`;let N=r=>{if(r.statusCode===404){let a=new t.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=a;return}this._setReadableStream(r)};this._request=null,this._url.protocol==="http:"?this._request=k.request(g(this._url,this._httpHeaders),N):this._request=_.request(g(this._url,this._httpHeaders),N),this._request.on("error",r=>{this._storedError=r}),this._request.end()}}class L extends A{constructor(D){super(D);let o=decodeURIComponent(this._url.path);E.test(this._url.href)&&(o=o.replace(/^\//,"")),s.lstat(o,(l,N)=>{if(l){l.code==="ENOENT"&&(l=new t.MissingPDFException(`Missing PDF "${o}".`)),this._storedError=l,this._headersCapability.reject(l);return}this._contentLength=N.size,this._setReadableStream(s.createReadStream(o)),this._headersCapability.resolve()})}}class R extends w{constructor(D,o,l){super(D);let N=decodeURIComponent(this._url.path);E.test(this._url.href)&&(N=N.replace(/^\//,"")),this._setReadableStream(s.createReadStream(N,{start:o,end:l-1}))}}},(j,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createResponseStatusError=p,e.extractFilenameFromHeader=_,e.validateRangeRequestCapabilities=k,e.validateResponseStatus=E;var t=n(1),u=n(25),s=n(5);function k({getResponseHeader:M,isHttp:b,rangeChunkSize:A,disableRange:w}){(0,t.assert)(A>0,"Range chunk size must be larger than zero");let g={allowRangeRequests:!1,suggestedLength:void 0},P=parseInt(M("Content-Length"),10);return!Number.isInteger(P)||(g.suggestedLength=P,P<=2*A)||w||!b||M("Accept-Ranges")!=="bytes"||(M("Content-Encoding")||"identity")!=="identity"||(g.allowRangeRequests=!0),g}function _(M){let b=M("Content-Disposition");if(b){let A=(0,u.getFilenameFromContentDispositionHeader)(b);if(A.includes("%"))try{A=decodeURIComponent(A)}catch{}if((0,s.isPdfFile)(A))return A}return null}function p(M,b){return M===404||M===0&&b.startsWith("file:")?new t.MissingPDFException('Missing PDF "'+b+'".'):new t.UnexpectedResponseException(`Unexpected server response (${M}) while retrieving PDF "${b}".`,M)}function E(M){return M===200||M===206}},(j,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getFilenameFromContentDispositionHeader=u;var t=n(1);function u(s){let k=!0,_=p("filename\\*","i").exec(s);if(_){_=_[1];let P=A(_);return P=unescape(P),P=w(P),P=g(P),M(P)}if(_=b(s),_){let P=g(_);return M(P)}if(_=p("filename","i").exec(s),_){_=_[1];let P=A(_);return P=g(P),M(P)}function p(P,f){return new RegExp("(?:^|;)\\s*"+P+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',f)}function E(P,f){if(P){if(!/^[\x00-\xFF]+$/.test(f))return f;try{let L=new TextDecoder(P,{fatal:!0}),R=(0,t.stringToBytes)(f);f=L.decode(R),k=!1}catch{}}return f}function M(P){return k&&/[\x80-\xff]/.test(P)&&(P=E("utf-8",P),k&&(P=E("iso-8859-1",P))),P}function b(P){let f=[],L,R=p("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(L=R.exec(P))!==null;){let[,D,o,l]=L;if(D=parseInt(D,10),D in f){if(D===0)break;continue}f[D]=[o,l]}let F=[];for(let D=0;D<f.length&&D in f;++D){let[o,l]=f[D];l=A(l),o&&(l=unescape(l),D===0&&(l=w(l))),F.push(l)}return F.join("")}function A(P){if(P.startsWith('"')){let f=P.slice(1).split('\\"');for(let L=0;L<f.length;++L){let R=f[L].indexOf('"');R!==-1&&(f[L]=f[L].slice(0,R),f.length=L+1),f[L]=f[L].replace(/\\(.)/g,"$1")}P=f.join('"')}return P}function w(P){let f=P.indexOf("'");if(f===-1)return P;let L=P.slice(0,f),F=P.slice(f+1).replace(/^[^']*'/,"");return E(L,F)}function g(P){return!P.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(P)?P:P.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(f,L,R,F){if(R==="q"||R==="Q")return F=F.replace(/_/g," "),F=F.replace(/=([0-9a-fA-F]{2})/g,function(D,o){return String.fromCharCode(parseInt(o,16))}),E(L,F);try{F=atob(F)}catch{}return E(L,F)})}return""}},(j,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNetworkStream=void 0;var t=n(1),u=n(24);let s=200,k=206;function _(A){let w=A.response;return typeof w!="string"?w:(0,t.stringToBytes)(w).buffer}class p{constructor(w,g={}){this.url=w,this.isHttp=/^https?:/i.test(w),this.httpHeaders=this.isHttp&&g.httpHeaders||Object.create(null),this.withCredentials=g.withCredentials||!1,this.getXhr=g.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(w,g,P){let f={begin:w,end:g};for(let L in P)f[L]=P[L];return this.request(f)}requestFull(w){return this.request(w)}request(w){let g=this.getXhr(),P=this.currXhrId++,f=this.pendingRequests[P]={xhr:g};g.open("GET",this.url),g.withCredentials=this.withCredentials;for(let L in this.httpHeaders){let R=this.httpHeaders[L];typeof R>"u"||g.setRequestHeader(L,R)}return this.isHttp&&"begin"in w&&"end"in w?(g.setRequestHeader("Range",`bytes=${w.begin}-${w.end-1}`),f.expectedStatus=k):f.expectedStatus=s,g.responseType="arraybuffer",w.onError&&(g.onerror=function(L){w.onError(g.status)}),g.onreadystatechange=this.onStateChange.bind(this,P),g.onprogress=this.onProgress.bind(this,P),f.onHeadersReceived=w.onHeadersReceived,f.onDone=w.onDone,f.onError=w.onError,f.onProgress=w.onProgress,g.send(null),P}onProgress(w,g){let P=this.pendingRequests[w];!P||P.onProgress?.(g)}onStateChange(w,g){let P=this.pendingRequests[w];if(!P)return;let f=P.xhr;if(f.readyState>=2&&P.onHeadersReceived&&(P.onHeadersReceived(),delete P.onHeadersReceived),f.readyState!==4||!(w in this.pendingRequests))return;if(delete this.pendingRequests[w],f.status===0&&this.isHttp){P.onError?.(f.status);return}let L=f.status||s;if(!(L===s&&P.expectedStatus===k)&&L!==P.expectedStatus){P.onError?.(f.status);return}let F=_(f);if(L===k){let D=f.getResponseHeader("Content-Range"),o=/bytes (\d+)-(\d+)\/(\d+)/.exec(D);P.onDone({begin:parseInt(o[1],10),chunk:F})}else F?P.onDone({begin:0,chunk:F}):P.onError?.(f.status)}getRequestXhr(w){return this.pendingRequests[w].xhr}isPendingRequest(w){return w in this.pendingRequests}abortRequest(w){let g=this.pendingRequests[w].xhr;delete this.pendingRequests[w],g.abort()}}class E{constructor(w){this._source=w,this._manager=new p(w.url,{httpHeaders:w.httpHeaders,withCredentials:w.withCredentials}),this._rangeChunkSize=w.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(w){let g=this._rangeRequestReaders.indexOf(w);g>=0&&this._rangeRequestReaders.splice(g,1)}getFullReader(){return(0,t.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new M(this._manager,this._source),this._fullRequestReader}getRangeReader(w,g){let P=new b(this._manager,w,g);return P.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(P),P}cancelAllRequests(w){this._fullRequestReader?.cancel(w);for(let g of this._rangeRequestReaders.slice(0))g.cancel(w)}}e.PDFNetworkStream=E;class M{constructor(w,g){this._manager=w;let P={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=g.url,this._fullRequestId=w.requestFull(P),this._headersReceivedCapability=(0,t.createPromiseCapability)(),this._disableRange=g.disableRange||!1,this._contentLength=g.length,this._rangeChunkSize=g.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){let w=this._fullRequestId,g=this._manager.getRequestXhr(w),P=R=>g.getResponseHeader(R),{allowRangeRequests:f,suggestedLength:L}=(0,u.validateRangeRequestCapabilities)({getResponseHeader:P,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});f&&(this._isRangeSupported=!0),this._contentLength=L||this._contentLength,this._filename=(0,u.extractFilenameFromHeader)(P),this._isRangeSupported&&this._manager.abortRequest(w),this._headersReceivedCapability.resolve()}_onDone(w){if(w&&(this._requests.length>0?this._requests.shift().resolve({value:w.chunk,done:!1}):this._cachedChunks.push(w.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(let g of this._requests)g.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(w){this._storedError=(0,u.createResponseStatusError)(w,this._url),this._headersReceivedCapability.reject(this._storedError);for(let g of this._requests)g.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(w){this.onProgress?.({loaded:w.loaded,total:w.lengthComputable?w.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};let w=(0,t.createPromiseCapability)();return this._requests.push(w),w.promise}cancel(w){this._done=!0,this._headersReceivedCapability.reject(w);for(let g of this._requests)g.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class b{constructor(w,g,P){this._manager=w;let f={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=w.url,this._requestId=w.requestRange(g,P,f),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(w){let g=w.chunk;this._requests.length>0?this._requests.shift().resolve({value:g,done:!1}):this._queuedChunk=g,this._done=!0;for(let P of this._requests)P.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(w){this._storedError=(0,u.createResponseStatusError)(w,this._url);for(let g of this._requests)g.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(w){this.isStreamingSupported||this.onProgress?.({loaded:w.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){let g=this._queuedChunk;return this._queuedChunk=null,{value:g,done:!1}}if(this._done)return{value:void 0,done:!0};let w=(0,t.createPromiseCapability)();return this._requests.push(w),w.promise}cancel(w){this._done=!0;for(let g of this._requests)g.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(j,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFFetchStream=void 0;var t=n(1),u=n(24);function s(M,b,A){return{method:"GET",headers:M,signal:A?.signal,mode:"cors",credentials:b?"include":"same-origin",redirect:"follow"}}function k(M){let b=new Headers;for(let A in M){let w=M[A];typeof w>"u"||b.append(A,w)}return b}class _{constructor(b){this.source=b,this.isHttp=/^https?:/i.test(b.url),this.httpHeaders=this.isHttp&&b.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,t.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new p(this),this._fullRequestReader}getRangeReader(b,A){if(A<=this._progressiveDataLength)return null;let w=new E(this,b,A);return this._rangeRequestReaders.push(w),w}cancelAllRequests(b){this._fullRequestReader&&this._fullRequestReader.cancel(b);for(let A of this._rangeRequestReaders.slice(0))A.cancel(b)}}e.PDFFetchStream=_;class p{constructor(b){this._stream=b,this._reader=null,this._loaded=0,this._filename=null;let A=b.source;this._withCredentials=A.withCredentials||!1,this._contentLength=A.length,this._headersCapability=(0,t.createPromiseCapability)(),this._disableRange=A.disableRange||!1,this._rangeChunkSize=A.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),typeof AbortController<"u"&&(this._abortController=new AbortController),this._isStreamingSupported=!A.disableStream,this._isRangeSupported=!A.disableRange,this._headers=k(this._stream.httpHeaders);let w=A.url;fetch(w,s(this._headers,this._withCredentials,this._abortController)).then(g=>{if(!(0,u.validateResponseStatus)(g.status))throw(0,u.createResponseStatusError)(g.status,w);this._reader=g.body.getReader(),this._headersCapability.resolve();let P=R=>g.headers.get(R),{allowRangeRequests:f,suggestedLength:L}=(0,u.validateRangeRequestCapabilities)({getResponseHeader:P,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=f,this._contentLength=L||this._contentLength,this._filename=(0,u.extractFilenameFromHeader)(P),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new t.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;let{value:b,done:A}=await this._reader.read();return A?{value:b,done:A}:(this._loaded+=b.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(b).buffer,done:!1})}cancel(b){this._reader&&this._reader.cancel(b),this._abortController&&this._abortController.abort()}}class E{constructor(b,A,w){this._stream=b,this._reader=null,this._loaded=0;let g=b.source;this._withCredentials=g.withCredentials||!1,this._readCapability=(0,t.createPromiseCapability)(),this._isStreamingSupported=!g.disableStream,typeof AbortController<"u"&&(this._abortController=new AbortController),this._headers=k(this._stream.httpHeaders),this._headers.append("Range",`bytes=${A}-${w-1}`);let P=g.url;fetch(P,s(this._headers,this._withCredentials,this._abortController)).then(f=>{if(!(0,u.validateResponseStatus)(f.status))throw(0,u.createResponseStatusError)(f.status,P);this._readCapability.resolve(),this._reader=f.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;let{value:b,done:A}=await this._reader.read();return A?{value:b,done:A}:(this._loaded+=b.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(b).buffer,done:!1})}cancel(b){this._reader&&this._reader.cancel(b),this._abortController&&this._abortController.abort()}}}],__webpack_module_cache__={};function __w_pdfjs_require__(j){var e=__webpack_module_cache__[j];if(e!==void 0)return e.exports;var n=__webpack_module_cache__[j]={exports:{}};return __webpack_modules__[j](n,n.exports,__w_pdfjs_require__),n.exports}var __webpack_exports__={};return(()=>{var j=__webpack_exports__;Object.defineProperty(j,"__esModule",{value:!0}),Object.defineProperty(j,"AnnotationLayer",{enumerable:!0,get:function(){return u.AnnotationLayer}}),Object.defineProperty(j,"AnnotationMode",{enumerable:!0,get:function(){return e.AnnotationMode}}),Object.defineProperty(j,"CMapCompressionType",{enumerable:!0,get:function(){return e.CMapCompressionType}}),Object.defineProperty(j,"GlobalWorkerOptions",{enumerable:!0,get:function(){return s.GlobalWorkerOptions}}),Object.defineProperty(j,"InvalidPDFException",{enumerable:!0,get:function(){return e.InvalidPDFException}}),Object.defineProperty(j,"LoopbackPort",{enumerable:!0,get:function(){return n.LoopbackPort}}),Object.defineProperty(j,"MissingPDFException",{enumerable:!0,get:function(){return e.MissingPDFException}}),Object.defineProperty(j,"OPS",{enumerable:!0,get:function(){return e.OPS}}),Object.defineProperty(j,"PDFDataRangeTransport",{enumerable:!0,get:function(){return n.PDFDataRangeTransport}}),Object.defineProperty(j,"PDFDateString",{enumerable:!0,get:function(){return t.PDFDateString}}),Object.defineProperty(j,"PDFWorker",{enumerable:!0,get:function(){return n.PDFWorker}}),Object.defineProperty(j,"PasswordResponses",{enumerable:!0,get:function(){return e.PasswordResponses}}),Object.defineProperty(j,"PermissionFlag",{enumerable:!0,get:function(){return e.PermissionFlag}}),Object.defineProperty(j,"PixelsPerInch",{enumerable:!0,get:function(){return t.PixelsPerInch}}),Object.defineProperty(j,"RenderingCancelledException",{enumerable:!0,get:function(){return t.RenderingCancelledException}}),Object.defineProperty(j,"SVGGraphics",{enumerable:!0,get:function(){return p.SVGGraphics}}),Object.defineProperty(j,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return e.UNSUPPORTED_FEATURES}}),Object.defineProperty(j,"UnexpectedResponseException",{enumerable:!0,get:function(){return e.UnexpectedResponseException}}),Object.defineProperty(j,"Util",{enumerable:!0,get:function(){return e.Util}}),Object.defineProperty(j,"VerbosityLevel",{enumerable:!0,get:function(){return e.VerbosityLevel}}),Object.defineProperty(j,"XfaLayer",{enumerable:!0,get:function(){return E.XfaLayer}}),Object.defineProperty(j,"build",{enumerable:!0,get:function(){return n.build}}),Object.defineProperty(j,"createPromiseCapability",{enumerable:!0,get:function(){return e.createPromiseCapability}}),Object.defineProperty(j,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return e.createValidAbsoluteUrl}}),Object.defineProperty(j,"getDocument",{enumerable:!0,get:function(){return n.getDocument}}),Object.defineProperty(j,"getFilenameFromUrl",{enumerable:!0,get:function(){return t.getFilenameFromUrl}}),Object.defineProperty(j,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return t.getPdfFilenameFromUrl}}),Object.defineProperty(j,"getXfaPageViewport",{enumerable:!0,get:function(){return t.getXfaPageViewport}}),Object.defineProperty(j,"isPdfFile",{enumerable:!0,get:function(){return t.isPdfFile}}),Object.defineProperty(j,"loadScript",{enumerable:!0,get:function(){return t.loadScript}}),Object.defineProperty(j,"renderTextLayer",{enumerable:!0,get:function(){return _.renderTextLayer}}),Object.defineProperty(j,"shadow",{enumerable:!0,get:function(){return e.shadow}}),Object.defineProperty(j,"version",{enumerable:!0,get:function(){return n.version}});var e=__w_pdfjs_require__(1),n=__w_pdfjs_require__(4),t=__w_pdfjs_require__(5),u=__w_pdfjs_require__(18),s=__w_pdfjs_require__(12),k=__w_pdfjs_require__(3),_=__w_pdfjs_require__(21),p=__w_pdfjs_require__(22),E=__w_pdfjs_require__(20);let M="2.13.216",b="399a0ec60";if(k.isNodeJS){let{PDFNodeStream:A}=__w_pdfjs_require__(23);(0,n.setPDFNetworkStreamFactory)(w=>new A(w))}else{let{PDFNetworkStream:A}=__w_pdfjs_require__(26),{PDFFetchStream:w}=__w_pdfjs_require__(27);(0,n.setPDFNetworkStreamFactory)(g=>(0,t.isValidFetchUrl)(g.url)?new w(g):new A(g))}})(),__webpack_exports__})()})});var pi=Ge((ft,Ht)=>{(function(e,n){typeof ft=="object"&&typeof Ht=="object"?Ht.exports=n():typeof define=="function"&&define.amd?define("pdfjs-dist/web/pdf_viewer",[],n):typeof ft=="object"?ft["pdfjs-dist/web/pdf_viewer"]=n():e["pdfjs-dist/web/pdf_viewer"]=e.pdfjsViewer=n()})(ft,function(){return(()=>{"use strict";var j=[,(u,s,k)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DefaultXfaLayerFactory=s.DefaultTextLayerFactory=s.DefaultStructTreeLayerFactory=s.DefaultAnnotationLayerFactory=void 0;var _=k(2),p=k(4),E=k(5),M=k(7),b=k(8),A=k(9);class w{createAnnotationLayerBuilder(R,F,D=null,o="",l=!0,N=p.NullL10n,r=!1,a=null,v=null,S=null,O=null){return new _.AnnotationLayerBuilder({pageDiv:R,pdfPage:F,imageResourcesPath:o,renderForms:l,linkService:new E.SimpleLinkService,l10n:N,annotationStorage:D,enableScripting:r,hasJSActionsPromise:a,fieldObjectsPromise:S,mouseState:v,annotationCanvasMap:O})}}s.DefaultAnnotationLayerFactory=w;class g{createStructTreeLayerBuilder(R){return new M.StructTreeLayerBuilder({pdfPage:R})}}s.DefaultStructTreeLayerFactory=g;class P{createTextLayerBuilder(R,F,D,o=!1,l,N){return new b.TextLayerBuilder({textLayerDiv:R,pageIndex:F,viewport:D,enhanceTextSelection:o,eventBus:l,highlighter:N})}}s.DefaultTextLayerFactory=P;class f{createXfaLayerBuilder(R,F,D=null,o=null){return new A.XfaLayerBuilder({pageDiv:R,pdfPage:F,annotationStorage:D,linkService:new E.SimpleLinkService,xfaHtml:o})}}s.DefaultXfaLayerFactory=f},(u,s,k)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.AnnotationLayerBuilder=void 0;var _=k(3),p=k(4);class E{constructor({pageDiv:b,pdfPage:A,linkService:w,downloadManager:g,annotationStorage:P=null,imageResourcesPath:f="",renderForms:L=!0,l10n:R=p.NullL10n,enableScripting:F=!1,hasJSActionsPromise:D=null,fieldObjectsPromise:o=null,mouseState:l=null,annotationCanvasMap:N=null}){this.pageDiv=b,this.pdfPage=A,this.linkService=w,this.downloadManager=g,this.imageResourcesPath=f,this.renderForms=L,this.l10n=R,this.annotationStorage=P,this.enableScripting=F,this._hasJSActionsPromise=D,this._fieldObjectsPromise=o,this._mouseState=l,this._annotationCanvasMap=N,this.div=null,this._cancelled=!1}async render(b,A="display"){let[w,g=!1,P=null]=await Promise.all([this.pdfPage.getAnnotations({intent:A}),this._hasJSActionsPromise,this._fieldObjectsPromise]);if(this._cancelled||w.length===0)return;let f={viewport:b.clone({dontFlip:!0}),div:this.div,annotations:w,page:this.pdfPage,imageResourcesPath:this.imageResourcesPath,renderForms:this.renderForms,linkService:this.linkService,downloadManager:this.downloadManager,annotationStorage:this.annotationStorage,enableScripting:this.enableScripting,hasJSActions:g,fieldObjects:P,mouseState:this._mouseState,annotationCanvasMap:this._annotationCanvasMap};this.div?_.AnnotationLayer.update(f):(this.div=document.createElement("div"),this.div.className="annotationLayer",this.pageDiv.appendChild(this.div),f.div=this.div,_.AnnotationLayer.render(f),this.l10n.translate(this.div))}cancel(){this._cancelled=!0}hide(){!this.div||(this.div.hidden=!0)}}s.AnnotationLayerBuilder=E},u=>{let s;typeof window<"u"&&window["pdfjs-dist/build/pdf"]?s=window["pdfjs-dist/build/pdf"]:s=yt(),u.exports=s},(u,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.NullL10n=void 0,s.fixupLangCode=E,s.getL10nFallback=_;let k={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} \xD7 {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} \xD7 {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",print_progress_percent:"{{progress}}%","toggle_sidebar.title":"Toggle Sidebar","toggle_sidebar_notification2.title":"Toggle Sidebar (document contains outline/attachments/layers)",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",error_version_info:"PDF.js v{{version}} (build: {{build}})",error_message:"Message: {{message}}",error_stack:"Stack: {{stack}}",error_file:"File: {{file}}",error_line:"Line: {{line}}",rendering_error:"An error occurred while rendering the page.",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading:"Loading\u2026",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts."};function _(A,w){switch(A){case"find_match_count":A=`find_match_count[${w.total===1?"one":"other"}]`;break;case"find_match_count_limit":A=`find_match_count_limit[${w.limit===1?"one":"other"}]`;break}return k[A]||""}let p={en:"en-US",es:"es-ES",fy:"fy-NL",ga:"ga-IE",gu:"gu-IN",hi:"hi-IN",hy:"hy-AM",nb:"nb-NO",ne:"ne-NP",nn:"nn-NO",pa:"pa-IN",pt:"pt-PT",sv:"sv-SE",zh:"zh-CN"};function E(A){return p[A?.toLowerCase()]||A}function M(A,w){return w?A.replace(/\{\{\s*(\w+)\s*\}\}/g,(g,P)=>P in w?w[P]:"{{"+P+"}}"):A}let b={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(A,w=null,g=_(A,w)){return M(g,w)},async translate(A){}};s.NullL10n=b},(u,s,k)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.SimpleLinkService=s.PDFLinkService=s.LinkTarget=void 0;var _=k(6);let p="noopener noreferrer nofollow",E={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};s.LinkTarget=E;function M(w,{url:g,target:P,rel:f,enabled:L=!0}={}){if(!g||typeof g!="string")throw new Error('A valid "url" parameter must provided.');let R=(0,_.removeNullCharacters)(g);L?w.href=w.title=R:(w.href="",w.title=`Disabled: ${R}`,w.onclick=()=>!1);let F="";switch(P){case E.NONE:break;case E.SELF:F="_self";break;case E.BLANK:F="_blank";break;case E.PARENT:F="_parent";break;case E.TOP:F="_top";break}w.target=F,w.rel=typeof f=="string"?f:p}class b{#e=new Map;constructor({eventBus:g,externalLinkTarget:P=null,externalLinkRel:f=null,ignoreDestinationZoom:L=!1}={}){this.eventBus=g,this.externalLinkTarget=P,this.externalLinkRel=f,this.externalLinkEnabled=!0,this._ignoreDestinationZoom=L,this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null}setDocument(g,P=null){this.baseUrl=P,this.pdfDocument=g,this.#e.clear()}setViewer(g){this.pdfViewer=g}setHistory(g){this.pdfHistory=g}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return this.pdfViewer.currentPageNumber}set page(g){this.pdfViewer.currentPageNumber=g}get rotation(){return this.pdfViewer.pagesRotation}set rotation(g){this.pdfViewer.pagesRotation=g}#t(g,P=null,f){let L=f[0],R;if(typeof L=="object"&&L!==null){if(R=this._cachedPageNumber(L),!R){this.pdfDocument.getPageIndex(L).then(F=>{this.cachePageRef(F+1,L),this.#t(g,P,f)}).catch(()=>{console.error(`PDFLinkService.#goToDestinationHelper: "${L}" is not a valid page reference, for dest="${g}".`)});return}}else if(Number.isInteger(L))R=L+1;else{console.error(`PDFLinkService.#goToDestinationHelper: "${L}" is not a valid destination reference, for dest="${g}".`);return}if(!R||R<1||R>this.pagesCount){console.error(`PDFLinkService.#goToDestinationHelper: "${R}" is not a valid page number, for dest="${g}".`);return}this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.push({namedDest:P,explicitDest:f,pageNumber:R})),this.pdfViewer.scrollPageIntoView({pageNumber:R,destArray:f,ignoreDestinationZoom:this._ignoreDestinationZoom})}async goToDestination(g){if(!this.pdfDocument)return;let P,f;if(typeof g=="string"?(P=g,f=await this.pdfDocument.getDestination(g)):(P=null,f=await g),!Array.isArray(f)){console.error(`PDFLinkService.goToDestination: "${f}" is not a valid destination array, for dest="${g}".`);return}this.#t(g,P,f)}goToPage(g){if(!this.pdfDocument)return;let P=typeof g=="string"&&this.pdfViewer.pageLabelToPageNumber(g)||g|0;if(!(Number.isInteger(P)&&P>0&&P<=this.pagesCount)){console.error(`PDFLinkService.goToPage: "${g}" is not a valid page.`);return}this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.pushPage(P)),this.pdfViewer.scrollPageIntoView({pageNumber:P})}addLinkAttributes(g,P,f=!1){M(g,{url:P,target:f?E.BLANK:this.externalLinkTarget,rel:this.externalLinkRel,enabled:this.externalLinkEnabled})}getDestinationHash(g){if(typeof g=="string"){if(g.length>0)return this.getAnchorUrl("#"+escape(g))}else if(Array.isArray(g)){let P=JSON.stringify(g);if(P.length>0)return this.getAnchorUrl("#"+escape(P))}return this.getAnchorUrl("")}getAnchorUrl(g){return(this.baseUrl||"")+g}setHash(g){if(!this.pdfDocument)return;let P,f;if(g.includes("=")){let L=(0,_.parseQueryString)(g);if(L.has("search")&&this.eventBus.dispatch("findfromurlhash",{source:this,query:L.get("search").replace(/"/g,""),phraseSearch:L.get("phrase")==="true"}),L.has("page")&&(P=L.get("page")|0||1),L.has("zoom")){let R=L.get("zoom").split(","),F=R[0],D=parseFloat(F);F.includes("Fit")?F==="Fit"||F==="FitB"?f=[null,{name:F}]:F==="FitH"||F==="FitBH"||F==="FitV"||F==="FitBV"?f=[null,{name:F},R.length>1?R[1]|0:null]:F==="FitR"?R.length!==5?console.error('PDFLinkService.setHash: Not enough parameters for "FitR".'):f=[null,{name:F},R[1]|0,R[2]|0,R[3]|0,R[4]|0]:console.error(`PDFLinkService.setHash: "${F}" is not a valid zoom value.`):f=[null,{name:"XYZ"},R.length>1?R[1]|0:null,R.length>2?R[2]|0:null,D?D/100:F]}f?this.pdfViewer.scrollPageIntoView({pageNumber:P||this.page,destArray:f,allowNegativeOffset:!0}):P&&(this.page=P),L.has("pagemode")&&this.eventBus.dispatch("pagemode",{source:this,mode:L.get("pagemode")}),L.has("nameddest")&&this.goToDestination(L.get("nameddest"))}else{f=unescape(g);try{f=JSON.parse(f),Array.isArray(f)||(f=f.toString())}catch{}if(typeof f=="string"||b.#i(f)){this.goToDestination(f);return}console.error(`PDFLinkService.setHash: "${unescape(g)}" is not a valid destination.`)}}executeNamedAction(g){switch(g){case"GoBack":this.pdfHistory?.back();break;case"GoForward":this.pdfHistory?.forward();break;case"NextPage":this.pdfViewer.nextPage();break;case"PrevPage":this.pdfViewer.previousPage();break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1;break;default:break}this.eventBus.dispatch("namedaction",{source:this,action:g})}cachePageRef(g,P){if(!P)return;let f=P.gen===0?`${P.num}R`:`${P.num}R${P.gen}`;this.#e.set(f,g)}_cachedPageNumber(g){if(!g)return null;let P=g.gen===0?`${g.num}R`:`${g.num}R${g.gen}`;return this.#e.get(P)||null}isPageVisible(g){return this.pdfViewer.isPageVisible(g)}isPageCached(g){return this.pdfViewer.isPageCached(g)}static#i(g){if(!Array.isArray(g))return!1;let P=g.length;if(P<2)return!1;let f=g[0];if(!(typeof f=="object"&&Number.isInteger(f.num)&&Number.isInteger(f.gen))&&!(Number.isInteger(f)&&f>=0))return!1;let L=g[1];if(!(typeof L=="object"&&typeof L.name=="string"))return!1;let R=!0;switch(L.name){case"XYZ":if(P!==5)return!1;break;case"Fit":case"FitB":return P===2;case"FitH":case"FitBH":case"FitV":case"FitBV":if(P!==3)return!1;break;case"FitR":if(P!==6)return!1;R=!1;break;default:return!1}for(let F=2;F<P;F++){let D=g[F];if(!(typeof D=="number"||R&&D===null))return!1}return!0}}s.PDFLinkService=b;class A{constructor(){this.externalLinkEnabled=!0}get pagesCount(){return 0}get page(){return 0}set page(g){}get rotation(){return 0}set rotation(g){}async goToDestination(g){}goToPage(g){}addLinkAttributes(g,P,f=!1){M(g,{url:P,enabled:this.externalLinkEnabled})}getDestinationHash(g){return"#"}getAnchorUrl(g){return"#"}setHash(g){}executeNamedAction(g){}cachePageRef(g,P){}isPageVisible(g){return!0}isPageCached(g){return!0}}s.SimpleLinkService=A},(u,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.animationStarted=s.VERTICAL_PADDING=s.UNKNOWN_SCALE=s.TextLayerMode=s.SpreadMode=s.SidebarView=s.ScrollMode=s.SCROLLBAR_PADDING=s.RenderingStates=s.RendererType=s.ProgressBar=s.PresentationModeState=s.OutputScale=s.MIN_SCALE=s.MAX_SCALE=s.MAX_AUTO_SCALE=s.DEFAULT_SCALE_VALUE=s.DEFAULT_SCALE_DELTA=s.DEFAULT_SCALE=s.AutoPrintRegExp=void 0,s.apiPageLayoutToViewerModes=Y,s.apiPageModeToSidebarView=Q,s.approximateFraction=V,s.backtrackBeforeAllVisibleElements=d,s.binarySearchFirstItem=U,s.getActiveOrFocusedElement=X,s.getPageSizeInches=G,s.getVisibleElements=m,s.isPortraitOrientation=T,s.isValidRotation=c,s.isValidScrollMode=y,s.isValidSpreadMode=B,s.noContextMenuHandler=h,s.normalizeWheelEventDelta=i,s.normalizeWheelEventDirection=C,s.parseQueryString=S,s.removeNullCharacters=I,s.roundToDivide=z,s.scrollIntoView=a,s.watchScroll=v;let k="auto";s.DEFAULT_SCALE_VALUE=k;let _=1;s.DEFAULT_SCALE=_;let p=1.1;s.DEFAULT_SCALE_DELTA=p;let E=.1;s.MIN_SCALE=E;let M=10;s.MAX_SCALE=M;let b=0;s.UNKNOWN_SCALE=b;let A=1.25;s.MAX_AUTO_SCALE=A;let w=40;s.SCROLLBAR_PADDING=w;let g=5;s.VERTICAL_PADDING=g;let P="--loadingBar-end-offset",f={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3};s.RenderingStates=f;let L={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3};s.PresentationModeState=L;let R={UNKNOWN:-1,NONE:0,THUMBS:1,OUTLINE:2,ATTACHMENTS:3,LAYERS:4};s.SidebarView=R;let F={CANVAS:"canvas",SVG:"svg"};s.RendererType=F;let D={DISABLE:0,ENABLE:1,ENABLE_ENHANCE:2};s.TextLayerMode=D;let o={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2,PAGE:3};s.ScrollMode=o;let l={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2};s.SpreadMode=l;let N=/\bprint\s*\(/;s.AutoPrintRegExp=N;class r{constructor(){let Z=window.devicePixelRatio||1;this.sx=Z,this.sy=Z}get scaled(){return this.sx!==1||this.sy!==1}}s.OutputScale=r;function a(W,Z,ne=!1){let te=W.offsetParent;if(!te){console.error("offsetParent is not set -- cannot scroll");return}let ie=W.offsetTop+W.clientTop,re=W.offsetLeft+W.clientLeft;for(;te.clientHeight===te.scrollHeight&&te.clientWidth===te.scrollWidth||ne&&(te.classList.contains("markedContent")||getComputedStyle(te).overflow==="hidden");)if(ie+=te.offsetTop,re+=te.offsetLeft,te=te.offsetParent,!te)return;Z&&(Z.top!==void 0&&(ie+=Z.top),Z.left!==void 0&&(re+=Z.left,te.scrollLeft=re)),te.scrollTop=ie}function v(W,Z){let ne=function(re){ie||(ie=window.requestAnimationFrame(function(){ie=null;let se=W.scrollLeft,ae=te.lastX;se!==ae&&(te.right=se>ae),te.lastX=se;let pe=W.scrollTop,ue=te.lastY;pe!==ue&&(te.down=pe>ue),te.lastY=pe,Z(te)}))},te={right:!0,down:!0,lastX:W.scrollLeft,lastY:W.scrollTop,_eventHandler:ne},ie=null;return W.addEventListener("scroll",ne,!0),te}function S(W){let Z=new Map;for(let[ne,te]of new URLSearchParams(W))Z.set(ne.toLowerCase(),te);return Z}let O=/\x00/g,x=/[\x01-\x1F]/g;function I(W,Z=!1){return typeof W!="string"?(console.error("The argument must be a string."),W):(Z&&(W=W.replace(x," ")),W.replace(O,""))}function U(W,Z,ne=0){let te=ne,ie=W.length-1;if(ie<0||!Z(W[ie]))return W.length;if(Z(W[te]))return te;for(;te<ie;){let re=te+ie>>1,le=W[re];Z(le)?ie=re:te=re+1}return te}function V(W){if(Math.floor(W)===W)return[W,1];let Z=1/W,ne=8;if(Z>ne)return[1,ne];if(Math.floor(Z)===Z)return[1,Z];let te=W>1?Z:W,ie=0,re=1,le=1,se=1;for(;;){let pe=ie+le,ue=re+se;if(ue>ne)break;te<=pe/ue?(le=pe,se=ue):(ie=pe,re=ue)}let ae;return te-ie/re<le/se-te?ae=te===W?[ie,re]:[re,ie]:ae=te===W?[le,se]:[se,le],ae}function z(W,Z){let ne=W%Z;return ne===0?W:Math.round(W-ne+Z)}function G({view:W,userUnit:Z,rotate:ne}){let[te,ie,re,le]=W,se=ne%180!==0,ae=(re-te)/72*Z,pe=(le-ie)/72*Z;return{width:se?pe:ae,height:se?ae:pe}}function d(W,Z,ne){if(W<2)return W;let te=Z[W].div,ie=te.offsetTop+te.clientTop;ie>=ne&&(te=Z[W-1].div,ie=te.offsetTop+te.clientTop);for(let re=W-2;re>=0&&(te=Z[re].div,!(te.offsetTop+te.clientTop+te.clientHeight<=ie));--re)W=re;return W}function m({scrollEl:W,views:Z,sortByVisibility:ne=!1,horizontal:te=!1,rtl:ie=!1}){let re=W.scrollTop,le=re+W.clientHeight,se=W.scrollLeft,ae=se+W.clientWidth;function pe(ye){let ve=ye.div;return ve.offsetTop+ve.clientTop+ve.clientHeight>re}function ue(ye){let ve=ye.div,Re=ve.offsetLeft+ve.clientLeft,ee=Re+ve.clientWidth;return ie?Re<ae:ee>se}let _e=[],ke=new Set,we=Z.length,Ce=U(Z,te?ue:pe);Ce>0&&Ce<we&&!te&&(Ce=d(Ce,Z,re));let be=te?ae:-1;for(let ye=Ce;ye<we;ye++){let ve=Z[ye],Re=ve.div,ee=Re.offsetLeft+Re.clientLeft,K=Re.offsetTop+Re.clientTop,J=Re.clientWidth,oe=Re.clientHeight,ce=ee+J,de=K+oe;if(be===-1)de>=le&&(be=de);else if((te?ee:K)>be)break;if(de<=re||K>=le||ce<=se||ee>=ae)continue;let fe=Math.max(0,re-K)+Math.max(0,de-le),Fe=Math.max(0,se-ee)+Math.max(0,ce-ae),Oe=(oe-fe)/oe,Ne=(J-Fe)/J,Ee=Oe*Ne*100|0;_e.push({id:ve.id,x:ee,y:K,view:ve,percent:Ee,widthPercent:Ne*100|0}),ke.add(ve.id)}let Le=_e[0],ge=_e[_e.length-1];return ne&&_e.sort(function(ye,ve){let Re=ye.percent-ve.percent;return Math.abs(Re)>.001?-Re:ye.id-ve.id}),{first:Le,last:ge,views:_e,ids:ke}}function h(W){W.preventDefault()}function C(W){let Z=Math.hypot(W.deltaX,W.deltaY),ne=Math.atan2(W.deltaY,W.deltaX);return-.25*Math.PI<ne&&ne<.75*Math.PI&&(Z=-Z),Z}function i(W){let Z=C(W),ne=0,te=1,ie=30,re=30;return W.deltaMode===ne?Z/=ie*re:W.deltaMode===te&&(Z/=re),Z}function c(W){return Number.isInteger(W)&&W%90===0}function y(W){return Number.isInteger(W)&&Object.values(o).includes(W)&&W!==o.UNKNOWN}function B(W){return Number.isInteger(W)&&Object.values(l).includes(W)&&W!==l.UNKNOWN}function T(W){return W.width<=W.height}let H=new Promise(function(W){window.requestAnimationFrame(W)});s.animationStarted=H;function $(W,Z,ne){return Math.min(Math.max(W,Z),ne)}class q{constructor(Z,{height:ne,width:te,units:ie}={}){this.visible=!0,this.div=document.querySelector(Z+" .progress"),this.bar=this.div.parentNode,this.height=ne||100,this.width=te||100,this.units=ie||"%",this.div.style.height=this.height+this.units,this.percent=0}_updateBar(){if(this._indeterminate){this.div.classList.add("indeterminate"),this.div.style.width=this.width+this.units;return}this.div.classList.remove("indeterminate");let Z=this.width*this._percent/100;this.div.style.width=Z+this.units}get percent(){return this._percent}set percent(Z){this._indeterminate=isNaN(Z),this._percent=$(Z,0,100),this._updateBar()}setWidth(Z){if(!Z)return;let te=Z.parentNode.offsetWidth-Z.offsetWidth;te>0&&document.documentElement.style.setProperty(P,`${te}px`)}hide(){!this.visible||(this.visible=!1,this.bar.classList.add("hidden"))}show(){this.visible||(this.visible=!0,this.bar.classList.remove("hidden"))}}s.ProgressBar=q;function X(){let W=document,Z=W.activeElement||W.querySelector(":focus");for(;Z?.shadowRoot;)W=Z.shadowRoot,Z=W.activeElement||W.querySelector(":focus");return Z}function Y(W){let Z=o.VERTICAL,ne=l.NONE;switch(W){case"SinglePage":Z=o.PAGE;break;case"OneColumn":break;case"TwoPageLeft":Z=o.PAGE;case"TwoColumnLeft":ne=l.ODD;break;case"TwoPageRight":Z=o.PAGE;case"TwoColumnRight":ne=l.EVEN;break}return{scrollMode:Z,spreadMode:ne}}function Q(W){switch(W){case"UseNone":return R.NONE;case"UseThumbs":return R.THUMBS;case"UseOutlines":return R.OUTLINE;case"UseAttachments":return R.ATTACHMENTS;case"UseOC":return R.LAYERS}return R.NONE}},(u,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.StructTreeLayerBuilder=void 0;let k={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},_=/^H(\d+)$/;class p{constructor({pdfPage:M}){this.pdfPage=M}render(M){return this._walk(M)}_setAttributes(M,b){M.alt!==void 0&&b.setAttribute("aria-label",M.alt),M.id!==void 0&&b.setAttribute("aria-owns",M.id),M.lang!==void 0&&b.setAttribute("lang",M.lang)}_walk(M){if(!M)return null;let b=document.createElement("span");if("role"in M){let{role:A}=M,w=A.match(_);w?(b.setAttribute("role","heading"),b.setAttribute("aria-level",w[1])):k[A]&&b.setAttribute("role",k[A])}if(this._setAttributes(M,b),M.children)if(M.children.length===1&&"id"in M.children[0])this._setAttributes(M.children[0],b);else for(let A of M.children)b.appendChild(this._walk(A));return b}}s.StructTreeLayerBuilder=p},(u,s,k)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TextLayerBuilder=void 0;var _=k(3);let p=300;class E{constructor({textLayerDiv:b,eventBus:A,pageIndex:w,viewport:g,highlighter:P=null,enhanceTextSelection:f=!1}){this.textLayerDiv=b,this.eventBus=A,this.textContent=null,this.textContentItemsStr=[],this.textContentStream=null,this.renderingDone=!1,this.pageNumber=w+1,this.viewport=g,this.textDivs=[],this.textLayerRenderTask=null,this.highlighter=P,this.enhanceTextSelection=f,this._bindMouse()}_finishRendering(){if(this.renderingDone=!0,!this.enhanceTextSelection){let b=document.createElement("div");b.className="endOfContent",this.textLayerDiv.appendChild(b)}this.eventBus.dispatch("textlayerrendered",{source:this,pageNumber:this.pageNumber,numTextDivs:this.textDivs.length})}render(b=0){if(!(this.textContent||this.textContentStream)||this.renderingDone)return;this.cancel(),this.textDivs.length=0,this.highlighter?.setTextMapping(this.textDivs,this.textContentItemsStr);let A=document.createDocumentFragment();this.textLayerRenderTask=(0,_.renderTextLayer)({textContent:this.textContent,textContentStream:this.textContentStream,container:A,viewport:this.viewport,textDivs:this.textDivs,textContentItemsStr:this.textContentItemsStr,timeout:b,enhanceTextSelection:this.enhanceTextSelection}),this.textLayerRenderTask.promise.then(()=>{this.textLayerDiv.appendChild(A),this._finishRendering(),this.highlighter?.enable()},function(w){})}cancel(){this.textLayerRenderTask&&(this.textLayerRenderTask.cancel(),this.textLayerRenderTask=null),this.highlighter?.disable()}setTextContentStream(b){this.cancel(),this.textContentStream=b}setTextContent(b){this.cancel(),this.textContent=b}_bindMouse(){let b=this.textLayerDiv,A=null;b.addEventListener("mousedown",w=>{if(this.enhanceTextSelection&&this.textLayerRenderTask){this.textLayerRenderTask.expandTextDivs(!0),A&&(clearTimeout(A),A=null);return}let g=b.querySelector(".endOfContent");if(!g)return;let P=w.target!==b;if(P=P&&window.getComputedStyle(g).getPropertyValue("-moz-user-select")!=="none",P){let f=b.getBoundingClientRect(),L=Math.max(0,(w.pageY-f.top)/f.height);g.style.top=(L*100).toFixed(2)+"%"}g.classList.add("active")}),b.addEventListener("mouseup",()=>{if(this.enhanceTextSelection&&this.textLayerRenderTask){A=setTimeout(()=>{this.textLayerRenderTask&&this.textLayerRenderTask.expandTextDivs(!1),A=null},p);return}let w=b.querySelector(".endOfContent");!w||(w.style.top="",w.classList.remove("active"))})}}s.TextLayerBuilder=E},(u,s,k)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.XfaLayerBuilder=void 0;var _=k(3);class p{constructor({pageDiv:M,pdfPage:b,annotationStorage:A=null,linkService:w,xfaHtml:g=null}){this.pageDiv=M,this.pdfPage=b,this.annotationStorage=A,this.linkService=w,this.xfaHtml=g,this.div=null,this._cancelled=!1}render(M,b="display"){if(b==="print"){let A={viewport:M.clone({dontFlip:!0}),div:this.div,xfaHtml:this.xfaHtml,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:b},w=document.createElement("div");this.pageDiv.appendChild(w),A.div=w;let g=_.XfaLayer.render(A);return Promise.resolve(g)}return this.pdfPage.getXfa().then(A=>{if(this._cancelled||!A)return{textDivs:[]};let w={viewport:M.clone({dontFlip:!0}),div:this.div,xfaHtml:A,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:b};return this.div?_.XfaLayer.update(w):(this.div=document.createElement("div"),this.pageDiv.appendChild(this.div),w.div=this.div,_.XfaLayer.render(w))}).catch(A=>{console.error(A)})}cancel(){this._cancelled=!0}hide(){!this.div||(this.div.hidden=!0)}}s.XfaLayerBuilder=p},(u,s,k)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFViewer=s.PDFSinglePageViewer=void 0;var _=k(6),p=k(11);class E extends p.BaseViewer{}s.PDFViewer=E;class M extends p.BaseViewer{_resetView(){super._resetView(),this._scrollMode=_.ScrollMode.PAGE,this._spreadMode=_.SpreadMode.NONE}set scrollMode(A){}_updateScrollMode(){}set spreadMode(A){}_updateSpreadMode(){}}s.PDFSinglePageViewer=M},(u,s,k)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PagesCountLimit=s.PDFPageViewBuffer=s.BaseViewer=void 0;var _=k(3),p=k(6),E=k(2),M=k(4),b=k(12),A=k(14),w=k(5),g=k(7),P=k(15),f=k(8),L=k(9);let R=10,F="enablePermissions",D={FORCE_SCROLL_MODE_PAGE:15e3,FORCE_LAZY_PAGE_INIT:7500,PAUSE_EAGER_PAGE_INIT:250};s.PagesCountLimit=D;class o{#e=new Set;#t=0;constructor(r){this.#t=r}push(r){let a=this.#e;a.has(r)&&a.delete(r),a.add(r),a.size>this.#t&&this.#i()}resize(r,a=null){this.#t=r;let v=this.#e;if(a){let S=v.size,O=1;for(let x of v)if(a.has(x.id)&&(v.delete(x),v.add(x)),++O>S)break}for(;v.size>this.#t;)this.#i()}has(r){return this.#e.has(r)}[Symbol.iterator](){return this.#e.keys()}#i(){let r=this.#e.keys().next().value;r?.destroy(),this.#e.delete(r)}}s.PDFPageViewBuffer=o;class l{#e=null;#t=_.AnnotationMode.ENABLE_FORMS;#i=null;#s=!1;#o=0;#r=null;#n=null;constructor(r){if(this.constructor===l)throw new Error("Cannot initialize BaseViewer.");let a="2.13.216";if(_.version!==a)throw new Error(`The API version "${_.version}" does not match the Viewer version "${a}".`);if(this.container=r.container,this.viewer=r.viewer||r.container.firstElementChild,!(this.container?.tagName.toUpperCase()==="DIV"&&this.viewer?.tagName.toUpperCase()==="DIV"))throw new Error("Invalid `container` and/or `viewer` option.");if(this.container.offsetParent&&getComputedStyle(this.container).position!=="absolute")throw new Error("The `container` must be absolutely positioned.");this.eventBus=r.eventBus,this.linkService=r.linkService||new w.SimpleLinkService,this.downloadManager=r.downloadManager||null,this.findController=r.findController||null,this._scriptingManager=r.scriptingManager||null,this.removePageBorders=r.removePageBorders||!1,this.textLayerMode=r.textLayerMode??p.TextLayerMode.ENABLE,this.#t=r.annotationMode??_.AnnotationMode.ENABLE_FORMS,this.imageResourcesPath=r.imageResourcesPath||"",this.enablePrintAutoRotate=r.enablePrintAutoRotate||!1,this.renderer=r.renderer||p.RendererType.CANVAS,this.useOnlyCssZoom=r.useOnlyCssZoom||!1,this.maxCanvasPixels=r.maxCanvasPixels,this.l10n=r.l10n||M.NullL10n,this.#s=r.enablePermissions||!1,this.defaultRenderingQueue=!r.renderingQueue,this.defaultRenderingQueue?(this.renderingQueue=new A.PDFRenderingQueue,this.renderingQueue.setViewer(this)):this.renderingQueue=r.renderingQueue,this._doc=document.documentElement,this.scroll=(0,p.watchScroll)(this.container,this._scrollUpdate.bind(this)),this.presentationModeState=p.PresentationModeState.UNKNOWN,this._onBeforeDraw=this._onAfterDraw=null,this._resetView(),this.removePageBorders&&this.viewer.classList.add("removePageBorders"),Promise.resolve().then(()=>{this.eventBus.dispatch("baseviewerinit",{source:this})})}get pagesCount(){return this._pages.length}getPageView(r){return this._pages[r]}get pageViewsReady(){return this._pagesCapability.settled?this._pages.every(function(r){return r?.pdfPage}):!1}get renderForms(){return this.#t===_.AnnotationMode.ENABLE_FORMS}get enableScripting(){return!!this._scriptingManager}get currentPageNumber(){return this._currentPageNumber}set currentPageNumber(r){if(!Number.isInteger(r))throw new Error("Invalid page number.");!this.pdfDocument||this._setCurrentPageNumber(r,!0)||console.error(`currentPageNumber: "${r}" is not a valid page.`)}_setCurrentPageNumber(r,a=!1){if(this._currentPageNumber===r)return a&&this._resetCurrentPageView(),!0;if(!(0<r&&r<=this.pagesCount))return!1;let v=this._currentPageNumber;return this._currentPageNumber=r,this.eventBus.dispatch("pagechanging",{source:this,pageNumber:r,pageLabel:this._pageLabels?.[r-1]??null,previous:v}),a&&this._resetCurrentPageView(),!0}get currentPageLabel(){return this._pageLabels?.[this._currentPageNumber-1]??null}set currentPageLabel(r){if(!this.pdfDocument)return;let a=r|0;if(this._pageLabels){let v=this._pageLabels.indexOf(r);v>=0&&(a=v+1)}this._setCurrentPageNumber(a,!0)||console.error(`currentPageLabel: "${r}" is not a valid page.`)}get currentScale(){return this._currentScale!==p.UNKNOWN_SCALE?this._currentScale:p.DEFAULT_SCALE}set currentScale(r){if(isNaN(r))throw new Error("Invalid numeric scale.");!this.pdfDocument||this._setScale(r,!1)}get currentScaleValue(){return this._currentScaleValue}set currentScaleValue(r){!this.pdfDocument||this._setScale(r,!1)}get pagesRotation(){return this._pagesRotation}set pagesRotation(r){if(!(0,p.isValidRotation)(r))throw new Error("Invalid pages rotation angle.");if(!this.pdfDocument||(r%=360,r<0&&(r+=360),this._pagesRotation===r))return;this._pagesRotation=r;let a=this._currentPageNumber,v={rotation:r};for(let S of this._pages)S.update(v);this._currentScaleValue&&this._setScale(this._currentScaleValue,!0),this.eventBus.dispatch("rotationchanging",{source:this,pagesRotation:r,pageNumber:a}),this.defaultRenderingQueue&&this.update()}get firstPagePromise(){return this.pdfDocument?this._firstPageCapability.promise:null}get onePageRendered(){return this.pdfDocument?this._onePageRenderedCapability.promise:null}get pagesPromise(){return this.pdfDocument?this._pagesCapability.promise:null}#l(r){!r||(r.includes(_.PermissionFlag.COPY)||this.viewer.classList.add(F),!r.includes(_.PermissionFlag.MODIFY_ANNOTATIONS)&&!r.includes(_.PermissionFlag.FILL_INTERACTIVE_FORMS)&&this.#t===_.AnnotationMode.ENABLE_FORMS&&(this.#i=this.#t,this.#t=_.AnnotationMode.ENABLE))}#c(){if(document.visibilityState==="hidden"||!this.container.offsetParent||this._getVisiblePages().views.length===0)return Promise.resolve();let r=new Promise(a=>{this.#n=()=>{document.visibilityState==="hidden"&&(a(),document.removeEventListener("visibilitychange",this.#n),this.#n=null)},document.addEventListener("visibilitychange",this.#n)});return Promise.race([this._onePageRenderedCapability.promise,r])}setDocument(r){if(this.pdfDocument&&(this.eventBus.dispatch("pagesdestroy",{source:this}),this._cancelRendering(),this._resetView(),this.findController&&this.findController.setDocument(null),this._scriptingManager&&this._scriptingManager.setDocument(null)),this.pdfDocument=r,!r)return;let a=r.isPureXfa,v=r.numPages,S=r.getPage(1),O=r.getOptionalContentConfig(),x=this.#s?r.getPermissions():Promise.resolve();if(v>D.FORCE_SCROLL_MODE_PAGE){console.warn("Forcing PAGE-scrolling for performance reasons, given the length of the document.");let I=this._scrollMode=p.ScrollMode.PAGE;this.eventBus.dispatch("scrollmodechanged",{source:this,mode:I})}this._pagesCapability.promise.then(()=>{this.eventBus.dispatch("pagesloaded",{source:this,pagesCount:v})},()=>{}),this._onBeforeDraw=I=>{let U=this._pages[I.pageNumber-1];!U||this.#e.push(U)},this.eventBus._on("pagerender",this._onBeforeDraw),this._onAfterDraw=I=>{I.cssTransform||this._onePageRenderedCapability.settled||(this._onePageRenderedCapability.resolve({timestamp:I.timestamp}),this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null,this.#n&&(document.removeEventListener("visibilitychange",this.#n),this.#n=null))},this.eventBus._on("pagerendered",this._onAfterDraw),Promise.all([S,x]).then(([I,U])=>{if(r!==this.pdfDocument)return;this._firstPageCapability.resolve(I),this._optionalContentConfigPromise=O,this.#l(U);let V=this._scrollMode===p.ScrollMode.PAGE?null:this.viewer,z=this.currentScale,G=I.getViewport({scale:z*_.PixelsPerInch.PDF_TO_CSS_UNITS}),d=this.textLayerMode!==p.TextLayerMode.DISABLE&&!a?this:null,m=this.#t!==_.AnnotationMode.DISABLE?this:null,h=a?this:null;for(let i=1;i<=v;++i){let c=new b.PDFPageView({container:V,eventBus:this.eventBus,id:i,scale:z,defaultViewport:G.clone(),optionalContentConfigPromise:O,renderingQueue:this.renderingQueue,textLayerFactory:d,textLayerMode:this.textLayerMode,annotationLayerFactory:m,annotationMode:this.#t,xfaLayerFactory:h,textHighlighterFactory:this,structTreeLayerFactory:this,imageResourcesPath:this.imageResourcesPath,renderer:this.renderer,useOnlyCssZoom:this.useOnlyCssZoom,maxCanvasPixels:this.maxCanvasPixels,l10n:this.l10n});this._pages.push(c)}let C=this._pages[0];C&&(C.setPdfPage(I),this.linkService.cachePageRef(1,I.ref)),this._scrollMode===p.ScrollMode.PAGE?this.#a():this._spreadMode!==p.SpreadMode.NONE&&this._updateSpreadMode(),this.#c().then(async()=>{if(this.findController&&this.findController.setDocument(r),this._scriptingManager&&this._scriptingManager.setDocument(r),r.loadingParams.disableAutoFetch||v>D.FORCE_LAZY_PAGE_INIT){this._pagesCapability.resolve();return}let i=v-1;if(i<=0){this._pagesCapability.resolve();return}for(let c=2;c<=v;++c){let y=r.getPage(c).then(B=>{let T=this._pages[c-1];T.pdfPage||T.setPdfPage(B),this.linkService.cachePageRef(c,B.ref),--i===0&&this._pagesCapability.resolve()},B=>{console.error(`Unable to get page ${c} to initialize viewer`,B),--i===0&&this._pagesCapability.resolve()});c%D.PAUSE_EAGER_PAGE_INIT===0&&await y}}),this.eventBus.dispatch("pagesinit",{source:this}),r.getMetadata().then(({info:i})=>{r===this.pdfDocument&&i.Language&&(this.viewer.lang=i.Language)}),this.defaultRenderingQueue&&this.update()}).catch(I=>{console.error("Unable to initialize viewer",I),this._pagesCapability.reject(I)})}setPageLabels(r){if(!!this.pdfDocument){r?Array.isArray(r)&&this.pdfDocument.numPages===r.length?this._pageLabels=r:(this._pageLabels=null,console.error("setPageLabels: Invalid page labels.")):this._pageLabels=null;for(let a=0,v=this._pages.length;a<v;a++)this._pages[a].setPageLabel(this._pageLabels?.[a]??null)}}_resetView(){this._pages=[],this._currentPageNumber=1,this._currentScale=p.UNKNOWN_SCALE,this._currentScaleValue=null,this._pageLabels=null,this.#e=new o(R),this._location=null,this._pagesRotation=0,this._optionalContentConfigPromise=null,this._firstPageCapability=(0,_.createPromiseCapability)(),this._onePageRenderedCapability=(0,_.createPromiseCapability)(),this._pagesCapability=(0,_.createPromiseCapability)(),this._scrollMode=p.ScrollMode.VERTICAL,this._previousScrollMode=p.ScrollMode.UNKNOWN,this._spreadMode=p.SpreadMode.NONE,this.#r={previousPageNumber:1,scrollDown:!0,pages:[]},this._onBeforeDraw&&(this.eventBus._off("pagerender",this._onBeforeDraw),this._onBeforeDraw=null),this._onAfterDraw&&(this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null),this.#n&&(document.removeEventListener("visibilitychange",this.#n),this.#n=null),this.viewer.textContent="",this._updateScrollMode(),this.viewer.removeAttribute("lang"),this.viewer.classList.remove(F),this.#i!==null&&(this.#t=this.#i,this.#i=null)}#a(){if(this._scrollMode!==p.ScrollMode.PAGE)throw new Error("#ensurePageViewVisible: Invalid scrollMode value.");let r=this._currentPageNumber,a=this.#r,v=this.viewer;if(v.textContent="",a.pages.length=0,this._spreadMode===p.SpreadMode.NONE){let S=this._pages[r-1];if(this.isInPresentationMode){let O=document.createElement("div");O.className="spread";let x=document.createElement("div");x.className="dummyPage",x.style.height=`${this.container.clientHeight}px`,O.appendChild(x),O.appendChild(S.div),v.appendChild(O)}else v.appendChild(S.div);a.pages.push(S)}else{let S=new Set,O=this._spreadMode-1;r%2!==O?(S.add(r-1),S.add(r)):(S.add(r-2),S.add(r-1));let x=null;for(let I of S){let U=this._pages[I];!U||(x===null?(x=document.createElement("div"),x.className="spread",v.appendChild(x)):I%2===O&&(x=x.cloneNode(!1),v.appendChild(x)),x.appendChild(U.div),a.pages.push(U))}}a.scrollDown=r>=a.previousPageNumber,a.previousPageNumber=r}_scrollUpdate(){this.pagesCount!==0&&this.update()}_scrollIntoView({pageDiv:r,pageSpot:a=null,pageNumber:v=null}){if(this._scrollMode===p.ScrollMode.PAGE&&(v&&this._setCurrentPageNumber(v),this.#a(),this.update()),!a&&!this.isInPresentationMode){let S=r.offsetLeft+r.clientLeft,O=S+r.clientWidth,{scrollLeft:x,clientWidth:I}=this.container;(this._scrollMode===p.ScrollMode.HORIZONTAL||S<x||O>x+I)&&(a={left:0,top:0})}(0,p.scrollIntoView)(r,a)}#h(r){return this.isInPresentationMode&&this.container.clientHeight!==this.#o?!1:r===this._currentScale||Math.abs(r-this._currentScale)<1e-15}_setScaleUpdatePages(r,a,v=!1,S=!1){if(this._currentScaleValue=a.toString(),this.#h(r)){S&&this.eventBus.dispatch("scalechanging",{source:this,scale:r,presetValue:a});return}this._doc.style.setProperty("--zoom-factor",r),this._doc.style.setProperty("--viewport-scale-factor",r*_.PixelsPerInch.PDF_TO_CSS_UNITS);let O={scale:r};for(let x of this._pages)x.update(O);if(this._currentScale=r,!v){let x=this._currentPageNumber,I;this._location&&!(this.isInPresentationMode||this.isChangingPresentationMode)&&(x=this._location.pageNumber,I=[null,{name:"XYZ"},this._location.left,this._location.top,null]),this.scrollPageIntoView({pageNumber:x,destArray:I,allowNegativeOffset:!0})}this.eventBus.dispatch("scalechanging",{source:this,scale:r,presetValue:S?a:void 0}),this.defaultRenderingQueue&&this.update(),this.#o=this.container.clientHeight}get _pageWidthScaleFactor(){return this._spreadMode!==p.SpreadMode.NONE&&this._scrollMode!==p.ScrollMode.HORIZONTAL?2:1}_setScale(r,a=!1){let v=parseFloat(r);if(v>0)this._setScaleUpdatePages(v,r,a,!1);else{let S=this._pages[this._currentPageNumber-1];if(!S)return;let O=p.SCROLLBAR_PADDING,x=p.VERTICAL_PADDING;this.isInPresentationMode?O=x=4:this.removePageBorders&&(O=x=0),this._scrollMode===p.ScrollMode.HORIZONTAL&&([O,x]=[x,O]);let I=(this.container.clientWidth-O)/S.width*S.scale/this._pageWidthScaleFactor,U=(this.container.clientHeight-x)/S.height*S.scale;switch(r){case"page-actual":v=1;break;case"page-width":v=I;break;case"page-height":v=U;break;case"page-fit":v=Math.min(I,U);break;case"auto":let V=(0,p.isPortraitOrientation)(S)?I:Math.min(U,I);v=Math.min(p.MAX_AUTO_SCALE,V);break;default:console.error(`_setScale: "${r}" is an unknown zoom value.`);return}this._setScaleUpdatePages(v,r,a,!0)}}_resetCurrentPageView(){this.isInPresentationMode&&this._setScale(this._currentScaleValue,!0);let r=this._pages[this._currentPageNumber-1];this._scrollIntoView({pageDiv:r.div})}pageLabelToPageNumber(r){if(!this._pageLabels)return null;let a=this._pageLabels.indexOf(r);return a<0?null:a+1}scrollPageIntoView({pageNumber:r,destArray:a=null,allowNegativeOffset:v=!1,ignoreDestinationZoom:S=!1}){if(!this.pdfDocument)return;let O=Number.isInteger(r)&&this._pages[r-1];if(!O){console.error(`scrollPageIntoView: "${r}" is not a valid pageNumber parameter.`);return}if(this.isInPresentationMode||!a){this._setCurrentPageNumber(r,!0);return}let x=0,I=0,U=0,V=0,z,G,d=O.rotation%180!==0,m=(d?O.height:O.width)/O.scale/_.PixelsPerInch.PDF_TO_CSS_UNITS,h=(d?O.width:O.height)/O.scale/_.PixelsPerInch.PDF_TO_CSS_UNITS,C=0;switch(a[1].name){case"XYZ":x=a[2],I=a[3],C=a[4],x=x!==null?x:0,I=I!==null?I:h;break;case"Fit":case"FitB":C="page-fit";break;case"FitH":case"FitBH":I=a[2],C="page-width",I===null&&this._location?(x=this._location.left,I=this._location.top):(typeof I!="number"||I<0)&&(I=h);break;case"FitV":case"FitBV":x=a[2],U=m,V=h,C="page-height";break;case"FitR":x=a[2],I=a[3],U=a[4]-x,V=a[5]-I;let B=this.removePageBorders?0:p.SCROLLBAR_PADDING,T=this.removePageBorders?0:p.VERTICAL_PADDING;z=(this.container.clientWidth-B)/U/_.PixelsPerInch.PDF_TO_CSS_UNITS,G=(this.container.clientHeight-T)/V/_.PixelsPerInch.PDF_TO_CSS_UNITS,C=Math.min(Math.abs(z),Math.abs(G));break;default:console.error(`scrollPageIntoView: "${a[1].name}" is not a valid destination type.`);return}if(S||(C&&C!==this._currentScale?this.currentScaleValue=C:this._currentScale===p.UNKNOWN_SCALE&&(this.currentScaleValue=p.DEFAULT_SCALE_VALUE)),C==="page-fit"&&!a[4]){this._scrollIntoView({pageDiv:O.div,pageNumber:r});return}let i=[O.viewport.convertToViewportPoint(x,I),O.viewport.convertToViewportPoint(x+U,I+V)],c=Math.min(i[0][0],i[1][0]),y=Math.min(i[0][1],i[1][1]);v||(c=Math.max(c,0),y=Math.max(y,0)),this._scrollIntoView({pageDiv:O.div,pageSpot:{left:c,top:y},pageNumber:r})}_updateLocation(r){let a=this._currentScale,v=this._currentScaleValue,S=parseFloat(v)===a?Math.round(a*1e4)/100:v,O=r.id,x="#page="+O;x+="&zoom="+S;let I=this._pages[O-1],U=this.container,V=I.getPagePoint(U.scrollLeft-r.x,U.scrollTop-r.y),z=Math.round(V[0]),G=Math.round(V[1]);x+=","+z+","+G,this._location={pageNumber:O,scale:S,top:G,left:z,rotation:this._pagesRotation,pdfOpenParams:x}}update(){let r=this._getVisiblePages(),a=r.views,v=a.length;if(v===0)return;let S=Math.max(R,2*v+1);if(this.#e.resize(S,r.ids),this.renderingQueue.renderHighestPriority(r),!this.isInPresentationMode){let O=this._spreadMode===p.SpreadMode.NONE&&(this._scrollMode===p.ScrollMode.PAGE||this._scrollMode===p.ScrollMode.VERTICAL),x=this._currentPageNumber,I=!1;for(let U of a){if(U.percent<100)break;if(U.id===x&&O){I=!0;break}}I||(x=a[0].id),this._setCurrentPageNumber(x)}this._updateLocation(r.first),this.eventBus.dispatch("updateviewarea",{source:this,location:this._location})}containsElement(r){return this.container.contains(r)}focus(){this.container.focus()}get _isContainerRtl(){return getComputedStyle(this.container).direction==="rtl"}get isInPresentationMode(){return this.presentationModeState===p.PresentationModeState.FULLSCREEN}get isChangingPresentationMode(){return this.presentationModeState===p.PresentationModeState.CHANGING}get isHorizontalScrollbarEnabled(){return this.isInPresentationMode?!1:this.container.scrollWidth>this.container.clientWidth}get isVerticalScrollbarEnabled(){return this.isInPresentationMode?!1:this.container.scrollHeight>this.container.clientHeight}_getCurrentVisiblePage(){if(!this.pagesCount)return{views:[]};let r=this._pages[this._currentPageNumber-1],a=r.div,v={id:r.id,x:a.offsetLeft+a.clientLeft,y:a.offsetTop+a.clientTop,view:r},S=new Set([r.id]);return{first:v,last:v,views:[v],ids:S}}_getVisiblePages(){if(this.isInPresentationMode)return this._getCurrentVisiblePage();let r=this._scrollMode===p.ScrollMode.PAGE?this.#r.pages:this._pages,a=this._scrollMode===p.ScrollMode.HORIZONTAL,v=a&&this._isContainerRtl;return(0,p.getVisibleElements)({scrollEl:this.container,views:r,sortByVisibility:!0,horizontal:a,rtl:v})}isPageVisible(r){return this.pdfDocument?Number.isInteger(r)&&r>0&&r<=this.pagesCount?this._getVisiblePages().ids.has(r):(console.error(`isPageVisible: "${r}" is not a valid page.`),!1):!1}isPageCached(r){if(!this.pdfDocument)return!1;if(!(Number.isInteger(r)&&r>0&&r<=this.pagesCount))return console.error(`isPageCached: "${r}" is not a valid page.`),!1;let a=this._pages[r-1];return this.#e.has(a)}cleanup(){for(let r=0,a=this._pages.length;r<a;r++)this._pages[r]&&this._pages[r].renderingState!==p.RenderingStates.FINISHED&&this._pages[r].reset()}_cancelRendering(){for(let r=0,a=this._pages.length;r<a;r++)this._pages[r]&&this._pages[r].cancelRendering()}async#d(r){if(r.pdfPage)return r.pdfPage;try{let a=await this.pdfDocument.getPage(r.id);return r.pdfPage||r.setPdfPage(a),this.linkService._cachedPageNumber?.(a.ref)||this.linkService.cachePageRef(r.id,a.ref),a}catch(a){return console.error("Unable to get page for page view",a),null}}#u(r){if(r.first?.id===1)return!0;if(r.last?.id===this.pagesCount)return!1;switch(this._scrollMode){case p.ScrollMode.PAGE:return this.#r.scrollDown;case p.ScrollMode.HORIZONTAL:return this.scroll.right}return this.scroll.down}#f(r){for(let a of r)this._pages[a-1]?.toggleLoadingIconSpinner(!0);for(let a of this.#e)r.has(a.id)||a.toggleLoadingIconSpinner(!1)}forceRendering(r){let a=r||this._getVisiblePages(),v=this.#u(a),S=this._spreadMode!==p.SpreadMode.NONE&&this._scrollMode!==p.ScrollMode.HORIZONTAL,O=this.renderingQueue.getHighestPriority(a,this._pages,v,S);return this.#f(a.ids),O?(this.#d(O).then(()=>{this.renderingQueue.renderView(O)}),!0):!1}createTextLayerBuilder(r,a,v,S=!1,O,x){return new f.TextLayerBuilder({textLayerDiv:r,eventBus:O,pageIndex:a,viewport:v,enhanceTextSelection:this.isInPresentationMode?!1:S,highlighter:x})}createTextHighlighter(r,a){return new P.TextHighlighter({eventBus:a,pageIndex:r,findController:this.isInPresentationMode?null:this.findController})}createAnnotationLayerBuilder(r,a,v=null,S="",O=!0,x=M.NullL10n,I=null,U=null,V=null,z=null,G=null){return new E.AnnotationLayerBuilder({pageDiv:r,pdfPage:a,annotationStorage:v||this.pdfDocument?.annotationStorage,imageResourcesPath:S,renderForms:O,linkService:this.linkService,downloadManager:this.downloadManager,l10n:x,enableScripting:I??this.enableScripting,hasJSActionsPromise:U||this.pdfDocument?.hasJSActions(),fieldObjectsPromise:z||this.pdfDocument?.getFieldObjects(),mouseState:V||this._scriptingManager?.mouseState,annotationCanvasMap:G})}createXfaLayerBuilder(r,a,v=null){return new L.XfaLayerBuilder({pageDiv:r,pdfPage:a,annotationStorage:v||this.pdfDocument?.annotationStorage,linkService:this.linkService})}createStructTreeLayerBuilder(r){return new g.StructTreeLayerBuilder({pdfPage:r})}get hasEqualPageSizes(){let r=this._pages[0];for(let a=1,v=this._pages.length;a<v;++a){let S=this._pages[a];if(S.width!==r.width||S.height!==r.height)return!1}return!0}getPagesOverview(){return this._pages.map(r=>{let a=r.pdfPage.getViewport({scale:1});return!this.enablePrintAutoRotate||(0,p.isPortraitOrientation)(a)?{width:a.width,height:a.height,rotation:a.rotation}:{width:a.height,height:a.width,rotation:(a.rotation-90)%360}})}get optionalContentConfigPromise(){return this.pdfDocument?this._optionalContentConfigPromise?this._optionalContentConfigPromise:this.pdfDocument.getOptionalContentConfig():Promise.resolve(null)}set optionalContentConfigPromise(r){if(!(r instanceof Promise))throw new Error(`Invalid optionalContentConfigPromise: ${r}`);if(!this.pdfDocument||!this._optionalContentConfigPromise)return;this._optionalContentConfigPromise=r;let a={optionalContentConfigPromise:r};for(let v of this._pages)v.update(a);this.update(),this.eventBus.dispatch("optionalcontentconfigchanged",{source:this,promise:r})}get scrollMode(){return this._scrollMode}set scrollMode(r){if(this._scrollMode!==r){if(!(0,p.isValidScrollMode)(r))throw new Error(`Invalid scroll mode: ${r}`);this.pagesCount>D.FORCE_SCROLL_MODE_PAGE||(this._previousScrollMode=this._scrollMode,this._scrollMode=r,this.eventBus.dispatch("scrollmodechanged",{source:this,mode:r}),this._updateScrollMode(this._currentPageNumber))}}_updateScrollMode(r=null){let a=this._scrollMode,v=this.viewer;v.classList.toggle("scrollHorizontal",a===p.ScrollMode.HORIZONTAL),v.classList.toggle("scrollWrapped",a===p.ScrollMode.WRAPPED),!(!this.pdfDocument||!r)&&(a===p.ScrollMode.PAGE?this.#a():this._previousScrollMode===p.ScrollMode.PAGE&&this._updateSpreadMode(),this._currentScaleValue&&isNaN(this._currentScaleValue)&&this._setScale(this._currentScaleValue,!0),this._setCurrentPageNumber(r,!0),this.update())}get spreadMode(){return this._spreadMode}set spreadMode(r){if(this._spreadMode!==r){if(!(0,p.isValidSpreadMode)(r))throw new Error(`Invalid spread mode: ${r}`);this._spreadMode=r,this.eventBus.dispatch("spreadmodechanged",{source:this,mode:r}),this._updateSpreadMode(this._currentPageNumber)}}_updateSpreadMode(r=null){if(!this.pdfDocument)return;let a=this.viewer,v=this._pages;if(this._scrollMode===p.ScrollMode.PAGE)this.#a();else if(a.textContent="",this._spreadMode===p.SpreadMode.NONE)for(let S=0,O=v.length;S<O;++S)a.appendChild(v[S].div);else{let S=this._spreadMode-1,O=null;for(let x=0,I=v.length;x<I;++x)O===null?(O=document.createElement("div"),O.className="spread",a.appendChild(O)):x%2===S&&(O=O.cloneNode(!1),a.appendChild(O)),O.appendChild(v[x].div)}!r||(this._currentScaleValue&&isNaN(this._currentScaleValue)&&this._setScale(this._currentScaleValue,!0),this._setCurrentPageNumber(r,!0),this.update())}_getPageAdvance(r,a=!1){switch(this._scrollMode){case p.ScrollMode.WRAPPED:{let{views:v}=this._getVisiblePages(),S=new Map;for(let{id:O,y:x,percent:I,widthPercent:U}of v){if(I===0||U<100)continue;let V=S.get(x);V||S.set(x,V||=[]),V.push(O)}for(let O of S.values()){let x=O.indexOf(r);if(x===-1)continue;let I=O.length;if(I===1)break;if(a)for(let U=x-1,V=0;U>=V;U--){let z=O[U],G=O[U+1]-1;if(z<G)return r-G}else for(let U=x+1,V=I;U<V;U++){let z=O[U],G=O[U-1]+1;if(z>G)return G-r}if(a){let U=O[0];if(U<r)return r-U+1}else{let U=O[I-1];if(U>r)return U-r+1}break}break}case p.ScrollMode.HORIZONTAL:break;case p.ScrollMode.PAGE:case p.ScrollMode.VERTICAL:{if(this._spreadMode===p.SpreadMode.NONE)break;let v=this._spreadMode-1;if(a&&r%2!==v)break;if(!a&&r%2===v)break;let{views:S}=this._getVisiblePages(),O=a?r-1:r+1;for(let{id:x,percent:I,widthPercent:U}of S)if(x===O){if(I>0&&U===100)return 2;break}break}}return 1}nextPage(){let r=this._currentPageNumber,a=this.pagesCount;if(r>=a)return!1;let v=this._getPageAdvance(r,!1)||1;return this.currentPageNumber=Math.min(r+v,a),!0}previousPage(){let r=this._currentPageNumber;if(r<=1)return!1;let a=this._getPageAdvance(r,!0)||1;return this.currentPageNumber=Math.max(r-a,1),!0}increaseScale(r=1){let a=this._currentScale;do a=(a*p.DEFAULT_SCALE_DELTA).toFixed(2),a=Math.ceil(a*10)/10,a=Math.min(p.MAX_SCALE,a);while(--r>0&&a<p.MAX_SCALE);this.currentScaleValue=a}decreaseScale(r=1){let a=this._currentScale;do a=(a/p.DEFAULT_SCALE_DELTA).toFixed(2),a=Math.floor(a*10)/10,a=Math.max(p.MIN_SCALE,a);while(--r>0&&a>p.MIN_SCALE);this.currentScaleValue=a}}s.BaseViewer=l},(u,s,k)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFPageView=void 0;var _=k(3),p=k(6),E=k(13),M=k(4);let b=E.compatibilityParams.maxCanvasPixels||16777216;class A{#e=_.AnnotationMode.ENABLE_FORMS;constructor(g){let P=g.container,f=g.defaultViewport;this.id=g.id,this.renderingId="page"+this.id,this.pdfPage=null,this.pageLabel=null,this.rotation=0,this.scale=g.scale||p.DEFAULT_SCALE,this.viewport=f,this.pdfPageRotate=f.rotation,this._optionalContentConfigPromise=g.optionalContentConfigPromise||null,this.hasRestrictedScaling=!1,this.textLayerMode=g.textLayerMode??p.TextLayerMode.ENABLE,this.#e=g.annotationMode??_.AnnotationMode.ENABLE_FORMS,this.imageResourcesPath=g.imageResourcesPath||"",this.useOnlyCssZoom=g.useOnlyCssZoom||!1,this.maxCanvasPixels=g.maxCanvasPixels||b,this.eventBus=g.eventBus,this.renderingQueue=g.renderingQueue,this.textLayerFactory=g.textLayerFactory,this.annotationLayerFactory=g.annotationLayerFactory,this.xfaLayerFactory=g.xfaLayerFactory,this.textHighlighter=g.textHighlighterFactory?.createTextHighlighter(this.id-1,this.eventBus),this.structTreeLayerFactory=g.structTreeLayerFactory,this.renderer=g.renderer||p.RendererType.CANVAS,this.l10n=g.l10n||M.NullL10n,this.paintTask=null,this.paintedViewportMap=new WeakMap,this.renderingState=p.RenderingStates.INITIAL,this.resume=null,this._renderError=null,this._isStandalone=!this.renderingQueue?.hasViewer(),this._annotationCanvasMap=null,this.annotationLayer=null,this.textLayer=null,this.zoomLayer=null,this.xfaLayer=null,this.structTreeLayer=null;let L=document.createElement("div");L.className="page",L.style.width=Math.floor(this.viewport.width)+"px",L.style.height=Math.floor(this.viewport.height)+"px",L.setAttribute("data-page-number",this.id),L.setAttribute("role","region"),this.l10n.get("page_landmark",{page:this.id}).then(R=>{L.setAttribute("aria-label",R)}),this.div=L,P?.appendChild(L)}setPdfPage(g){this.pdfPage=g,this.pdfPageRotate=g.rotate;let P=(this.rotation+this.pdfPageRotate)%360;this.viewport=g.getViewport({scale:this.scale*_.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:P}),this.reset()}destroy(){this.reset(),this.pdfPage&&this.pdfPage.cleanup()}async _renderAnnotationLayer(){let g=null;try{await this.annotationLayer.render(this.viewport,"display")}catch(P){g=P}finally{this.eventBus.dispatch("annotationlayerrendered",{source:this,pageNumber:this.id,error:g})}}async _renderXfaLayer(){let g=null;try{let P=await this.xfaLayer.render(this.viewport,"display");this.textHighlighter&&this._buildXfaTextContentItems(P.textDivs)}catch(P){g=P}finally{this.eventBus.dispatch("xfalayerrendered",{source:this,pageNumber:this.id,error:g})}}async _buildXfaTextContentItems(g){let P=await this.pdfPage.getTextContent(),f=[];for(let L of P.items)f.push(L.str);this.textHighlighter.setTextMapping(g,f),this.textHighlighter.enable()}_resetZoomLayer(g=!1){if(!this.zoomLayer)return;let P=this.zoomLayer.firstChild;this.paintedViewportMap.delete(P),P.width=0,P.height=0,g&&this.zoomLayer.remove(),this.zoomLayer=null}reset({keepZoomLayer:g=!1,keepAnnotationLayer:P=!1,keepXfaLayer:f=!1}={}){this.cancelRendering({keepAnnotationLayer:P,keepXfaLayer:f}),this.renderingState=p.RenderingStates.INITIAL;let L=this.div;L.style.width=Math.floor(this.viewport.width)+"px",L.style.height=Math.floor(this.viewport.height)+"px";let R=L.childNodes,F=g&&this.zoomLayer||null,D=P&&this.annotationLayer?.div||null,o=f&&this.xfaLayer?.div||null;for(let l=R.length-1;l>=0;l--){let N=R[l];switch(N){case F:case D:case o:continue}N.remove()}L.removeAttribute("data-loaded"),D&&this.annotationLayer.hide(),o&&this.xfaLayer.hide(),F||(this.canvas&&(this.paintedViewportMap.delete(this.canvas),this.canvas.width=0,this.canvas.height=0,delete this.canvas),this._resetZoomLayer()),this.svg&&(this.paintedViewportMap.delete(this.svg),delete this.svg),this.loadingIconDiv=document.createElement("div"),this.loadingIconDiv.className="loadingIcon notVisible",this._isStandalone&&this.toggleLoadingIconSpinner(!0),this.loadingIconDiv.setAttribute("role","img"),this.l10n.get("loading").then(l=>{this.loadingIconDiv?.setAttribute("aria-label",l)}),L.appendChild(this.loadingIconDiv)}update({scale:g=0,rotation:P=null,optionalContentConfigPromise:f=null}){if(typeof arguments[0]!="object"){console.error("PDFPageView.update called with separate parameters, please use an object instead."),this.update({scale:arguments[0],rotation:arguments[1],optionalContentConfigPromise:arguments[2]});return}this.scale=g||this.scale,typeof P=="number"&&(this.rotation=P),f instanceof Promise&&(this._optionalContentConfigPromise=f);let L=(this.rotation+this.pdfPageRotate)%360,R=this.scale*_.PixelsPerInch.PDF_TO_CSS_UNITS;if(this.viewport=this.viewport.clone({scale:R,rotation:L}),this._isStandalone){let{style:D}=document.documentElement;D.setProperty("--zoom-factor",this.scale),D.setProperty("--viewport-scale-factor",R)}if(this.svg){this.cssTransform({target:this.svg,redrawAnnotationLayer:!0,redrawXfaLayer:!0}),this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this._renderError});return}let F=!1;if(this.canvas&&this.maxCanvasPixels>0){let D=this.outputScale;(Math.floor(this.viewport.width)*D.sx|0)*(Math.floor(this.viewport.height)*D.sy|0)>this.maxCanvasPixels&&(F=!0)}if(this.canvas){if(this.useOnlyCssZoom||this.hasRestrictedScaling&&F){this.cssTransform({target:this.canvas,redrawAnnotationLayer:!0,redrawXfaLayer:!0}),this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this._renderError});return}!this.zoomLayer&&!this.canvas.hidden&&(this.zoomLayer=this.canvas.parentNode,this.zoomLayer.style.position="absolute")}this.zoomLayer&&this.cssTransform({target:this.zoomLayer.firstChild}),this.reset({keepZoomLayer:!0,keepAnnotationLayer:!0,keepXfaLayer:!0})}cancelRendering({keepAnnotationLayer:g=!1,keepXfaLayer:P=!1}={}){this.paintTask&&(this.paintTask.cancel(),this.paintTask=null),this.resume=null,this.textLayer&&(this.textLayer.cancel(),this.textLayer=null),this.annotationLayer&&(!g||!this.annotationLayer.div)&&(this.annotationLayer.cancel(),this.annotationLayer=null,this._annotationCanvasMap=null),this.xfaLayer&&(!P||!this.xfaLayer.div)&&(this.xfaLayer.cancel(),this.xfaLayer=null,this.textHighlighter?.disable()),this._onTextLayerRendered&&(this.eventBus._off("textlayerrendered",this._onTextLayerRendered),this._onTextLayerRendered=null)}cssTransform({target:g,redrawAnnotationLayer:P=!1,redrawXfaLayer:f=!1}){let L=this.viewport.width,R=this.viewport.height,F=this.div;g.style.width=g.parentNode.style.width=F.style.width=Math.floor(L)+"px",g.style.height=g.parentNode.style.height=F.style.height=Math.floor(R)+"px";let D=this.viewport.rotation-this.paintedViewportMap.get(g).rotation,o=Math.abs(D),l=1,N=1;if((o===90||o===270)&&(l=R/L,N=L/R),g.style.transform=`rotate(${D}deg) scale(${l}, ${N})`,this.textLayer){let r=this.textLayer.viewport,a=this.viewport.rotation-r.rotation,v=Math.abs(a),S=L/r.width;(v===90||v===270)&&(S=L/r.height);let O=this.textLayer.textLayerDiv,x,I;switch(v){case 0:x=I=0;break;case 90:x=0,I="-"+O.style.height;break;case 180:x="-"+O.style.width,I="-"+O.style.height;break;case 270:x="-"+O.style.width,I=0;break;default:console.error("Bad rotation value.");break}O.style.transform=`rotate(${v}deg) scale(${S}) translate(${x}, ${I})`,O.style.transformOrigin="0% 0%"}P&&this.annotationLayer&&this._renderAnnotationLayer(),f&&this.xfaLayer&&this._renderXfaLayer()}get width(){return this.viewport.width}get height(){return this.viewport.height}getPagePoint(g,P){return this.viewport.convertToPdfPoint(g,P)}toggleLoadingIconSpinner(g=!1){this.loadingIconDiv?.classList.toggle("notVisible",!g)}draw(){this.renderingState!==p.RenderingStates.INITIAL&&(console.error("Must be in new state before drawing"),this.reset());let{div:g,pdfPage:P}=this;if(!P)return this.renderingState=p.RenderingStates.FINISHED,this.loadingIconDiv&&(this.loadingIconDiv.remove(),delete this.loadingIconDiv),Promise.reject(new Error("pdfPage is not loaded"));this.renderingState=p.RenderingStates.RUNNING;let f=document.createElement("div");f.style.width=g.style.width,f.style.height=g.style.height,f.classList.add("canvasWrapper"),this.annotationLayer?.div?g.insertBefore(f,this.annotationLayer.div):g.appendChild(f);let L=null;if(this.textLayerMode!==p.TextLayerMode.DISABLE&&this.textLayerFactory){let l=document.createElement("div");l.className="textLayer",l.style.width=f.style.width,l.style.height=f.style.height,this.annotationLayer?.div?g.insertBefore(l,this.annotationLayer.div):g.appendChild(l),L=this.textLayerFactory.createTextLayerBuilder(l,this.id-1,this.viewport,this.textLayerMode===p.TextLayerMode.ENABLE_ENHANCE,this.eventBus,this.textHighlighter)}this.textLayer=L,this.#e!==_.AnnotationMode.DISABLE&&this.annotationLayerFactory&&(this._annotationCanvasMap||=new Map,this.annotationLayer||=this.annotationLayerFactory.createAnnotationLayerBuilder(g,P,null,this.imageResourcesPath,this.#e===_.AnnotationMode.ENABLE_FORMS,this.l10n,null,null,null,null,this._annotationCanvasMap)),this.xfaLayer?.div&&g.appendChild(this.xfaLayer.div);let R=null;this.renderingQueue&&(R=l=>{if(!this.renderingQueue.isHighestPriority(this)){this.renderingState=p.RenderingStates.PAUSED,this.resume=()=>{this.renderingState=p.RenderingStates.RUNNING,l()};return}l()});let F=async(l=null)=>{if(D===this.paintTask&&(this.paintTask=null),l instanceof _.RenderingCancelledException){this._renderError=null;return}if(this._renderError=l,this.renderingState=p.RenderingStates.FINISHED,this.loadingIconDiv&&(this.loadingIconDiv.remove(),delete this.loadingIconDiv),this._resetZoomLayer(!0),this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!1,timestamp:performance.now(),error:this._renderError}),l)throw l},D=this.renderer===p.RendererType.SVG?this.paintOnSvg(f):this.paintOnCanvas(f);D.onRenderContinue=R,this.paintTask=D;let o=D.promise.then(()=>F(null).then(()=>{if(L){let l=P.streamTextContent({includeMarkedContent:!0});L.setTextContentStream(l),L.render()}this.annotationLayer&&this._renderAnnotationLayer()}),function(l){return F(l)});return this.xfaLayerFactory&&(this.xfaLayer||(this.xfaLayer=this.xfaLayerFactory.createXfaLayerBuilder(g,P,null)),this._renderXfaLayer()),this.structTreeLayerFactory&&this.textLayer&&this.canvas&&(this._onTextLayerRendered=l=>{l.pageNumber===this.id&&(this.eventBus._off("textlayerrendered",this._onTextLayerRendered),this._onTextLayerRendered=null,this.canvas&&this.pdfPage.getStructTree().then(N=>{if(!N||!this.canvas)return;let r=this.structTreeLayer.render(N);r.classList.add("structTree"),this.canvas.appendChild(r)}))},this.eventBus._on("textlayerrendered",this._onTextLayerRendered),this.structTreeLayer=this.structTreeLayerFactory.createStructTreeLayerBuilder(P)),g.setAttribute("data-loaded",!0),this.eventBus.dispatch("pagerender",{source:this,pageNumber:this.id}),o}paintOnCanvas(g){let P=(0,_.createPromiseCapability)(),f={promise:P.promise,onRenderContinue(O){O()},cancel(){S.cancel()}},L=this.viewport,R=document.createElement("canvas");R.hidden=!0;let F=!0,D=function(){F&&(R.hidden=!1,F=!1)};g.appendChild(R),this.canvas=R,R.mozOpaque=!0;let o=R.getContext("2d",{alpha:!1}),l=this.outputScale=new p.OutputScale;if(this.useOnlyCssZoom){let O=L.clone({scale:_.PixelsPerInch.PDF_TO_CSS_UNITS});l.sx*=O.width/L.width,l.sy*=O.height/L.height}if(this.maxCanvasPixels>0){let O=L.width*L.height,x=Math.sqrt(this.maxCanvasPixels/O);l.sx>x||l.sy>x?(l.sx=x,l.sy=x,this.hasRestrictedScaling=!0):this.hasRestrictedScaling=!1}let N=(0,p.approximateFraction)(l.sx),r=(0,p.approximateFraction)(l.sy);R.width=(0,p.roundToDivide)(L.width*l.sx,N[0]),R.height=(0,p.roundToDivide)(L.height*l.sy,r[0]),R.style.width=(0,p.roundToDivide)(L.width,N[1])+"px",R.style.height=(0,p.roundToDivide)(L.height,r[1])+"px",this.paintedViewportMap.set(R,L);let a=l.scaled?[l.sx,0,0,l.sy,0,0]:null,v={canvasContext:o,transform:a,viewport:this.viewport,annotationMode:this.#e,optionalContentConfigPromise:this._optionalContentConfigPromise,annotationCanvasMap:this._annotationCanvasMap},S=this.pdfPage.render(v);return S.onContinue=function(O){D(),f.onRenderContinue?f.onRenderContinue(O):O()},S.promise.then(function(){D(),P.resolve()},function(O){D(),P.reject(O)}),f}paintOnSvg(g){let P=!1,f=()=>{if(P)throw new _.RenderingCancelledException(`Rendering cancelled, page ${this.id}`,"svg")},L=this.pdfPage,R=this.viewport.clone({scale:_.PixelsPerInch.PDF_TO_CSS_UNITS});return{promise:L.getOperatorList({annotationMode:this.#e}).then(D=>(f(),new _.SVGGraphics(L.commonObjs,L.objs).getSVG(D,R).then(l=>{f(),this.svg=l,this.paintedViewportMap.set(l,R),l.style.width=g.style.width,l.style.height=g.style.height,this.renderingState=p.RenderingStates.FINISHED,g.appendChild(l)}))),onRenderContinue(D){D()},cancel(){P=!0}}}setPageLabel(g){this.pageLabel=typeof g=="string"?g:null,this.pageLabel!==null?this.div.setAttribute("data-page-label",this.pageLabel):this.div.removeAttribute("data-page-label")}}s.PDFPageView=A},(u,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.compatibilityParams=s.OptionKind=s.AppOptions=void 0;let k=Object.create(null);s.compatibilityParams=k;{let b=navigator.userAgent||"",A=navigator.platform||"",w=navigator.maxTouchPoints||1,g=/Android/.test(b),P=/\b(iPad|iPhone|iPod)(?=;)/.test(b)||A==="MacIntel"&&w>1;(function(){(P||g)&&(k.maxCanvasPixels=5242880)})()}let _={VIEWER:2,API:4,WORKER:8,PREFERENCE:128};s.OptionKind=_;let p={annotationMode:{value:2,kind:_.VIEWER+_.PREFERENCE},cursorToolOnLoad:{value:0,kind:_.VIEWER+_.PREFERENCE},defaultUrl:{value:"compressed.tracemonkey-pldi-09.pdf",kind:_.VIEWER},defaultZoomValue:{value:"",kind:_.VIEWER+_.PREFERENCE},disableHistory:{value:!1,kind:_.VIEWER},disablePageLabels:{value:!1,kind:_.VIEWER+_.PREFERENCE},enablePermissions:{value:!1,kind:_.VIEWER+_.PREFERENCE},enablePrintAutoRotate:{value:!0,kind:_.VIEWER+_.PREFERENCE},enableScripting:{value:!0,kind:_.VIEWER+_.PREFERENCE},externalLinkRel:{value:"noopener noreferrer nofollow",kind:_.VIEWER},externalLinkTarget:{value:0,kind:_.VIEWER+_.PREFERENCE},historyUpdateUrl:{value:!1,kind:_.VIEWER+_.PREFERENCE},ignoreDestinationZoom:{value:!1,kind:_.VIEWER+_.PREFERENCE},imageResourcesPath:{value:"./images/",kind:_.VIEWER},maxCanvasPixels:{value:16777216,compatibility:k.maxCanvasPixels,kind:_.VIEWER},pdfBugEnabled:{value:!1,kind:_.VIEWER+_.PREFERENCE},printResolution:{value:150,kind:_.VIEWER},renderer:{value:"canvas",kind:_.VIEWER},sidebarViewOnLoad:{value:-1,kind:_.VIEWER+_.PREFERENCE},scrollModeOnLoad:{value:-1,kind:_.VIEWER+_.PREFERENCE},spreadModeOnLoad:{value:-1,kind:_.VIEWER+_.PREFERENCE},textLayerMode:{value:1,kind:_.VIEWER+_.PREFERENCE},useOnlyCssZoom:{value:!1,kind:_.VIEWER+_.PREFERENCE},viewerCssTheme:{value:0,kind:_.VIEWER+_.PREFERENCE},viewOnLoad:{value:0,kind:_.VIEWER+_.PREFERENCE},cMapPacked:{value:!0,kind:_.API},cMapUrl:{value:"../web/cmaps/",kind:_.API},disableAutoFetch:{value:!1,kind:_.API+_.PREFERENCE},disableFontFace:{value:!1,kind:_.API+_.PREFERENCE},disableRange:{value:!1,kind:_.API+_.PREFERENCE},disableStream:{value:!1,kind:_.API+_.PREFERENCE},docBaseUrl:{value:"",kind:_.API},enableXfa:{value:!0,kind:_.API+_.PREFERENCE},fontExtraProperties:{value:!1,kind:_.API},isEvalSupported:{value:!0,kind:_.API},maxImageSize:{value:-1,kind:_.API},pdfBug:{value:!1,kind:_.API},standardFontDataUrl:{value:"../web/standard_fonts/",kind:_.API},verbosity:{value:1,kind:_.API},workerPort:{value:null,kind:_.WORKER},workerSrc:{value:"../build/pdf.worker.js",kind:_.WORKER}};p.disablePreferences={value:!1,kind:_.VIEWER},p.locale={value:navigator.language||"en-US",kind:_.VIEWER},p.sandboxBundleSrc={value:"../build/pdf.sandbox.js",kind:_.VIEWER},p.renderer.kind+=_.PREFERENCE;let E=Object.create(null);class M{constructor(){throw new Error("Cannot initialize AppOptions.")}static get(A){let w=E[A];if(w!==void 0)return w;let g=p[A];if(g!==void 0)return g.compatibility??g.value}static getAll(A=null){let w=Object.create(null);for(let g in p){let P=p[g];if(A){if((A&P.kind)===0)continue;if(A===_.PREFERENCE){let L=P.value,R=typeof L;if(R==="boolean"||R==="string"||R==="number"&&Number.isInteger(L)){w[g]=L;continue}throw new Error(`Invalid type for preference: ${g}`)}}let f=E[g];w[g]=f!==void 0?f:P.compatibility??P.value}return w}static set(A,w){E[A]=w}static setAll(A){for(let w in A)E[w]=A[w]}static remove(A){delete E[A]}static _hasUserOptions(){return Object.keys(E).length>0}}s.AppOptions=M},(u,s,k)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFRenderingQueue=void 0;var _=k(3),p=k(6);let E=3e4;class M{constructor(){this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1}setViewer(A){this.pdfViewer=A}setThumbnailViewer(A){this.pdfThumbnailViewer=A}isHighestPriority(A){return this.highestPriorityPage===A.renderingId}hasViewer(){return!!this.pdfViewer}renderHighestPriority(A){this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),!this.pdfViewer.forceRendering(A)&&(this.isThumbnailViewEnabled&&this.pdfThumbnailViewer?.forceRendering()||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),E)))}getHighestPriority(A,w,g,P=!1){let f=A.views,L=f.length;if(L===0)return null;for(let l=0;l<L;l++){let N=f[l].view;if(!this.isViewFinished(N))return N}let R=A.first.id,F=A.last.id;if(F-R+1>L){let l=A.ids;for(let N=1,r=F-R;N<r;N++){let a=g?R+N:F-N;if(l.has(a))continue;let v=w[a-1];if(!this.isViewFinished(v))return v}}let D=g?F:R-2,o=w[D];return o&&!this.isViewFinished(o)||P&&(D+=g?1:-1,o=w[D],o&&!this.isViewFinished(o))?o:null}isViewFinished(A){return A.renderingState===p.RenderingStates.FINISHED}renderView(A){switch(A.renderingState){case p.RenderingStates.FINISHED:return!1;case p.RenderingStates.PAUSED:this.highestPriorityPage=A.renderingId,A.resume();break;case p.RenderingStates.RUNNING:this.highestPriorityPage=A.renderingId;break;case p.RenderingStates.INITIAL:this.highestPriorityPage=A.renderingId,A.draw().finally(()=>{this.renderHighestPriority()}).catch(w=>{w instanceof _.RenderingCancelledException||console.error(`renderView: "${w}"`)});break}return!0}}s.PDFRenderingQueue=M},(u,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TextHighlighter=void 0;class k{constructor({findController:p,eventBus:E,pageIndex:M}){this.findController=p,this.matches=[],this.eventBus=E,this.pageIdx=M,this._onUpdateTextLayerMatches=null,this.textDivs=null,this.textContentItemsStr=null,this.enabled=!1}setTextMapping(p,E){this.textDivs=p,this.textContentItemsStr=E}enable(){if(!this.textDivs||!this.textContentItemsStr)throw new Error("Text divs and strings have not been set.");if(this.enabled)throw new Error("TextHighlighter is already enabled.");this.enabled=!0,this._onUpdateTextLayerMatches||(this._onUpdateTextLayerMatches=p=>{(p.pageIndex===this.pageIdx||p.pageIndex===-1)&&this._updateMatches()},this.eventBus._on("updatetextlayermatches",this._onUpdateTextLayerMatches)),this._updateMatches()}disable(){!this.enabled||(this.enabled=!1,this._onUpdateTextLayerMatches&&(this.eventBus._off("updatetextlayermatches",this._onUpdateTextLayerMatches),this._onUpdateTextLayerMatches=null))}_convertMatches(p,E){if(!p)return[];let{textContentItemsStr:M}=this,b=0,A=0,w=M.length-1,g=[];for(let P=0,f=p.length;P<f;P++){let L=p[P];for(;b!==w&&L>=A+M[b].length;)A+=M[b].length,b++;b===M.length&&console.error("Could not find a matching mapping");let R={begin:{divIdx:b,offset:L-A}};for(L+=E[P];b!==w&&L>A+M[b].length;)A+=M[b].length,b++;R.end={divIdx:b,offset:L-A},g.push(R)}return g}_renderMatches(p){if(p.length===0)return;let{findController:E,pageIdx:M}=this,{textContentItemsStr:b,textDivs:A}=this,w=M===E.selected.pageIdx,g=E.selected.matchIdx,P=E.state.highlightAll,f=null,L={divIdx:-1,offset:void 0};function R(l,N){let r=l.divIdx;return A[r].textContent="",F(r,0,l.offset,N)}function F(l,N,r,a){let v=A[l];if(v.nodeType===Node.TEXT_NODE){let x=document.createElement("span");v.parentNode.insertBefore(x,v),x.appendChild(v),A[l]=x,v=x}let S=b[l].substring(N,r),O=document.createTextNode(S);if(a){let x=document.createElement("span");return x.className=`${a} appended`,x.appendChild(O),v.appendChild(x),a.includes("selected")?x.offsetLeft:0}return v.appendChild(O),0}let D=g,o=D+1;if(P)D=0,o=p.length;else if(!w)return;for(let l=D;l<o;l++){let N=p[l],r=N.begin,a=N.end,v=w&&l===g,S=v?" selected":"",O=0;if(!f||r.divIdx!==f.divIdx?(f!==null&&F(f.divIdx,f.offset,L.offset),R(r)):F(f.divIdx,f.offset,r.offset),r.divIdx===a.divIdx)O=F(r.divIdx,r.offset,a.offset,"highlight"+S);else{O=F(r.divIdx,r.offset,L.offset,"highlight begin"+S);for(let x=r.divIdx+1,I=a.divIdx;x<I;x++)A[x].className="highlight middle"+S;R(a,"highlight end"+S)}f=a,v&&E.scrollMatchIntoView({element:A[r.divIdx],selectedLeft:O,pageIndex:M,matchIndex:g})}f&&F(f.divIdx,f.offset,L.offset)}_updateMatches(){if(!this.enabled)return;let{findController:p,matches:E,pageIdx:M}=this,{textContentItemsStr:b,textDivs:A}=this,w=-1;for(let f=0,L=E.length;f<L;f++){let R=E[f],F=Math.max(w,R.begin.divIdx);for(let D=F,o=R.end.divIdx;D<=o;D++){let l=A[D];l.textContent=b[D],l.className=""}w=R.end.divIdx+1}if(!p?.highlightMatches)return;let g=p.pageMatches[M]||null,P=p.pageMatchesLength[M]||null;this.matches=this._convertMatches(g,P),this._renderMatches(this.matches)}}s.TextHighlighter=k},(u,s,k)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DownloadManager=void 0;var _=k(3);function p(M,b){let A=document.createElement("a");if(!A.click)throw new Error('DownloadManager: "a.click()" is not supported.');A.href=M,A.target="_parent","download"in A&&(A.download=b),(document.body||document.documentElement).appendChild(A),A.click(),A.remove()}class E{constructor(){this._openBlobUrls=new WeakMap}downloadUrl(b,A){if(!(0,_.createValidAbsoluteUrl)(b,"http://example.com")){console.error(`downloadUrl - not a valid URL: ${b}`);return}p(b+"#pdfjs.action=download",A)}downloadData(b,A,w){let g=URL.createObjectURL(new Blob([b],{type:w}));p(g,A)}openOrDownloadData(b,A,w){let g=(0,_.isPdfFile)(w),P=g?"application/pdf":"";if(g){let f=this._openBlobUrls.get(b);f||(f=URL.createObjectURL(new Blob([A],{type:P})),this._openBlobUrls.set(b,f));let L;L="?file="+encodeURIComponent(f+"#"+w);try{return window.open(L),!0}catch(R){console.error(`openOrDownloadData: ${R}`),URL.revokeObjectURL(f),this._openBlobUrls.delete(b)}}return this.downloadData(A,w,P),!1}download(b,A,w,g="download"){let P=URL.createObjectURL(b);p(P,w)}}s.DownloadManager=E},(u,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WaitOnType=s.EventBus=s.AutomationEventBus=void 0,s.waitOnEventOrTimeout=_;let k={EVENT:"event",TIMEOUT:"timeout"};s.WaitOnType=k;function _({target:M,name:b,delay:A=0}){return new Promise(function(w,g){if(typeof M!="object"||!(b&&typeof b=="string")||!(Number.isInteger(A)&&A>=0))throw new Error("waitOnEventOrTimeout - invalid parameters.");function P(F){M instanceof p?M._off(b,f):M.removeEventListener(b,f),R&&clearTimeout(R),w(F)}let f=P.bind(null,k.EVENT);M instanceof p?M._on(b,f):M.addEventListener(b,f);let L=P.bind(null,k.TIMEOUT),R=setTimeout(L,A)})}class p{constructor(){this._listeners=Object.create(null)}on(b,A,w=null){this._on(b,A,{external:!0,once:w?.once})}off(b,A,w=null){this._off(b,A,{external:!0,once:w?.once})}dispatch(b,A){let w=this._listeners[b];if(!w||w.length===0)return;let g;for(let{listener:P,external:f,once:L}of w.slice(0)){if(L&&this._off(b,P),f){(g||=[]).push(P);continue}P(A)}if(g){for(let P of g)P(A);g=null}}_on(b,A,w=null){(this._listeners[b]||=[]).push({listener:A,external:w?.external===!0,once:w?.once===!0})}_off(b,A,w=null){let g=this._listeners[b];if(!!g){for(let P=0,f=g.length;P<f;P++)if(g[P].listener===A){g.splice(P,1);return}}}}s.EventBus=p;class E extends p{dispatch(b,A){throw new Error("Not implemented: AutomationEventBus.dispatch")}}s.AutomationEventBus=E},(u,s,k)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.GenericL10n=void 0,k(19);var _=k(4);let p=document.webL10n;class E{constructor(b){this._lang=b,this._ready=new Promise((A,w)=>{p.setLanguage((0,_.fixupLangCode)(b),()=>{A(p)})})}async getLanguage(){return(await this._ready).getLanguage()}async getDirection(){return(await this._ready).getDirection()}async get(b,A=null,w=(0,_.getL10nFallback)(b,A)){return(await this._ready).get(b,A,w)}async translate(b){return(await this._ready).translate(b)}}s.GenericL10n=E},()=>{document.webL10n=function(u,s,k){var _={},p="",E="textContent",M="",b={},A="loading",w=!0;function g(){return s.querySelectorAll('link[type="application/l10n"]')}function P(){var x=s.querySelector('script[type="application/l10n"]');return x?JSON.parse(x.innerHTML):null}function f(x){return x?x.querySelectorAll("*[data-l10n-id]"):[]}function L(x){if(!x)return{};var I=x.getAttribute("data-l10n-id"),U=x.getAttribute("data-l10n-args"),V={};if(U)try{V=JSON.parse(U)}catch{console.warn("could not parse arguments for #"+I)}return{id:I,args:V}}function R(x,I,U){I=I||function(G){},U=U||function(){};var V=new XMLHttpRequest;V.open("GET",x,w),V.overrideMimeType&&V.overrideMimeType("text/plain; charset=utf-8"),V.onreadystatechange=function(){V.readyState==4&&(V.status==200||V.status===0?I(V.responseText):U())},V.onerror=U,V.ontimeout=U;try{V.send(null)}catch{U()}}function F(x,I,U,V){var z=x.replace(/[^\/]*$/,"")||"./";function G(m){return m.lastIndexOf("\\")<0?m:m.replace(/\\\\/g,"\\").replace(/\\n/g,`
`).replace(/\\r/g,"\r").replace(/\\t/g,"	").replace(/\\b/g,"\b").replace(/\\f/g,"\f").replace(/\\{/g,"{").replace(/\\}/g,"}").replace(/\\"/g,'"').replace(/\\'/g,"'")}function d(m,h){var C={},i=/^\s*|\s*$/,c=/^\s*#|^\s*$/,y=/^\s*\[(.*)\]\s*$/,B=/^\s*@import\s+url\((.*)\)\s*$/i,T=/^([^=\s]*)\s*=\s*(.+)$/;function H(q,X,Y){var Q=q.replace(i,"").split(/[\r\n]+/),W="*",Z=I.split("-",1)[0],ne=!1,te="";function ie(){for(;;){if(!Q.length){Y();return}var re=Q.shift();if(!c.test(re)){if(X){if(te=y.exec(re),te){W=te[1].toLowerCase(),ne=W!=="*"&&W!==I&&W!==Z;continue}else if(ne)continue;if(te=B.exec(re),te){$(z+te[1],ie);return}}var le=re.match(T);le&&le.length==3&&(C[le[1]]=G(le[2]))}}}ie()}function $(q,X){R(q,function(Y){H(Y,!1,X)},function(){console.warn(q+" not found."),X()})}H(m,!0,function(){h(C)})}R(x,function(m){p+=m,d(m,function(h){for(var C in h){var i,c,y=C.lastIndexOf(".");y>0?(i=C.substring(0,y),c=C.substring(y+1)):(i=C,c=E),_[i]||(_[i]={}),_[i][c]=h[C]}U&&U()})},V)}function D(x,I){x&&(x=x.toLowerCase()),I=I||function(){},o(),M=x;var U=g(),V=U.length;if(V===0){var z=P();if(z&&z.locales&&z.default_locale){if(console.log("using the embedded JSON directory, early way out"),_=z.locales[x],!_){var G=z.default_locale.toLowerCase();for(var d in z.locales)if(d=d.toLowerCase(),d===x){_=z.locales[x];break}else d===G&&(_=z.locales[G])}I()}else console.log("no resource to load, early way out");A="complete";return}var m=null,h=0;m=function(){h++,h>=V&&(I(),A="complete")};function C(y){var B=y.href;this.load=function(T,H){F(B,T,H,function(){console.warn(B+" not found."),console.warn('"'+T+'" resource not found'),M="",H()})}}for(var i=0;i<V;i++){var c=new C(U[i]);c.load(x,m)}}function o(){_={},p="",M=""}function l(x){var I={af:3,ak:4,am:4,ar:1,asa:3,az:0,be:11,bem:3,bez:3,bg:3,bh:4,bm:0,bn:3,bo:0,br:20,brx:3,bs:11,ca:3,cgg:3,chr:3,cs:12,cy:17,da:3,de:3,dv:3,dz:0,ee:3,el:3,en:3,eo:3,es:3,et:3,eu:3,fa:0,ff:5,fi:3,fil:4,fo:3,fr:5,fur:3,fy:3,ga:8,gd:24,gl:3,gsw:3,gu:3,guw:4,gv:23,ha:3,haw:3,he:2,hi:4,hr:11,hu:0,id:0,ig:0,ii:0,is:3,it:3,iu:7,ja:0,jmc:3,jv:0,ka:0,kab:5,kaj:3,kcg:3,kde:0,kea:0,kk:3,kl:3,km:0,kn:0,ko:0,ksb:3,ksh:21,ku:3,kw:7,lag:18,lb:3,lg:3,ln:4,lo:0,lt:10,lv:6,mas:3,mg:4,mk:16,ml:3,mn:3,mo:9,mr:3,ms:0,mt:15,my:0,nah:3,naq:7,nb:3,nd:3,ne:3,nl:3,nn:3,no:3,nr:3,nso:4,ny:3,nyn:3,om:3,or:3,pa:3,pap:3,pl:13,ps:3,pt:3,rm:3,ro:9,rof:3,ru:11,rwk:3,sah:0,saq:3,se:7,seh:3,ses:0,sg:0,sh:11,shi:19,sk:12,sl:14,sma:7,smi:7,smj:7,smn:7,sms:7,sn:3,so:3,sq:3,sr:11,ss:3,ssy:3,st:3,sv:3,sw:3,syr:3,ta:3,te:3,teo:3,th:0,ti:4,tig:3,tk:3,tl:4,tn:3,to:0,tr:0,ts:3,tzm:22,uk:11,ur:3,ve:3,vi:0,vun:3,wa:4,wae:3,wo:0,xh:3,xog:3,yo:0,zh:0,zu:3};function U(d,m){return m.indexOf(d)!==-1}function V(d,m,h){return m<=d&&d<=h}var z={"0":function(d){return"other"},"1":function(d){return V(d%100,3,10)?"few":d===0?"zero":V(d%100,11,99)?"many":d==2?"two":d==1?"one":"other"},"2":function(d){return d!==0&&d%10===0?"many":d==2?"two":d==1?"one":"other"},"3":function(d){return d==1?"one":"other"},"4":function(d){return V(d,0,1)?"one":"other"},"5":function(d){return V(d,0,2)&&d!=2?"one":"other"},"6":function(d){return d===0?"zero":d%10==1&&d%100!=11?"one":"other"},"7":function(d){return d==2?"two":d==1?"one":"other"},"8":function(d){return V(d,3,6)?"few":V(d,7,10)?"many":d==2?"two":d==1?"one":"other"},"9":function(d){return d===0||d!=1&&V(d%100,1,19)?"few":d==1?"one":"other"},"10":function(d){return V(d%10,2,9)&&!V(d%100,11,19)?"few":d%10==1&&!V(d%100,11,19)?"one":"other"},"11":function(d){return V(d%10,2,4)&&!V(d%100,12,14)?"few":d%10===0||V(d%10,5,9)||V(d%100,11,14)?"many":d%10==1&&d%100!=11?"one":"other"},"12":function(d){return V(d,2,4)?"few":d==1?"one":"other"},"13":function(d){return V(d%10,2,4)&&!V(d%100,12,14)?"few":d!=1&&V(d%10,0,1)||V(d%10,5,9)||V(d%100,12,14)?"many":d==1?"one":"other"},"14":function(d){return V(d%100,3,4)?"few":d%100==2?"two":d%100==1?"one":"other"},"15":function(d){return d===0||V(d%100,2,10)?"few":V(d%100,11,19)?"many":d==1?"one":"other"},"16":function(d){return d%10==1&&d!=11?"one":"other"},"17":function(d){return d==3?"few":d===0?"zero":d==6?"many":d==2?"two":d==1?"one":"other"},"18":function(d){return d===0?"zero":V(d,0,2)&&d!==0&&d!=2?"one":"other"},"19":function(d){return V(d,2,10)?"few":V(d,0,1)?"one":"other"},"20":function(d){return(V(d%10,3,4)||d%10==9)&&!(V(d%100,10,19)||V(d%100,70,79)||V(d%100,90,99))?"few":d%1e6===0&&d!==0?"many":d%10==2&&!U(d%100,[12,72,92])?"two":d%10==1&&!U(d%100,[11,71,91])?"one":"other"},"21":function(d){return d===0?"zero":d==1?"one":"other"},"22":function(d){return V(d,0,1)||V(d,11,99)?"one":"other"},"23":function(d){return V(d%10,1,2)||d%20===0?"one":"other"},"24":function(d){return V(d,3,10)||V(d,13,19)?"few":U(d,[2,12])?"two":U(d,[1,11])?"one":"other"}},G=I[x.replace(/-.*$/,"")];return G in z?z[G]:(console.warn("plural form unknown for ["+x+"]"),function(){return"other"})}b.plural=function(x,I,U,V){var z=parseFloat(I);if(isNaN(z)||V!=E)return x;b._pluralRules||(b._pluralRules=l(M));var G="["+b._pluralRules(z)+"]";return z===0&&U+"[zero]"in _?x=_[U+"[zero]"][V]:z==1&&U+"[one]"in _?x=_[U+"[one]"][V]:z==2&&U+"[two]"in _?x=_[U+"[two]"][V]:U+G in _?x=_[U+G][V]:U+"[other]"in _&&(x=_[U+"[other]"][V]),x};function N(x,I,U){var V=_[x];if(!V){if(console.warn("#"+x+" is undefined."),!U)return null;V=U}var z={};for(var G in V){var d=V[G];d=r(d,I,x,G),d=a(d,I,x),z[G]=d}return z}function r(x,I,U,V){var z=/\{\[\s*([a-zA-Z]+)\(([a-zA-Z]+)\)\s*\]\}/,G=z.exec(x);if(!G||!G.length)return x;var d=G[1],m=G[2],h;if(I&&m in I?h=I[m]:m in _&&(h=_[m]),d in b){var C=b[d];x=C(x,h,U,V)}return x}function a(x,I,U){var V=/\{\{\s*(.+?)\s*\}\}/g;return x.replace(V,function(z,G){return I&&G in I?I[G]:G in _?_[G]:(console.log("argument {{"+G+"}} for #"+U+" is undefined."),z)})}function v(x){var I=L(x);if(!!I.id){var U=N(I.id,I.args);if(!U){console.warn("#"+I.id+" is undefined.");return}if(U[E]){if(S(x)===0)x[E]=U[E];else{for(var V=x.childNodes,z=!1,G=0,d=V.length;G<d;G++)V[G].nodeType===3&&/\S/.test(V[G].nodeValue)&&(z?V[G].nodeValue="":(V[G].nodeValue=U[E],z=!0));if(!z){var m=s.createTextNode(U[E]);x.insertBefore(m,x.firstChild)}}delete U[E]}for(var h in U)x[h]=U[h]}}function S(x){if(x.children)return x.children.length;if(typeof x.childElementCount<"u")return x.childElementCount;for(var I=0,U=0;U<x.childNodes.length;U++)I+=x.nodeType===1?1:0;return I}function O(x){x=x||s.documentElement;for(var I=f(x),U=I.length,V=0;V<U;V++)v(I[V]);v(x)}return{get:function(x,I,U){var V=x.lastIndexOf("."),z=E;V>0&&(z=x.substring(V+1),x=x.substring(0,V));var G;U&&(G={},G[z]=U);var d=N(x,I,G);return d&&z in d?d[z]:"{{"+x+"}}"},getData:function(){return _},getText:function(){return p},getLanguage:function(){return M},setLanguage:function(x,I){D(x,function(){I&&I()})},getDirection:function(){var x=["ar","he","fa","ps","ur"],I=M.split("-",1)[0];return x.indexOf(I)>=0?"rtl":"ltr"},translate:O,getReadyState:function(){return A},ready:function(x){if(x)A=="complete"||A=="interactive"?u.setTimeout(function(){x()}):s.addEventListener&&s.addEventListener("localized",function I(){s.removeEventListener("localized",I),x()});else return}}}(window,document)},(u,s,k)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFFindController=s.FindState=void 0;var _=k(6),p=k(3),E=k(21);let M={FOUND:0,NOT_FOUND:1,WRAPPED:2,PENDING:3};s.FindState=M;let b=250,A=-50,w=-400,g={"\u2010":"-","\u2018":"'","\u2019":"'","\u201A":"'","\u201B":"'","\u201C":'"',"\u201D":'"',"\u201E":'"',"\u201F":'"',"\xBC":"1/4","\xBD":"1/2","\xBE":"3/4"},P=new Set([12441,12442,2381,2509,2637,2765,2893,3021,3149,3277,3387,3388,3405,3530,3642,3770,3972,4153,4154,5908,5940,6098,6752,6980,7082,7083,7154,7155,11647,43014,43052,43204,43347,43456,43766,44013,3158,3953,3954,3962,3963,3964,3965,3968,3956]),f=[...P.values()].map(a=>String.fromCharCode(a)).join(""),L=/\p{M}+/gu,R=/([.*+?^${}()|[\]\\])|(\p{P})|(\s+)|(\p{M})|(\p{L})/gu,F=/([^\p{M}])\p{M}*$/u,D=/^\p{M}*([^\p{M}])/u,o=null;function l(a){if(!o){let d=Object.keys(g).join("");o=new RegExp(`([${d}])|(\\p{M}+(?:-\\n)?)|(\\S-\\n)|(\\n)`,"gum")}let v=[],S;for(;(S=L.exec(a))!==null;)v.push([S[0].length,S.index]);let O=a.normalize("NFD"),x=[[0,0]],I=0,U=0,V=0,z=0,G=!1;return O=O.replace(o,(d,m,h,C,i,c)=>{if(c-=V,m){let y=g[d],B=y.length;for(let T=1;T<B;T++)x.push([c-U+T,U-T]);return U-=B-1,y}if(h){let y=h.endsWith(`
`),B=y?h.length-2:h.length;G=!0;let T=B;c+z===v[I]?.[1]&&(T-=v[I][0],++I);for(let H=1;H<T+1;H++)x.push([c-1-U+H,U-H]);return U-=T,V+=T,y?(c+=B-1,x.push([c-U+1,1+U]),U+=1,V+=1,z+=1,h.slice(0,B)):h}return C?(x.push([c-U+1,1+U]),U+=1,V+=1,z+=1,C.charAt(0)):(x.push([c-U+1,U-1]),U-=1,V+=1,z+=1," ")}),x.push([O.length,U]),[O,x,G]}function N(a,v,S){if(!a)return[v,S];let O=v,x=v+S,I=(0,_.binarySearchFirstItem)(a,V=>V[0]>=O);a[I][0]>O&&--I;let U=(0,_.binarySearchFirstItem)(a,V=>V[0]>=x,I);return a[U][0]>x&&--U,[O+a[I][1],S+a[U][1]-a[I][1]]}class r{constructor({linkService:v,eventBus:S}){this._linkService=v,this._eventBus=S,this._reset(),S._on("find",this._onFind.bind(this)),S._on("findbarclose",this._onFindBarClose.bind(this)),this.executeCommand=(O,x)=>{console.error('Deprecated method `PDFFindController.executeCommand` called, please dispatch a "find"-event using the EventBus instead.');let I=Object.assign(Object.create(null),x,{type:O.substring(4)});this._onFind(I)}}get highlightMatches(){return this._highlightMatches}get pageMatches(){return this._pageMatches}get pageMatchesLength(){return this._pageMatchesLength}get selected(){return this._selected}get state(){return this._state}setDocument(v){this._pdfDocument&&this._reset(),v&&(this._pdfDocument=v,this._firstPageCapability.resolve())}_onFind(v){if(!v)return;let S=this._pdfDocument,{type:O}=v;(this._state===null||this._shouldDirtyMatch(v))&&(this._dirtyMatch=!0),this._state=v,O!=="highlightallchange"&&this._updateUIState(M.PENDING),this._firstPageCapability.promise.then(()=>{if(!this._pdfDocument||S&&this._pdfDocument!==S)return;this._extractText();let x=!this._highlightMatches,I=!!this._findTimeout;this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),O?this._dirtyMatch?this._nextMatch():O==="again"?(this._nextMatch(),x&&this._state.highlightAll&&this._updateAllPages()):O==="highlightallchange"?(I?this._nextMatch():this._highlightMatches=!0,this._updateAllPages()):this._nextMatch():this._findTimeout=setTimeout(()=>{this._nextMatch(),this._findTimeout=null},b)})}scrollMatchIntoView({element:v=null,selectedLeft:S=0,pageIndex:O=-1,matchIndex:x=-1}){if(!this._scrollMatches||!v)return;if(x===-1||x!==this._selected.matchIdx)return;if(O===-1||O!==this._selected.pageIdx)return;this._scrollMatches=!1;let I={top:A,left:S+w};(0,_.scrollIntoView)(v,I,!0)}_reset(){this._highlightMatches=!1,this._scrollMatches=!1,this._pdfDocument=null,this._pageMatches=[],this._pageMatchesLength=[],this._state=null,this._selected={pageIdx:-1,matchIdx:-1},this._offset={pageIdx:null,matchIdx:null,wrapped:!1},this._extractTextPromises=[],this._pageContents=[],this._pageDiffs=[],this._hasDiacritics=[],this._matchesCountTotal=0,this._pagesToSearch=null,this._pendingFindMatches=new Set,this._resumePageIdx=null,this._dirtyMatch=!1,clearTimeout(this._findTimeout),this._findTimeout=null,this._firstPageCapability=(0,p.createPromiseCapability)()}get _query(){return this._state.query!==this._rawQuery&&(this._rawQuery=this._state.query,[this._normalizedQuery]=l(this._state.query)),this._normalizedQuery}_shouldDirtyMatch(v){if(v.query!==this._state.query)return!0;switch(v.type){case"again":let S=this._selected.pageIdx+1,O=this._linkService;return S>=1&&S<=O.pagesCount&&S!==O.page&&!O.isPageVisible(S);case"highlightallchange":return!1}return!0}_isEntireWord(v,S,O){let x=v.slice(0,S).match(F);if(x){let I=v.charCodeAt(S),U=x[1].charCodeAt(0);if((0,E.getCharacterType)(I)===(0,E.getCharacterType)(U))return!1}if(x=v.slice(S+O).match(D),x){let I=v.charCodeAt(S+O-1),U=x[1].charCodeAt(0);if((0,E.getCharacterType)(I)===(0,E.getCharacterType)(U))return!1}return!0}_calculateRegExpMatch(v,S,O,x){let I=[],U=[],V=this._pageDiffs[O],z;for(;(z=v.exec(x))!==null;){if(S&&!this._isEntireWord(x,z.index,z[0].length))continue;let[G,d]=N(V,z.index,z[0].length);d&&(I.push(G),U.push(d))}this._pageMatches[O]=I,this._pageMatchesLength[O]=U}_convertToRegExpString(v,S){let{matchDiacritics:O}=this._state,x=!1;v=v.replace(R,(U,V,z,G,d,m)=>V?`[ ]*\\${V}[ ]*`:z?`[ ]*${z}[ ]*`:G?"[ ]+":O?d||m:d?P.has(d.charCodeAt(0))?d:"":S?(x=!0,`${m}\\p{M}*`):m);let I="[ ]*";return v.endsWith(I)&&(v=v.slice(0,v.length-I.length)),O&&S&&(x=!0,v=`${v}(?=[${f}]|[^\\p{M}]|$)`),[x,v]}_calculateMatch(v){let S=this._query;if(S.length===0)return;let{caseSensitive:O,entireWord:x,phraseSearch:I}=this._state,U=this._pageContents[v],V=this._hasDiacritics[v],z=!1;if(I)[z,S]=this._convertToRegExpString(S,V);else{let m=S.match(/\S+/g);m&&(S=m.sort().reverse().map(h=>{let[C,i]=this._convertToRegExpString(h,V);return z||=C,`(${i})`}).join("|"))}let G=`g${z?"u":""}${O?"":"i"}`;S=new RegExp(S,G),this._calculateRegExpMatch(S,x,v,U),this._state.highlightAll&&this._updatePage(v),this._resumePageIdx===v&&(this._resumePageIdx=null,this._nextPageMatch());let d=this._pageMatches[v].length;d>0&&(this._matchesCountTotal+=d,this._updateUIResultsCount())}_extractText(){if(this._extractTextPromises.length>0)return;let v=Promise.resolve();for(let S=0,O=this._linkService.pagesCount;S<O;S++){let x=(0,p.createPromiseCapability)();this._extractTextPromises[S]=x.promise,v=v.then(()=>this._pdfDocument.getPage(S+1).then(I=>I.getTextContent()).then(I=>{let U=I.items,V=[];for(let z=0,G=U.length;z<G;z++)V.push(U[z].str),U[z].hasEOL&&V.push(`
`);[this._pageContents[S],this._pageDiffs[S],this._hasDiacritics[S]]=l(V.join("")),x.resolve(S)},I=>{console.error(`Unable to get text content for page ${S+1}`,I),this._pageContents[S]="",this._pageDiffs[S]=null,this._hasDiacritics[S]=!1,x.resolve(S)}))}}_updatePage(v){this._scrollMatches&&this._selected.pageIdx===v&&(this._linkService.page=v+1),this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:v})}_updateAllPages(){this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:-1})}_nextMatch(){let v=this._state.findPrevious,S=this._linkService.page-1,O=this._linkService.pagesCount;if(this._highlightMatches=!0,this._dirtyMatch){this._dirtyMatch=!1,this._selected.pageIdx=this._selected.matchIdx=-1,this._offset.pageIdx=S,this._offset.matchIdx=null,this._offset.wrapped=!1,this._resumePageIdx=null,this._pageMatches.length=0,this._pageMatchesLength.length=0,this._matchesCountTotal=0,this._updateAllPages();for(let I=0;I<O;I++)this._pendingFindMatches.has(I)||(this._pendingFindMatches.add(I),this._extractTextPromises[I].then(U=>{this._pendingFindMatches.delete(U),this._calculateMatch(U)}))}if(this._query===""){this._updateUIState(M.FOUND);return}if(this._resumePageIdx)return;let x=this._offset;if(this._pagesToSearch=O,x.matchIdx!==null){let I=this._pageMatches[x.pageIdx].length;if(!v&&x.matchIdx+1<I||v&&x.matchIdx>0){x.matchIdx=v?x.matchIdx-1:x.matchIdx+1,this._updateMatch(!0);return}this._advanceOffsetPage(v)}this._nextPageMatch()}_matchesReady(v){let S=this._offset,O=v.length,x=this._state.findPrevious;return O?(S.matchIdx=x?O-1:0,this._updateMatch(!0),!0):(this._advanceOffsetPage(x),S.wrapped&&(S.matchIdx=null,this._pagesToSearch<0)?(this._updateMatch(!1),!0):!1)}_nextPageMatch(){this._resumePageIdx!==null&&console.error("There can only be one pending page.");let v=null;do{let S=this._offset.pageIdx;if(v=this._pageMatches[S],!v){this._resumePageIdx=S;break}}while(!this._matchesReady(v))}_advanceOffsetPage(v){let S=this._offset,O=this._linkService.pagesCount;S.pageIdx=v?S.pageIdx-1:S.pageIdx+1,S.matchIdx=null,this._pagesToSearch--,(S.pageIdx>=O||S.pageIdx<0)&&(S.pageIdx=v?O-1:0,S.wrapped=!0)}_updateMatch(v=!1){let S=M.NOT_FOUND,O=this._offset.wrapped;if(this._offset.wrapped=!1,v){let x=this._selected.pageIdx;this._selected.pageIdx=this._offset.pageIdx,this._selected.matchIdx=this._offset.matchIdx,S=O?M.WRAPPED:M.FOUND,x!==-1&&x!==this._selected.pageIdx&&this._updatePage(x)}this._updateUIState(S,this._state.findPrevious),this._selected.pageIdx!==-1&&(this._scrollMatches=!0,this._updatePage(this._selected.pageIdx))}_onFindBarClose(v){let S=this._pdfDocument;this._firstPageCapability.promise.then(()=>{!this._pdfDocument||S&&this._pdfDocument!==S||(this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),this._resumePageIdx&&(this._resumePageIdx=null,this._dirtyMatch=!0),this._updateUIState(M.FOUND),this._highlightMatches=!1,this._updateAllPages())})}_requestMatchesCount(){let{pageIdx:v,matchIdx:S}=this._selected,O=0,x=this._matchesCountTotal;if(S!==-1){for(let I=0;I<v;I++)O+=this._pageMatches[I]?.length||0;O+=S+1}return(O<1||O>x)&&(O=x=0),{current:O,total:x}}_updateUIResultsCount(){this._eventBus.dispatch("updatefindmatchescount",{source:this,matchesCount:this._requestMatchesCount()})}_updateUIState(v,S=!1){this._eventBus.dispatch("updatefindcontrolstate",{source:this,state:v,previous:S,matchesCount:this._requestMatchesCount(),rawQuery:this._state?.query??null})}}s.PDFFindController=r},(u,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CharacterType=void 0,s.getCharacterType=L;let k={SPACE:0,ALPHA_LETTER:1,PUNCT:2,HAN_LETTER:3,KATAKANA_LETTER:4,HIRAGANA_LETTER:5,HALFWIDTH_KATAKANA_LETTER:6,THAI_LETTER:7};s.CharacterType=k;function _(R){return R<11904}function p(R){return(R&65408)===0}function E(R){return R>=97&&R<=122||R>=65&&R<=90}function M(R){return R>=48&&R<=57}function b(R){return R===32||R===9||R===13||R===10}function A(R){return R>=13312&&R<=40959||R>=63744&&R<=64255}function w(R){return R>=12448&&R<=12543}function g(R){return R>=12352&&R<=12447}function P(R){return R>=65376&&R<=65439}function f(R){return(R&65408)===3584}function L(R){return _(R)?p(R)?b(R)?k.SPACE:E(R)||M(R)||R===95?k.ALPHA_LETTER:k.PUNCT:f(R)?k.THAI_LETTER:R===160?k.SPACE:k.ALPHA_LETTER:A(R)?k.HAN_LETTER:w(R)?k.KATAKANA_LETTER:g(R)?k.HIRAGANA_LETTER:P(R)?k.HALFWIDTH_KATAKANA_LETTER:k.ALPHA_LETTER}},(u,s,k)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFHistory=void 0,s.isDestArraysEqual=P,s.isDestHashesEqual=g;var _=k(6),p=k(17);let E=1e3,M=50,b=1e3;function A(){return document.location.hash}class w{constructor({linkService:L,eventBus:R}){this.linkService=L,this.eventBus=R,this._initialized=!1,this._fingerprint="",this.reset(),this._boundEvents=null,this._isViewerInPresentationMode=!1,this.eventBus._on("presentationmodechanged",F=>{this._isViewerInPresentationMode=F.state!==_.PresentationModeState.NORMAL}),this.eventBus._on("pagesinit",()=>{this._isPagesLoaded=!1,this.eventBus._on("pagesloaded",F=>{this._isPagesLoaded=!!F.pagesCount},{once:!0})})}initialize({fingerprint:L,resetHistory:R=!1,updateUrl:F=!1}){if(!L||typeof L!="string"){console.error('PDFHistory.initialize: The "fingerprint" must be a non-empty string.');return}this._initialized&&this.reset();let D=this._fingerprint!==""&&this._fingerprint!==L;this._fingerprint=L,this._updateUrl=F===!0,this._initialized=!0,this._bindEvents();let o=window.history.state;if(this._popStateInProgress=!1,this._blockHashChange=0,this._currentHash=A(),this._numPositionUpdates=0,this._uid=this._maxUid=0,this._destination=null,this._position=null,!this._isValidState(o,!0)||R){let{hash:N,page:r,rotation:a}=this._parseCurrentHash(!0);if(!N||D||R){this._pushOrReplaceState(null,!0);return}this._pushOrReplaceState({hash:N,page:r,rotation:a},!0);return}let l=o.destination;this._updateInternalState(l,o.uid,!0),l.rotation!==void 0&&(this._initialRotation=l.rotation),l.dest?(this._initialBookmark=JSON.stringify(l.dest),this._destination.page=null):l.hash?this._initialBookmark=l.hash:l.page&&(this._initialBookmark=`page=${l.page}`)}reset(){this._initialized&&(this._pageHide(),this._initialized=!1,this._unbindEvents()),this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._initialBookmark=null,this._initialRotation=null}push({namedDest:L=null,explicitDest:R,pageNumber:F}){if(!this._initialized)return;if(L&&typeof L!="string"){console.error(`PDFHistory.push: "${L}" is not a valid namedDest parameter.`);return}else if(Array.isArray(R)){if(!this._isValidPage(F)&&(F!==null||this._destination)){console.error(`PDFHistory.push: "${F}" is not a valid pageNumber parameter.`);return}}else{console.error(`PDFHistory.push: "${R}" is not a valid explicitDest parameter.`);return}let D=L||JSON.stringify(R);if(!D)return;let o=!1;if(this._destination&&(g(this._destination.hash,D)||P(this._destination.dest,R))){if(this._destination.page)return;o=!0}this._popStateInProgress&&!o||(this._pushOrReplaceState({dest:R,hash:D,page:F,rotation:this.linkService.rotation},o),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1})))}pushPage(L){if(!!this._initialized){if(!this._isValidPage(L)){console.error(`PDFHistory.pushPage: "${L}" is not a valid page number.`);return}this._destination?.page!==L&&(this._popStateInProgress||(this._pushOrReplaceState({dest:null,hash:`page=${L}`,page:L,rotation:this.linkService.rotation}),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1}))))}}pushCurrentPosition(){!this._initialized||this._popStateInProgress||this._tryPushCurrentPosition()}back(){if(!this._initialized||this._popStateInProgress)return;let L=window.history.state;this._isValidState(L)&&L.uid>0&&window.history.back()}forward(){if(!this._initialized||this._popStateInProgress)return;let L=window.history.state;this._isValidState(L)&&L.uid<this._maxUid&&window.history.forward()}get popStateInProgress(){return this._initialized&&(this._popStateInProgress||this._blockHashChange>0)}get initialBookmark(){return this._initialized?this._initialBookmark:null}get initialRotation(){return this._initialized?this._initialRotation:null}_pushOrReplaceState(L,R=!1){let F=R||!this._destination,D={fingerprint:this._fingerprint,uid:F?this._uid:this._uid+1,destination:L};this._updateInternalState(L,D.uid);let o;if(this._updateUrl&&L?.hash){let l=document.location.href.split("#")[0];l.startsWith("file://")||(o=`${l}#${L.hash}`)}F?window.history.replaceState(D,"",o):window.history.pushState(D,"",o)}_tryPushCurrentPosition(L=!1){if(!this._position)return;let R=this._position;if(L&&(R=Object.assign(Object.create(null),this._position),R.temporary=!0),!this._destination){this._pushOrReplaceState(R);return}if(this._destination.temporary){this._pushOrReplaceState(R,!0);return}if(this._destination.hash===R.hash||!this._destination.page&&(M<=0||this._numPositionUpdates<=M))return;let F=!1;if(this._destination.page>=R.first&&this._destination.page<=R.page){if(this._destination.dest!==void 0||!this._destination.first)return;F=!0}this._pushOrReplaceState(R,F)}_isValidPage(L){return Number.isInteger(L)&&L>0&&L<=this.linkService.pagesCount}_isValidState(L,R=!1){if(!L)return!1;if(L.fingerprint!==this._fingerprint)if(R){if(typeof L.fingerprint!="string"||L.fingerprint.length!==this._fingerprint.length)return!1;let[F]=performance.getEntriesByType("navigation");if(F?.type!=="reload")return!1}else return!1;return!(!Number.isInteger(L.uid)||L.uid<0||L.destination===null||typeof L.destination!="object")}_updateInternalState(L,R,F=!1){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),F&&L?.temporary&&delete L.temporary,this._destination=L,this._uid=R,this._maxUid=Math.max(this._maxUid,R),this._numPositionUpdates=0}_parseCurrentHash(L=!1){let R=unescape(A()).substring(1),F=(0,_.parseQueryString)(R),D=F.get("nameddest")||"",o=F.get("page")|0;return(!this._isValidPage(o)||L&&D.length>0)&&(o=null),{hash:R,page:o,rotation:this.linkService.rotation}}_updateViewarea({location:L}){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._position={hash:this._isViewerInPresentationMode?`page=${L.pageNumber}`:L.pdfOpenParams.substring(1),page:this.linkService.page,first:L.pageNumber,rotation:L.rotation},!this._popStateInProgress&&(M>0&&this._isPagesLoaded&&this._destination&&!this._destination.page&&this._numPositionUpdates++,b>0&&(this._updateViewareaTimeout=setTimeout(()=>{this._popStateInProgress||this._tryPushCurrentPosition(!0),this._updateViewareaTimeout=null},b)))}_popState({state:L}){let R=A(),F=this._currentHash!==R;if(this._currentHash=R,!L){this._uid++;let{hash:o,page:l,rotation:N}=this._parseCurrentHash();this._pushOrReplaceState({hash:o,page:l,rotation:N},!0);return}if(!this._isValidState(L))return;this._popStateInProgress=!0,F&&(this._blockHashChange++,(0,p.waitOnEventOrTimeout)({target:window,name:"hashchange",delay:E}).then(()=>{this._blockHashChange--}));let D=L.destination;this._updateInternalState(D,L.uid,!0),(0,_.isValidRotation)(D.rotation)&&(this.linkService.rotation=D.rotation),D.dest?this.linkService.goToDestination(D.dest):D.hash?this.linkService.setHash(D.hash):D.page&&(this.linkService.page=D.page),Promise.resolve().then(()=>{this._popStateInProgress=!1})}_pageHide(){(!this._destination||this._destination.temporary)&&this._tryPushCurrentPosition()}_bindEvents(){this._boundEvents||(this._boundEvents={updateViewarea:this._updateViewarea.bind(this),popState:this._popState.bind(this),pageHide:this._pageHide.bind(this)},this.eventBus._on("updateviewarea",this._boundEvents.updateViewarea),window.addEventListener("popstate",this._boundEvents.popState),window.addEventListener("pagehide",this._boundEvents.pageHide))}_unbindEvents(){!this._boundEvents||(this.eventBus._off("updateviewarea",this._boundEvents.updateViewarea),window.removeEventListener("popstate",this._boundEvents.popState),window.removeEventListener("pagehide",this._boundEvents.pageHide),this._boundEvents=null)}}s.PDFHistory=w;function g(f,L){return typeof f!="string"||typeof L!="string"?!1:f===L||(0,_.parseQueryString)(f).get("nameddest")===L}function P(f,L){function R(F,D){if(typeof F!=typeof D||Array.isArray(F)||Array.isArray(D))return!1;if(F!==null&&typeof F=="object"&&D!==null){if(Object.keys(F).length!==Object.keys(D).length)return!1;for(let o in F)if(!R(F[o],D[o]))return!1;return!0}return F===D||Number.isNaN(F)&&Number.isNaN(D)}if(!(Array.isArray(f)&&Array.isArray(L))||f.length!==L.length)return!1;for(let F=0,D=f.length;F<D;F++)if(!R(f[F],L[F]))return!1;return!0}},(u,s,k)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFScriptingManager=void 0;var _=k(6),p=k(3);class E{constructor({eventBus:b,sandboxBundleSrc:A=null,scriptingFactory:w=null,docPropertiesLookup:g=null}){this._pdfDocument=null,this._pdfViewer=null,this._closeCapability=null,this._destroyCapability=null,this._scripting=null,this._mouseState=Object.create(null),this._ready=!1,this._eventBus=b,this._sandboxBundleSrc=A,this._scriptingFactory=w,this._docPropertiesLookup=g,this._scriptingFactory||window.addEventListener("updatefromsandbox",P=>{this._eventBus.dispatch("updatefromsandbox",{source:window,detail:P.detail})})}setViewer(b){this._pdfViewer=b}async setDocument(b){if(this._pdfDocument&&await this._destroyScripting(),this._pdfDocument=b,!b)return;let[A,w,g]=await Promise.all([b.getFieldObjects(),b.getCalculationOrderIds(),b.getJSActions()]);if(!A&&!g){await this._destroyScripting();return}if(b===this._pdfDocument){try{this._scripting=this._createScripting()}catch(P){console.error(`PDFScriptingManager.setDocument: "${P?.message}".`),await this._destroyScripting();return}this._internalEvents.set("updatefromsandbox",P=>{P?.source===window&&this._updateFromSandbox(P.detail)}),this._internalEvents.set("dispatcheventinsandbox",P=>{this._scripting?.dispatchEventInSandbox(P.detail)}),this._internalEvents.set("pagechanging",({pageNumber:P,previous:f})=>{P!==f&&(this._dispatchPageClose(f),this._dispatchPageOpen(P))}),this._internalEvents.set("pagerendered",({pageNumber:P})=>{!this._pageOpenPending.has(P)||P===this._pdfViewer.currentPageNumber&&this._dispatchPageOpen(P)}),this._internalEvents.set("pagesdestroy",async P=>{await this._dispatchPageClose(this._pdfViewer.currentPageNumber),await this._scripting?.dispatchEventInSandbox({id:"doc",name:"WillClose"}),this._closeCapability?.resolve()}),this._domEvents.set("mousedown",P=>{this._mouseState.isDown=!0}),this._domEvents.set("mouseup",P=>{this._mouseState.isDown=!1});for(let[P,f]of this._internalEvents)this._eventBus._on(P,f);for(let[P,f]of this._domEvents)window.addEventListener(P,f);try{let P=await this._getDocProperties();if(b!==this._pdfDocument)return;await this._scripting.createSandbox({objects:A,calculationOrder:w,appInfo:{platform:navigator.platform,language:navigator.language},docInfo:{...P,actions:g}}),this._eventBus.dispatch("sandboxcreated",{source:this})}catch(P){console.error(`PDFScriptingManager.setDocument: "${P?.message}".`),await this._destroyScripting();return}await this._scripting?.dispatchEventInSandbox({id:"doc",name:"Open"}),await this._dispatchPageOpen(this._pdfViewer.currentPageNumber,!0),Promise.resolve().then(()=>{b===this._pdfDocument&&(this._ready=!0)})}}async dispatchWillSave(b){return this._scripting?.dispatchEventInSandbox({id:"doc",name:"WillSave"})}async dispatchDidSave(b){return this._scripting?.dispatchEventInSandbox({id:"doc",name:"DidSave"})}async dispatchWillPrint(b){return this._scripting?.dispatchEventInSandbox({id:"doc",name:"WillPrint"})}async dispatchDidPrint(b){return this._scripting?.dispatchEventInSandbox({id:"doc",name:"DidPrint"})}get mouseState(){return this._mouseState}get destroyPromise(){return this._destroyCapability?.promise||null}get ready(){return this._ready}get _internalEvents(){return(0,p.shadow)(this,"_internalEvents",new Map)}get _domEvents(){return(0,p.shadow)(this,"_domEvents",new Map)}get _pageOpenPending(){return(0,p.shadow)(this,"_pageOpenPending",new Set)}get _visitedPages(){return(0,p.shadow)(this,"_visitedPages",new Map)}async _updateFromSandbox(b){let A=this._pdfViewer.isInPresentationMode||this._pdfViewer.isChangingPresentationMode,{id:w,siblings:g,command:P,value:f}=b;if(!w){switch(P){case"clear":console.clear();break;case"error":console.error(f);break;case"layout":if(A)return;let R=(0,_.apiPageLayoutToViewerModes)(f);this._pdfViewer.spreadMode=R.spreadMode;break;case"page-num":this._pdfViewer.currentPageNumber=f+1;break;case"print":await this._pdfViewer.pagesPromise,this._eventBus.dispatch("print",{source:this});break;case"println":console.log(f);break;case"zoom":if(A)return;this._pdfViewer.currentScaleValue=f;break;case"SaveAs":this._eventBus.dispatch("save",{source:this});break;case"FirstPage":this._pdfViewer.currentPageNumber=1;break;case"LastPage":this._pdfViewer.currentPageNumber=this._pdfViewer.pagesCount;break;case"NextPage":this._pdfViewer.nextPage();break;case"PrevPage":this._pdfViewer.previousPage();break;case"ZoomViewIn":if(A)return;this._pdfViewer.increaseScale();break;case"ZoomViewOut":if(A)return;this._pdfViewer.decreaseScale();break}return}if(A&&b.focus)return;delete b.id,delete b.siblings;let L=g?[w,...g]:[w];for(let R of L){let F=document.getElementById(R);F?F.dispatchEvent(new CustomEvent("updatefromsandbox",{detail:b})):this._pdfDocument?.annotationStorage.setValue(R,b)}}async _dispatchPageOpen(b,A=!1){let w=this._pdfDocument,g=this._visitedPages;if(A&&(this._closeCapability=(0,p.createPromiseCapability)()),!this._closeCapability)return;let P=this._pdfViewer.getPageView(b-1);if(P?.renderingState!==_.RenderingStates.FINISHED){this._pageOpenPending.add(b);return}this._pageOpenPending.delete(b);let f=(async()=>{let L=await(g.has(b)?null:P.pdfPage?.getJSActions());w===this._pdfDocument&&await this._scripting?.dispatchEventInSandbox({id:"page",name:"PageOpen",pageNumber:b,actions:L})})();g.set(b,f)}async _dispatchPageClose(b){let A=this._pdfDocument,w=this._visitedPages;if(!this._closeCapability||this._pageOpenPending.has(b))return;let g=w.get(b);!g||(w.set(b,null),await g,A===this._pdfDocument&&await this._scripting?.dispatchEventInSandbox({id:"page",name:"PageClose",pageNumber:b}))}async _getDocProperties(){if(this._docPropertiesLookup)return this._docPropertiesLookup(this._pdfDocument);let{docPropertiesLookup:b}=k(24);return b(this._pdfDocument)}_createScripting(){if(this._destroyCapability=(0,p.createPromiseCapability)(),this._scripting)throw new Error("_createScripting: Scripting already exists.");if(this._scriptingFactory)return this._scriptingFactory.createScripting({sandboxBundleSrc:this._sandboxBundleSrc});let{GenericScripting:b}=k(24);return new b(this._sandboxBundleSrc)}async _destroyScripting(){if(!this._scripting){this._pdfDocument=null,this._destroyCapability?.resolve();return}this._closeCapability&&(await Promise.race([this._closeCapability.promise,new Promise(b=>{setTimeout(b,1e3)})]).catch(b=>{}),this._closeCapability=null),this._pdfDocument=null;try{await this._scripting.destroySandbox()}catch{}for(let[b,A]of this._internalEvents)this._eventBus._off(b,A);this._internalEvents.clear();for(let[b,A]of this._domEvents)window.removeEventListener(b,A);this._domEvents.clear(),this._pageOpenPending.clear(),this._visitedPages.clear(),this._scripting=null,delete this._mouseState.isDown,this._ready=!1,this._destroyCapability?.resolve()}}s.PDFScriptingManager=E},(u,s,k)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.GenericScripting=void 0,s.docPropertiesLookup=p;var _=k(3);async function p(M){let b="",A=b.split("#")[0],{info:w,metadata:g,contentDispositionFilename:P,contentLength:f}=await M.getMetadata();if(!f){let{length:L}=await M.getDownloadInfo();f=L}return{...w,baseURL:A,filesize:f,filename:P||(0,_.getPdfFilenameFromUrl)(b),metadata:g?.getRaw(),authors:g?.get("dc:creator"),numPages:M.numPages,URL:b}}class E{constructor(b){this._ready=(0,_.loadScript)(b,!0).then(()=>window.pdfjsSandbox.QuickJSSandbox())}async createSandbox(b){(await this._ready).create(b)}async dispatchEventInSandbox(b){let A=await this._ready;setTimeout(()=>A.dispatchEvent(b),0)}async destroySandbox(){(await this._ready).nukeSandbox()}}s.GenericScripting=E}],e={};function n(u){var s=e[u];if(s!==void 0)return s.exports;var k=e[u]={exports:{}};return j[u](k,k.exports,n),k.exports}var t={};return(()=>{var u=t;Object.defineProperty(u,"__esModule",{value:!0}),Object.defineProperty(u,"AnnotationLayerBuilder",{enumerable:!0,get:function(){return E.AnnotationLayerBuilder}}),Object.defineProperty(u,"DefaultAnnotationLayerFactory",{enumerable:!0,get:function(){return s.DefaultAnnotationLayerFactory}}),Object.defineProperty(u,"DefaultStructTreeLayerFactory",{enumerable:!0,get:function(){return s.DefaultStructTreeLayerFactory}}),Object.defineProperty(u,"DefaultTextLayerFactory",{enumerable:!0,get:function(){return s.DefaultTextLayerFactory}}),Object.defineProperty(u,"DefaultXfaLayerFactory",{enumerable:!0,get:function(){return s.DefaultXfaLayerFactory}}),Object.defineProperty(u,"DownloadManager",{enumerable:!0,get:function(){return M.DownloadManager}}),Object.defineProperty(u,"EventBus",{enumerable:!0,get:function(){return b.EventBus}}),Object.defineProperty(u,"GenericL10n",{enumerable:!0,get:function(){return A.GenericL10n}}),Object.defineProperty(u,"LinkTarget",{enumerable:!0,get:function(){return k.LinkTarget}}),Object.defineProperty(u,"NullL10n",{enumerable:!0,get:function(){return w.NullL10n}}),Object.defineProperty(u,"PDFFindController",{enumerable:!0,get:function(){return g.PDFFindController}}),Object.defineProperty(u,"PDFHistory",{enumerable:!0,get:function(){return P.PDFHistory}}),Object.defineProperty(u,"PDFLinkService",{enumerable:!0,get:function(){return k.PDFLinkService}}),Object.defineProperty(u,"PDFPageView",{enumerable:!0,get:function(){return f.PDFPageView}}),Object.defineProperty(u,"PDFScriptingManager",{enumerable:!0,get:function(){return L.PDFScriptingManager}}),Object.defineProperty(u,"PDFSinglePageViewer",{enumerable:!0,get:function(){return p.PDFSinglePageViewer}}),Object.defineProperty(u,"PDFViewer",{enumerable:!0,get:function(){return p.PDFViewer}}),Object.defineProperty(u,"ProgressBar",{enumerable:!0,get:function(){return _.ProgressBar}}),Object.defineProperty(u,"SimpleLinkService",{enumerable:!0,get:function(){return k.SimpleLinkService}}),Object.defineProperty(u,"StructTreeLayerBuilder",{enumerable:!0,get:function(){return R.StructTreeLayerBuilder}}),Object.defineProperty(u,"TextLayerBuilder",{enumerable:!0,get:function(){return F.TextLayerBuilder}}),Object.defineProperty(u,"XfaLayerBuilder",{enumerable:!0,get:function(){return D.XfaLayerBuilder}}),Object.defineProperty(u,"parseQueryString",{enumerable:!0,get:function(){return _.parseQueryString}});var s=n(1),k=n(5),_=n(6),p=n(10),E=n(2),M=n(16),b=n(17),A=n(18),w=n(4),g=n(20),P=n(22),f=n(12),L=n(23),R=n(7),F=n(8),D=n(9);let o="2.13.216",l="399a0ec60"})(),t})()})});var mt=window.ShadowRoot&&(window.ShadyCSS===void 0||window.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,Tt=Symbol(),zt=new Map,lt=class{constructor(e,n){if(this._$cssResult$=!0,n!==Tt)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e}get styleSheet(){let e=zt.get(this.cssText);return mt&&e===void 0&&(zt.set(this.cssText,e=new CSSStyleSheet),e.replaceSync(this.cssText)),e}toString(){return this.cssText}},Gt=j=>new lt(typeof j=="string"?j:j+"",Tt),Ie=(j,...e)=>{let n=j.length===1?j[0]:e.reduce((t,u,s)=>t+(k=>{if(k._$cssResult$===!0)return k.cssText;if(typeof k=="number")return k;throw Error("Value passed to 'css' function must be a 'css' function result: "+k+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(u)+j[s+1],j[0]);return new lt(n,Tt)},Rt=(j,e)=>{mt?j.adoptedStyleSheets=e.map(n=>n instanceof CSSStyleSheet?n:n.styleSheet):e.forEach(n=>{let t=document.createElement("style"),u=window.litNonce;u!==void 0&&t.setAttribute("nonce",u),t.textContent=n.cssText,j.appendChild(t)})},bt=mt?j=>j:j=>j instanceof CSSStyleSheet?(e=>{let n="";for(let t of e.cssRules)n+=t.cssText;return Gt(n)})(j):j;var kt,qt=window.trustedTypes,ki=qt?qt.emptyScript:"",Xt=window.reactiveElementPolyfillSupport,Lt={toAttribute(j,e){switch(e){case Boolean:j=j?ki:null;break;case Object:case Array:j=j==null?j:JSON.stringify(j)}return j},fromAttribute(j,e){let n=j;switch(e){case Boolean:n=j!==null;break;case Number:n=j===null?null:Number(j);break;case Object:case Array:try{n=JSON.parse(j)}catch{n=null}}return n}},Yt=(j,e)=>e!==j&&(e==e||j==j),Mt={attribute:!0,type:String,converter:Lt,reflect:!1,hasChanged:Yt},He=class extends HTMLElement{constructor(){super(),this._$Et=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Ei=null,this.o()}static addInitializer(e){var n;(n=this.l)!==null&&n!==void 0||(this.l=[]),this.l.push(e)}static get observedAttributes(){this.finalize();let e=[];return this.elementProperties.forEach((n,t)=>{let u=this._$Eh(t,n);u!==void 0&&(this._$Eu.set(u,t),e.push(u))}),e}static createProperty(e,n=Mt){if(n.state&&(n.attribute=!1),this.finalize(),this.elementProperties.set(e,n),!n.noAccessor&&!this.prototype.hasOwnProperty(e)){let t=typeof e=="symbol"?Symbol():"__"+e,u=this.getPropertyDescriptor(e,t,n);u!==void 0&&Object.defineProperty(this.prototype,e,u)}}static getPropertyDescriptor(e,n,t){return{get(){return this[n]},set(u){let s=this[e];this[n]=u,this.requestUpdate(e,s,t)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)||Mt}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;let e=Object.getPrototypeOf(this);if(e.finalize(),this.elementProperties=new Map(e.elementProperties),this._$Eu=new Map,this.hasOwnProperty("properties")){let n=this.properties,t=[...Object.getOwnPropertyNames(n),...Object.getOwnPropertySymbols(n)];for(let u of t)this.createProperty(u,n[u])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(e){let n=[];if(Array.isArray(e)){let t=new Set(e.flat(1/0).reverse());for(let u of t)n.unshift(bt(u))}else e!==void 0&&n.push(bt(e));return n}static _$Eh(e,n){let t=n.attribute;return t===!1?void 0:typeof t=="string"?t:typeof e=="string"?e.toLowerCase():void 0}o(){var e;this._$Ep=new Promise(n=>this.enableUpdating=n),this._$AL=new Map,this._$Em(),this.requestUpdate(),(e=this.constructor.l)===null||e===void 0||e.forEach(n=>n(this))}addController(e){var n,t;((n=this._$Eg)!==null&&n!==void 0?n:this._$Eg=[]).push(e),this.renderRoot!==void 0&&this.isConnected&&((t=e.hostConnected)===null||t===void 0||t.call(e))}removeController(e){var n;(n=this._$Eg)===null||n===void 0||n.splice(this._$Eg.indexOf(e)>>>0,1)}_$Em(){this.constructor.elementProperties.forEach((e,n)=>{this.hasOwnProperty(n)&&(this._$Et.set(n,this[n]),delete this[n])})}createRenderRoot(){var e;let n=(e=this.shadowRoot)!==null&&e!==void 0?e:this.attachShadow(this.constructor.shadowRootOptions);return Rt(n,this.constructor.elementStyles),n}connectedCallback(){var e;this.renderRoot===void 0&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$Eg)===null||e===void 0||e.forEach(n=>{var t;return(t=n.hostConnected)===null||t===void 0?void 0:t.call(n)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$Eg)===null||e===void 0||e.forEach(n=>{var t;return(t=n.hostDisconnected)===null||t===void 0?void 0:t.call(n)})}attributeChangedCallback(e,n,t){this._$AK(e,t)}_$ES(e,n,t=Mt){var u,s;let k=this.constructor._$Eh(e,t);if(k!==void 0&&t.reflect===!0){let _=((s=(u=t.converter)===null||u===void 0?void 0:u.toAttribute)!==null&&s!==void 0?s:Lt.toAttribute)(n,t.type);this._$Ei=e,_==null?this.removeAttribute(k):this.setAttribute(k,_),this._$Ei=null}}_$AK(e,n){var t,u,s;let k=this.constructor,_=k._$Eu.get(e);if(_!==void 0&&this._$Ei!==_){let p=k.getPropertyOptions(_),E=p.converter,M=(s=(u=(t=E)===null||t===void 0?void 0:t.fromAttribute)!==null&&u!==void 0?u:typeof E=="function"?E:null)!==null&&s!==void 0?s:Lt.fromAttribute;this._$Ei=_,this[_]=M(n,p.type),this._$Ei=null}}requestUpdate(e,n,t){let u=!0;e!==void 0&&(((t=t||this.constructor.getPropertyOptions(e)).hasChanged||Yt)(this[e],n)?(this._$AL.has(e)||this._$AL.set(e,n),t.reflect===!0&&this._$Ei!==e&&(this._$EC===void 0&&(this._$EC=new Map),this._$EC.set(e,t))):u=!1),!this.isUpdatePending&&u&&(this._$Ep=this._$E_())}async _$E_(){this.isUpdatePending=!0;try{await this._$Ep}catch(n){Promise.reject(n)}let e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;this.hasUpdated,this._$Et&&(this._$Et.forEach((u,s)=>this[s]=u),this._$Et=void 0);let n=!1,t=this._$AL;try{n=this.shouldUpdate(t),n?(this.willUpdate(t),(e=this._$Eg)===null||e===void 0||e.forEach(u=>{var s;return(s=u.hostUpdate)===null||s===void 0?void 0:s.call(u)}),this.update(t)):this._$EU()}catch(u){throw n=!1,this._$EU(),u}n&&this._$AE(t)}willUpdate(e){}_$AE(e){var n;(n=this._$Eg)===null||n===void 0||n.forEach(t=>{var u;return(u=t.hostUpdated)===null||u===void 0?void 0:u.call(t)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$Ep}shouldUpdate(e){return!0}update(e){this._$EC!==void 0&&(this._$EC.forEach((n,t)=>this._$ES(t,this[t],n)),this._$EC=void 0),this._$EU()}updated(e){}firstUpdated(e){}};He.finalized=!0,He.elementProperties=new Map,He.elementStyles=[],He.shadowRootOptions={mode:"open"},Xt?.({ReactiveElement:He}),((kt=globalThis.reactiveElementVersions)!==null&&kt!==void 0?kt:globalThis.reactiveElementVersions=[]).push("1.3.1");var Ft,tt=globalThis.trustedTypes,Kt=tt?tt.createPolicy("lit-html",{createHTML:j=>j}):void 0,qe=`lit$${(Math.random()+"").slice(9)}$`,ni="?"+qe,Mi=`<${ni}>`,it=document,ht=(j="")=>it.createComment(j),dt=j=>j===null||typeof j!="object"&&typeof j!="function",si=Array.isArray,Li=j=>{var e;return si(j)||typeof((e=j)===null||e===void 0?void 0:e[Symbol.iterator])=="function"},ct=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Qt=/-->/g,Jt=/>/g,Xe=/>|[ 	\n\r](?:([^\s"'>=/]+)([ 	\n\r]*=[ 	\n\r]*(?:[^ 	\n\r"'`<>=]|("|')|))|$)/g,Zt=/'/g,ei=/"/g,ri=/^(?:script|style|textarea|title)$/i,ai=j=>(e,...n)=>({_$litType$:j,strings:e,values:n}),Be=ai(1),zi=ai(2),Ye=Symbol.for("lit-noChange"),Se=Symbol.for("lit-nothing"),ti=new WeakMap,oi=(j,e,n)=>{var t,u;let s=(t=n?.renderBefore)!==null&&t!==void 0?t:e,k=s._$litPart$;if(k===void 0){let _=(u=n?.renderBefore)!==null&&u!==void 0?u:null;s._$litPart$=k=new Qe(e.insertBefore(ht(),_),_,void 0,n??{})}return k._$AI(j),k},et=it.createTreeWalker(it,129,null,!1),Fi=(j,e)=>{let n=j.length-1,t=[],u,s=e===2?"<svg>":"",k=ct;for(let p=0;p<n;p++){let E=j[p],M,b,A=-1,w=0;for(;w<E.length&&(k.lastIndex=w,b=k.exec(E),b!==null);)w=k.lastIndex,k===ct?b[1]==="!--"?k=Qt:b[1]!==void 0?k=Jt:b[2]!==void 0?(ri.test(b[2])&&(u=RegExp("</"+b[2],"g")),k=Xe):b[3]!==void 0&&(k=Xe):k===Xe?b[0]===">"?(k=u??ct,A=-1):b[1]===void 0?A=-2:(A=k.lastIndex-b[2].length,M=b[1],k=b[3]===void 0?Xe:b[3]==='"'?ei:Zt):k===ei||k===Zt?k=Xe:k===Qt||k===Jt?k=ct:(k=Xe,u=void 0);let g=k===Xe&&j[p+1].startsWith("/>")?" ":"";s+=k===ct?E+Mi:A>=0?(t.push(M),E.slice(0,A)+"$lit$"+E.slice(A)+qe+g):E+qe+(A===-2?(t.push(void 0),p):g)}let _=s+(j[n]||"<?>")+(e===2?"</svg>":"");if(!Array.isArray(j)||!j.hasOwnProperty("raw"))throw Error("invalid template strings array");return[Kt!==void 0?Kt.createHTML(_):_,t]},Ke=class{constructor({strings:e,_$litType$:n},t){let u;this.parts=[];let s=0,k=0,_=e.length-1,p=this.parts,[E,M]=Fi(e,n);if(this.el=Ke.createElement(E,t),et.currentNode=this.el.content,n===2){let b=this.el.content,A=b.firstChild;A.remove(),b.append(...A.childNodes)}for(;(u=et.nextNode())!==null&&p.length<_;){if(u.nodeType===1){if(u.hasAttributes()){let b=[];for(let A of u.getAttributeNames())if(A.endsWith("$lit$")||A.startsWith(qe)){let w=M[k++];if(b.push(A),w!==void 0){let g=u.getAttribute(w.toLowerCase()+"$lit$").split(qe),P=/([.?@])?(.*)/.exec(w);p.push({type:1,index:s,name:P[2],strings:g,ctor:P[1]==="."?It:P[1]==="?"?Ot:P[1]==="@"?Nt:st})}else p.push({type:6,index:s})}for(let A of b)u.removeAttribute(A)}if(ri.test(u.tagName)){let b=u.textContent.split(qe),A=b.length-1;if(A>0){u.textContent=tt?tt.emptyScript:"";for(let w=0;w<A;w++)u.append(b[w],ht()),et.nextNode(),p.push({type:2,index:++s});u.append(b[A],ht())}}}else if(u.nodeType===8)if(u.data===ni)p.push({type:2,index:s});else{let b=-1;for(;(b=u.data.indexOf(qe,b+1))!==-1;)p.push({type:7,index:s}),b+=qe.length-1}s++}}static createElement(e,n){let t=it.createElement("template");return t.innerHTML=e,t}};function nt(j,e,n=j,t){var u,s,k,_;if(e===Ye)return e;let p=t!==void 0?(u=n._$Cl)===null||u===void 0?void 0:u[t]:n._$Cu,E=dt(e)?void 0:e._$litDirective$;return p?.constructor!==E&&((s=p?._$AO)===null||s===void 0||s.call(p,!1),E===void 0?p=void 0:(p=new E(j),p._$AT(j,n,t)),t!==void 0?((k=(_=n)._$Cl)!==null&&k!==void 0?k:_._$Cl=[])[t]=p:n._$Cu=p),p!==void 0&&(e=nt(j,p._$AS(j,e.values),p,t)),e}var Dt=class{constructor(e,n){this.v=[],this._$AN=void 0,this._$AD=e,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}p(e){var n;let{el:{content:t},parts:u}=this._$AD,s=((n=e?.creationScope)!==null&&n!==void 0?n:it).importNode(t,!0);et.currentNode=s;let k=et.nextNode(),_=0,p=0,E=u[0];for(;E!==void 0;){if(_===E.index){let M;E.type===2?M=new Qe(k,k.nextSibling,this,e):E.type===1?M=new E.ctor(k,E.name,E.strings,this,e):E.type===6&&(M=new Bt(k,this,e)),this.v.push(M),E=u[++p]}_!==E?.index&&(k=et.nextNode(),_++)}return s}m(e){let n=0;for(let t of this.v)t!==void 0&&(t.strings!==void 0?(t._$AI(e,t,n),n+=t.strings.length-2):t._$AI(e[n])),n++}},Qe=class{constructor(e,n,t,u){var s;this.type=2,this._$AH=Se,this._$AN=void 0,this._$AA=e,this._$AB=n,this._$AM=t,this.options=u,this._$Cg=(s=u?.isConnected)===null||s===void 0||s}get _$AU(){var e,n;return(n=(e=this._$AM)===null||e===void 0?void 0:e._$AU)!==null&&n!==void 0?n:this._$Cg}get parentNode(){let e=this._$AA.parentNode,n=this._$AM;return n!==void 0&&e.nodeType===11&&(e=n.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,n=this){e=nt(this,e,n),dt(e)?e===Se||e==null||e===""?(this._$AH!==Se&&this._$AR(),this._$AH=Se):e!==this._$AH&&e!==Ye&&this.$(e):e._$litType$!==void 0?this.T(e):e.nodeType!==void 0?this.k(e):Li(e)?this.S(e):this.$(e)}M(e,n=this._$AB){return this._$AA.parentNode.insertBefore(e,n)}k(e){this._$AH!==e&&(this._$AR(),this._$AH=this.M(e))}$(e){this._$AH!==Se&&dt(this._$AH)?this._$AA.nextSibling.data=e:this.k(it.createTextNode(e)),this._$AH=e}T(e){var n;let{values:t,_$litType$:u}=e,s=typeof u=="number"?this._$AC(e):(u.el===void 0&&(u.el=Ke.createElement(u.h,this.options)),u);if(((n=this._$AH)===null||n===void 0?void 0:n._$AD)===s)this._$AH.m(t);else{let k=new Dt(s,this),_=k.p(this.options);k.m(t),this.k(_),this._$AH=k}}_$AC(e){let n=ti.get(e.strings);return n===void 0&&ti.set(e.strings,n=new Ke(e)),n}S(e){si(this._$AH)||(this._$AH=[],this._$AR());let n=this._$AH,t,u=0;for(let s of e)u===n.length?n.push(t=new Qe(this.M(ht()),this.M(ht()),this,this.options)):t=n[u],t._$AI(s),u++;u<n.length&&(this._$AR(t&&t._$AB.nextSibling,u),n.length=u)}_$AR(e=this._$AA.nextSibling,n){var t;for((t=this._$AP)===null||t===void 0||t.call(this,!1,!0,n);e&&e!==this._$AB;){let u=e.nextSibling;e.remove(),e=u}}setConnected(e){var n;this._$AM===void 0&&(this._$Cg=e,(n=this._$AP)===null||n===void 0||n.call(this,e))}},st=class{constructor(e,n,t,u,s){this.type=1,this._$AH=Se,this._$AN=void 0,this.element=e,this.name=n,this._$AM=u,this.options=s,t.length>2||t[0]!==""||t[1]!==""?(this._$AH=Array(t.length-1).fill(new String),this.strings=t):this._$AH=Se}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,n=this,t,u){let s=this.strings,k=!1;if(s===void 0)e=nt(this,e,n,0),k=!dt(e)||e!==this._$AH&&e!==Ye,k&&(this._$AH=e);else{let _=e,p,E;for(e=s[0],p=0;p<s.length-1;p++)E=nt(this,_[t+p],n,p),E===Ye&&(E=this._$AH[p]),k||(k=!dt(E)||E!==this._$AH[p]),E===Se?e=Se:e!==Se&&(e+=(E??"")+s[p+1]),this._$AH[p]=E}k&&!u&&this.C(e)}C(e){e===Se?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}},It=class extends st{constructor(){super(...arguments),this.type=3}C(e){this.element[this.name]=e===Se?void 0:e}},Di=tt?tt.emptyScript:"",Ot=class extends st{constructor(){super(...arguments),this.type=4}C(e){e&&e!==Se?this.element.setAttribute(this.name,Di):this.element.removeAttribute(this.name)}},Nt=class extends st{constructor(e,n,t,u,s){super(e,n,t,u,s),this.type=5}_$AI(e,n=this){var t;if((e=(t=nt(this,e,n,0))!==null&&t!==void 0?t:Se)===Ye)return;let u=this._$AH,s=e===Se&&u!==Se||e.capture!==u.capture||e.once!==u.once||e.passive!==u.passive,k=e!==Se&&(u===Se||s);s&&this.element.removeEventListener(this.name,this,u),k&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var n,t;typeof this._$AH=="function"?this._$AH.call((t=(n=this.options)===null||n===void 0?void 0:n.host)!==null&&t!==void 0?t:this.element,e):this._$AH.handleEvent(e)}},Bt=class{constructor(e,n,t){this.element=e,this.type=6,this._$AN=void 0,this._$AM=n,this.options=t}get _$AU(){return this._$AM._$AU}_$AI(e){nt(this,e)}};var ii=window.litHtmlPolyfillSupport;ii?.(Ke,Qe),((Ft=globalThis.litHtmlVersions)!==null&&Ft!==void 0?Ft:globalThis.litHtmlVersions=[]).push("2.2.2");var Ut,Vt;var xe=class extends He{constructor(){super(...arguments),this.renderOptions={host:this},this._$Dt=void 0}createRenderRoot(){var e,n;let t=super.createRenderRoot();return(e=(n=this.renderOptions).renderBefore)!==null&&e!==void 0||(n.renderBefore=t.firstChild),t}update(e){let n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Dt=oi(n,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Dt)===null||e===void 0||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Dt)===null||e===void 0||e.setConnected(!1)}render(){return Ye}};xe.finalized=!0,xe._$litElement$=!0,(Ut=globalThis.litElementHydrateSupport)===null||Ut===void 0||Ut.call(globalThis,{LitElement:xe});var li=globalThis.litElementPolyfillSupport;li?.({LitElement:xe});((Vt=globalThis.litElementVersions)!==null&&Vt!==void 0?Vt:globalThis.litElementVersions=[]).push("3.2.0");var Ue=j=>e=>typeof e=="function"?((n,t)=>(window.customElements.define(n,t),t))(j,e):((n,t)=>{let{kind:u,elements:s}=t;return{kind:u,elements:s,finisher(k){window.customElements.define(n,k)}}})(j,e);var Ii=(j,e)=>e.kind==="method"&&e.descriptor&&!("value"in e.descriptor)?{...e,finisher(n){n.createProperty(e.key,j)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:e.key,initializer(){typeof e.initializer=="function"&&(this[e.key]=e.initializer.call(this))},finisher(n){n.createProperty(e.key,j)}};function me(j){return(e,n)=>n!==void 0?((t,u,s)=>{u.constructor.createProperty(s,t)})(j,e,n):Ii(j,e)}function ut(j){return me({...j,state:!0})}var Je=({finisher:j,descriptor:e})=>(n,t)=>{var u;if(t===void 0){let s=(u=n.originalKey)!==null&&u!==void 0?u:n.key,k=e!=null?{kind:"method",placement:"prototype",key:s,descriptor:e(n.key)}:{...n,key:s};return j!=null&&(k.finisher=function(_){j(_,s)}),k}{let s=n.constructor;e!==void 0&&Object.defineProperty(n,t,e(t)),j?.(s,t)}};function Ve(j,e){return Je({descriptor:n=>{let t={get(){var u,s;return(s=(u=this.renderRoot)===null||u===void 0?void 0:u.querySelector(j))!==null&&s!==void 0?s:null},enumerable:!0,configurable:!0};if(e){let u=typeof n=="symbol"?Symbol():"__"+n;t.get=function(){var s,k;return this[u]===void 0&&(this[u]=(k=(s=this.renderRoot)===null||s===void 0?void 0:s.querySelector(j))!==null&&k!==void 0?k:null),this[u]}}return t}})}var jt,mn=((jt=window.HTMLSlotElement)===null||jt===void 0?void 0:jt.prototype.assignedElements)!=null?(j,e)=>j.assignedElements(e):(j,e)=>j.assignedNodes(e).filter(n=>n.nodeType===Node.ELEMENT_NODE);var Te=xt(yt()),De=xt(pi());var gi={a:"\xE1|\xE0|\xE3|\xE2|\xC0|\xC1|\xC3|\xC2",e:"\xE9|\xE8|\xEA|\xC9|\xC8|\xCA",i:"\xED|\xEC|\xEE|\xCD|\xCC|\xCE",o:"\xF3|\xF2|\xF4|\xF5|\xD3|\xD2|\xD4|\xD5",u:"\xFA|\xF9|\xFB|\xFC|\xDA|\xD9|\xDB|\xDC",c:"\xE7|\xC7",n:"\xF1|\xD1"},_i=j=>Object.keys(gi).reduce((e,n)=>e.replace(new RegExp(gi[n],"g"),n),j);var mi=Ie`
:host {
  --icon-size: 16px;
  --icon-display: block;
  --icon-weight: normal;
  height: var(--icon-size);
  display: var(--icon-display);
  font-family: "lit-icon";
  font-variant-ligatures: discretionary-ligatures;
  font-feature-settings: "dlig";
  white-space: nowrap;
  font-size: var(--icon-size);
  font-weight: var(--icon-weight);
}
:host .icon {
  color: inherit;
}

:host(.small) {
  --icon-size: 14px;
}`;var rt=class extends xe{constructor(){super(...arguments);this.icon=""}static get styles(){return[mi]}render(){return Be`<span class="icon">${this.icon}</span>`}};he([me({type:String})],rt.prototype,"icon",2),rt=he([Ue("lit-icon")],rt);var bi=Ie`
:host {
  --button-width: 28px;
  --button-height: 28px;
  --button-radius: 4px;
  --button-color: transparent;
  --button-color-hover: #737373;
  --toolbar-color: ;
  --toolbar-border: 1px solid #cccccc;
  --pagecount-color: #737373;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 34px;
  background-color: var(--toolbar-color);
  border-bottom: var(--toolbar-border);
  box-sizing: border-box;
}
:host .container {
  display: flex;
  justify-content: center;
  align-items: center;
  margin: 0 16px;
}
:host .separator {
  height: 50%;
  width: 1px;
  background-color: #cccccc;
}
:host .toolbarButton {
  display: flex;
  align-items: center;
  justify-content: center;
  width: var(--button-width);
  height: var(--button-height);
  border: 0;
  outline: 0;
  border-radius: var(--button-radius);
  background-color: var(--button-color);
  cursor: pointer;
}
:host .toolbarButton:disabled {
  opacity: 0.5;
  pointer-events: none;
}
:host .toolbarButton:hover lit-icon {
  color: var(--button-color-hover);
}
:host .toolbarButton,
:host .toolbarField,
:host .pageCount {
  margin: 0 4px;
}
:host .pageNumber {
  outline: none;
  border: 0;
  height: 18px;
  width: 44px;
}
:host .pageCount {
  font-size: 0.8rem;
}`;var je=class extends xe{static get styles(){return[bi]}render(){return Be`
      <section class="container">
        <button
          class="toolbarButton pageUp"
          title="Previous Page"
          id="previous"
          disabled
          @click=${this._handlePrevious}
        >
          <lit-icon icon="arrow-up" alt="previous"></lit-icon>
        </button>
        <button
          class="toolbarButton pageDown"
          title="Next Page"
          id="next"
          @click=${this._handleNext}
        >
          <lit-icon icon="arrow-down" alt="next"></lit-icon>
        </button>

        <input
          type="number"
          id="pageNumber"
          class="toolbarField pageNumber"
          value="1"
          size="4"
          min="1"
          @change=${this._handlePageChange}
        />
        <span class="pageCount"> / ${this.pageCount}</span>
      </section>

      <span class="separator"></span>

      <section class="container">
        <button
          class="toolbarButton zoomOut"
          title="Zoom Out"
          id="zoomOut"
          @click=${this._handleZoomOut}
        >
          <lit-icon icon="minus" alt="zoom out"></lit-icon>
        </button>
        <button
          class="toolbarButton zoomIn"
          title="Zoom In"
          id="zoomIn"
          @click=${this._handleZoomIn}
        >
          <lit-icon icon="plus" alt="zoom in"></lit-icon>
        </button>
      </section>

      <span class="separator"></span>

      <section class="container">
        <button
          class="toolbarButton rotateCcw"
          title="Rotate counter clockwise"
          id="RotateCcw"
          @click=${this._handleRotateCcw}
        >
          <lit-icon icon="rotate-ccw" alt="Rotate counter clockwise"></lit-icon>
        </button>
        <button
          class="toolbarButton rotateCw"
          title="Rotate clockwise"
          id="RotateCw"
          @click=${this._handleRotateCw}
        >
          <lit-icon icon="rotate-cw" alt="Rotate clockwise"></lit-icon>
        </button>
        <button
          class="toolbarButton print"
          title="Print"
          id="Print"
          @click=${!this.isPrintDisabled&&this._handlePrint}
          ?disabled=${this.isPrintDisabled}
        >
          <lit-icon icon="print" alt="Print"></lit-icon>
        </button>

        <button
          class="toolbarButton download"
          title="Download"
          id="Download"
          @click=${!this.isDownloadDisabled&&this._handleDownload}
          ?disabled=${this.isDownloadDisabled}
        >
          <lit-icon icon="download" alt="Download"></lit-icon>
        </button>
      </section>
    `}firstUpdated(){this.dispatchEvent(new CustomEvent("toolbarConnected",{bubbles:!0,detail:{previousPageEl:this._previousPageEl,nextPageEl:this._nextPageEl,pageNumberEl:this._pageNumberEl}}))}_handleZoomIn(){this.dispatchEvent(new CustomEvent("zoomIn",{bubbles:!0}))}_handleZoomOut(){this.dispatchEvent(new CustomEvent("zoomOut",{bubbles:!0}))}_handlePrevious(){this.dispatchEvent(new CustomEvent("previousPage",{bubbles:!0}))}_handleNext(){this.dispatchEvent(new CustomEvent("nextPage",{bubbles:!0}))}_handlePageChange(){this.dispatchEvent(new CustomEvent("pageChange",{bubbles:!0}))}_handleRotateCw(){this.dispatchEvent(new CustomEvent("rotateCw",{bubbles:!0}))}_handleRotateCcw(){this.dispatchEvent(new CustomEvent("rotateCcw",{bubbles:!0}))}_handlePrint(){this.dispatchEvent(new CustomEvent("print",{bubbles:!0}))}_handleDownload(){this.dispatchEvent(new CustomEvent("download",{bubbles:!0}))}};he([me({type:Number})],je.prototype,"pageCount",2),he([me({type:Boolean})],je.prototype,"isPrintDisabled",2),he([me({type:Boolean})],je.prototype,"isDownloadDisabled",2),he([Ve("#previous")],je.prototype,"_previousPageEl",2),he([Ve("#next")],je.prototype,"_nextPageEl",2),he([Ve("#pageNumber")],je.prototype,"_pageNumberEl",2),je=he([Ue("lit-pdf-toolbar")],je);var yi=Ie`
:host .errorWrapper {
  background: none repeat scroll 0 0 rgb(255, 85, 85);
  color: rgb(255, 255, 255);
  left: 0;
  position: absolute;
  right: 0;
  top: 3.2rem;
  z-index: 1000;
  padding: 0.6rem;
  font-size: 0.8rem;
  margin: 0.5rem;
}
:host .errorMessageLeft,
:host .errorMessageRight {
  display: flex;
  align-items: center;
}
:host .errorMessageContent {
  display: flex;
  justify-content: space-between;
  align-items: center;
}
:host .errorMoreInfo {
  background-color: rgb(255, 255, 255);
  color: rgb(0, 0, 0);
  padding: 0.3rem;
  margin-top: 0.6rem;
  width: 100%;
  min-height: 200px;
  box-sizing: border-box;
}
:host .errorButton {
  width: 16px;
  height: 16px;
  border: 0;
  outline: 0;
  margin: 0 4px;
  background: transparent;
  cursor: pointer;
}
:host .errorButton lit-icon {
  color: #fff;
}
:host .hidden {
  display: none;
}
:host [hidden] {
  display: none;
}`;var We=class extends xe{static get styles(){return[yi]}render(){return Be`
      <div id="errorWrapper" class="errorWrapper">
        <div class="errorMessageContent">
          <section class="errorMessageLeft">
            <span id="errorMessage">${this.errorMessage}</span>
            <button class="errorButton" id="errorShowMore" @click=${this._handleErrorMoreInfo}>
              <lit-icon icon="chevron-down" alt="more info"></lit-icon>
            </button>
            <button
              class="errorButton"
              id="errorShowLess"
              hidden
              @click=${this._handleErrorLessInfo}
            >
              <lit-icon icon="chevron-up" alt="less info"></lit-icon>
            </button>
          </section>
          <section class="errorMessageRight">
            <button class="errorButton" id="errorClose" @click=${this._handleCloseError}>
              <lit-icon icon="cross" alt="close error"></lit-icon>
            </button>
          </section>
        </div>
        <textarea class="errorMoreInfo" id="errorMoreInfo" hidden="true" readonly="readonly">
${this.errorMoreInfo}</textarea
        >
      </div>
    `}_handleErrorMoreInfo(){this._errorMoreInfo.hidden=!1,this._moreInfoButton.hidden=!0,this._lessInfoButton.hidden=!1,this._errorMoreInfo.style.height=`${this._errorMoreInfo.scrollHeight}px`}_handleErrorLessInfo(){this._errorMoreInfo.hidden=!0,this._moreInfoButton.hidden=!1,this._lessInfoButton.hidden=!0}_handleCloseError(){this.dispatchEvent(new CustomEvent("close",{bubbles:!0}))}};he([me({type:String})],We.prototype,"errorMessage",2),he([me({type:String})],We.prototype,"errorMoreInfo",2),he([Ve("#errorMoreInfo")],We.prototype,"_errorMoreInfo",2),he([Ve("#errorShowMore")],We.prototype,"_moreInfoButton",2),he([Ve("#errorShowLess")],We.prototype,"_lessInfoButton",2),We=he([Ue("lit-pdf-error")],We);var vt=xt(yt());var vi=Ie`
@media print {
  body {
    background: rgba(0, 0, 0, 0) none;
  }

  #printPageContainer {
    height: 100%;
  }

  /* wrapper around (scaled) print canvas elements */
  #printPageContainer > .printedPage {
    page-break-after: always;
    page-break-inside: avoid;
    /* The wrapper always cover the whole page. */
    height: 100%;
    width: 100%;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
  }

  #printPageContainer > .printedPage canvas {
    /* The intrinsic canvas / image size will make sure that we fit the page. */
    max-width: 100%;
    max-height: 100%;
    direction: ltr;
    display: block;
  }
}`;var $e=class{constructor(){this._abort=()=>{this._url=void 0,this._aborted=!0}}static getInstance(){return $e._instance||($e._instance=new $e),$e._instance}onProgress(e){return null}async print({printSrc:e,token:n,pdfDocument:t}){let u=this._hasChanged(e,t);if(this._url=e,this._pdfDocument=t,this._aborted=!1,e||t){let s=document.getElementById("printPage"),k;this._printContainer=document.createElement("div"),this._printContainer.setAttribute("id","printPageContainer"),s?k=s:k=this._createIframe(),u?(this._reinitProgress(),await this._renderPdf({printSrc:e,token:n,pdfDocument:t}),this._copyCanvasInIframe(k),await this._print(k)):await this._print(k)}}async _renderPdf({printSrc:e,token:n,pdfDocument:t}){try{let u=t;if(!u){let k=n?{Authorization:`Bearer ${n}`}:{};u=await(0,vt.getDocument)({url:e,httpHeaders:k}).promise}let s=u.numPages;this._aborted||await this._renderPages(t,s)}catch(u){throw this._abort(),u}}_renderPages(e,n){let t=(u,s)=>{if(++this._currentPage>=n){this.onProgress({loaded:n,total:n}),u();return}let k=this._currentPage;this.onProgress({loaded:k,total:n}),this._renderPage(e,k+1,{width:640,height:840}).then(()=>{t(u,s)},s)};return new Promise(t)}async _renderPage(e,n,t){if(!this._aborted){let u=document.createElement("canvas"),s=document.createElement("div");s.className="printedPage",s.appendChild(u),this._printContainer.appendChild(s);let _=124/vt.PixelsPerInch.PDF;u.width=Math.floor(t.width*_),u.height=Math.floor(t.height*_);let p=u.getContext("2d");p.save(),p.fillStyle="rgb(255, 255, 255)",p.fillRect(0,0,u.width,u.height),p.restore();let E=await e.getPage(n),M={canvasContext:p,transform:[_,0,0,_,0,0],viewport:E.getViewport({scale:1}),intent:"print"};await E.render(M).promise}}_reinitProgress(){this.onProgress({loaded:0,total:1}),this._currentPage=-1}_hasChanged(e,n){return this._pdfDocument!==n||this._url!==e}_createIframe(){let e=document.createElement("iframe");return e.style.position="absolute",e.style.top="-10000px",e.setAttribute("sandbox","allow-modals allow-same-origin allow-scripts"),e.setAttribute("id","printPage"),document.body.appendChild(e),this._setIframeStyle(e),e}_setIframeStyle(e){let n=e.contentDocument||e.contentWindow.document,t=document.createElement("style");t.textContent=vi.cssText,n.head.appendChild(t)}_copyCanvasInIframe(e){let t=(e.contentDocument||e.contentWindow.document).documentElement.querySelector("body");t.innerHTML="",t.appendChild(this._printContainer)}_print(e){return new Promise((n,t)=>{this._aborted?t():setTimeout(()=>{window.frames.printPage.print?(window.frames.printPage.focus(),window.frames.printPage.print()):(e.contentWindow.__container__=e,e.contentWindow.focus(),e.contentWindow.print()),n()},500)})}};var Ai=Ie`
:host {
  --page-margin: 1px auto -8px;
  --page-border: 9px solid transparent;
  --highlight-color: #fff700;
}
:host * {
  padding: 0;
  margin: 0;
}
:host section {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
  font-size: 2rem;
}
:host #viewerContainer {
  position: absolute;
  overflow: auto;
  inset: 34px 0 0 0 !important;
  width: 100%;
  top: 5rem;
  bottom: 4rem;
  left: 0;
  right: 0;
}
:host .page {
  direction: ltr;
  width: 816px;
  height: 1056px;
  margin: var(--page-margin);
  position: relative;
  overflow: visible;
  border: var(--page-border);
  background-clip: content-box;
  background-color: rgb(255, 255, 255);
}
:host canvas {
  margin: auto;
  display: block;
}
:host .textLayer {
  position: absolute;
  text-align: initial;
  left: 0;
  top: 0;
  right: 0;
  bottom: 0;
  overflow: hidden;
  opacity: 0.2;
  line-height: 1;
  -webkit-text-size-adjust: none;
  -moz-text-size-adjust: none;
  text-size-adjust: none;
  forced-color-adjust: none;
  /* Only necessary in Google Chrome, see issue 14205, and most unfortunately
  * the problem doesn't show up in "text" reference tests. */
  /* Avoids https://github.com/mozilla/pdf.js/issues/13840 in Chrome */
}
:host .textLayer span,
:host .textLayer br {
  color: transparent;
  position: absolute;
  white-space: pre;
  cursor: text;
  transform-origin: 0% 0%;
}
:host .textLayer span.markedContent {
  top: 0;
  height: 0;
}
:host .textLayer .highlight {
  margin: -1px;
  padding: 1px;
  background-color: var(--highlight-color);
  border-radius: 4px;
}
:host .textLayer .highlight.appended {
  position: initial;
}
:host .textLayer .highlight.begin {
  border-radius: 4px 0 0 4px;
}
:host .textLayer .highlight.end {
  border-radius: 0 4px 4px 0;
}
:host .textLayer .highlight.middle {
  border-radius: 0;
}
:host .textLayer::-moz-selection {
  background: rgb(0, 0, 255);
}
:host .textLayer::selection {
  background: rgb(0, 0, 255);
}
:host .textLayer br::-moz-selection {
  background: transparent;
}
:host .textLayer br::selection {
  background: transparent;
}
:host .textLayer .endOfContent {
  display: block;
  position: absolute;
  left: 0;
  top: 100%;
  right: 0;
  bottom: 0;
  z-index: -1;
  cursor: default;
  -webkit-user-select: none;
  -moz-user-select: none;
  user-select: none;
}
:host .textLayer .endOfContent.active {
  top: 0;
}
:host .pdfViewer.removePageBorders .page {
  margin: 0 auto 10px;
  border: none;
}
:host .pdfViewer.removePageBorders .page:last-of-type {
  margin-bottom: 0;
}
@keyframes moveDefault {
  from {
    background-position: 0 top;
  }
  to {
    background-position: -39rem top;
  }
}
:host .modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  margin: 0 auto;
  display: flex;
  align-items: center;
  justify-self: center;
}
:host .modal .modalContent {
  padding: 24px;
  box-shadow: 2px 2px 3px rgba(30, 16, 106, 0.2509803922);
  background-color: #fff;
  border-radius: 8px;
  margin: 0 auto;
}
:host .loadingText {
  display: block;
  text-align: center;
  font-size: 0.8rem;
  margin-bottom: 8px;
}
:host .loadingBar {
  display: flex;
  align-items: center;
  justify-self: center;
  width: 200px;
}
:host .loadingBar .progress {
  text-align: center;
  color: #fff;
  padding: 4px;
  border-radius: 12px;
  font-size: 0.6rem;
  background-color: #5f49d1;
  transition: width 200ms;
}
:host .hidden {
  display: none;
}
:host [hidden] {
  display: none;
}

:host([loaded]) .pdfViewer .page .loadingIcon {
  display: none;
}
:host([loaded]) .modal {
  display: none;
}`;Te.GlobalWorkerOptions.workerSrc="pdfjs-dist/build/pdf.worker.min.js";var Si=1.1,Pi=.25,wi=10,Oi=!0,Ni=1024*1024,Bi="pdfjs-dist/cmaps/",Ui=!0,Pe=class extends xe{constructor(){super(...arguments);this.searchQueries=[];this.entireWord=!1;this.scale="auto";this.scaleUpdateDelay=300;this._loadingPercent=0}static get styles(){return[Ai]}get pagesCount(){return this._pdfDocument.numPages}get page(){return this._pdfViewer.currentPageNumber}set page(n){this._pdfViewer.currentPageNumber=n}connectedCallback(){super.connectedCallback&&super.connectedCallback(),window.addEventListener("resize",()=>this._handleWindowResise())}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback(),window.removeEventListener("resize",()=>this._handleWindowResise())}render(){return Be`<header>
        <slot
          name="toolbar"
          @toolbarConnected=${this._handleToolbarConnected}
          @zoomIn=${this._handleZoomIn}
          @zoomOut=${this._handleZoomOut}
          @rotateCw=${this._handleRotateCw}
          @rotateCcw=${this._handleRotateCcw}
          @previousPage=${this._handlePrevious}
          @nextPage=${this._handleNext}
          @pageChange=${this._handlePageChange}
          @print=${this._handlePrint}
          @download=${this._handleDownload}
        >
          <lit-pdf-toolbar isDownloadDisabled isPrintDisabled></lit-pdf-toolbar
        ></slot>
      </header>

      <div id="viewerContainer">
        <div id="viewer" class="pdfViewer"></div>
      </div>

      <slot name="loading">
        <div class="modal">
          <div class="modalContent">
            <span class="loadingText">Chargement : ${this._loadingPercent}%</span>
            <div id="loadingBar" class="loadingBar">
              <div class="progress" style="width: ${this._loadingPercent}%"></div>
            </div>
          </div>
        </div>
      </slot>

      <section ?hidden=${!this._openErrorPanel}>
        <slot name="error" @close=${()=>this._toggleErrorPanel({open:!1})}>
          <lit-pdf-error
            errorMessage=${this._errorMessage}
            errorMoreInfo=${this._errorMoreInfo}
          ></lit-pdf-error>
        </slot>
      </section> `}firstUpdated(){this.initViewer()}updated(n){var t;n.has("src")&&(this._loadingTaskPromise=this._open({url:this.src})),n.has("searchQueries")&&((t=this.searchQueries)==null?void 0:t.length)&&(this._removeAccents(),this._searchWords()),n.has("scale")&&this.scale&&setTimeout(()=>this._eventBus.dispatch("scalechanged",{value:this.scale}),this.scaleUpdateDelay)}async _open(n){if(this._pdfLoadingTask)return this.close().then(()=>this._open(n));let{url:t}=n;this.loaded=!1,this._pdfLoadingTask=(0,Te.getDocument)({url:t,maxImageSize:Ni,cMapUrl:Bi,cMapPacked:Ui}),this._pdfLoadingTask.onProgress=u=>{this.progress(u.loaded/u.total)};try{this._pdfDocument=await this._pdfLoadingTask.promise,this._pdfViewer.setDocument(this._pdfDocument),this._pdfLinkService.setDocument(this._pdfDocument),this._pdfFindController.setDocument(this._pdfDocument),this._toolbarEl.setAttribute("pageCount",`${this.pagesCount}`),this._toolbarEl.toggleAttribute("isDownloadDisabled",!1),this._toolbarEl.toggleAttribute("isPrintDisabled",!1),this.loaded=!0}catch(u){this._handleError(u),this.loaded=!0}return this._pdfDocument}async _handleError(n){let t=n==null?void 0:n.message,{_l10n:u}=this,s;n instanceof Te.InvalidPDFException?s=u.get("invalid_file_error",null,"Invalid or corrupted PDF file."):n instanceof Te.MissingPDFException?s=u.get("missing_file_error",null,"Missing PDF file."):n instanceof Te.UnexpectedResponseException?s=u.get("unexpected_response_error",null,"Unexpected server response."):s=u.get("loading_error",null,"An error occurred while loading the PDF.");let k=await s;this.error(k,{message:t})}async error(n,t){let{_l10n:u}=this,s=[u.get("error_version_info",{version:Te.version||"?",build:Te.build||"?"},"PDF.js v{{version}} (build: {{build}})")];this._errorMessage=n,this._toggleErrorPanel({open:!0}),t&&(s.push(u.get("error_message",{message:t.message},"Message: {{message}}")),t.stack?s.push(u.get("error_stack",{stack:t.stack},"Stack: {{stack}}")):(t.filename&&s.push(u.get("error_file",{file:t.filename},"File: {{file}}")),t.lineNumber&&s.push(u.get("error_line",{line:t.lineNumber},"Line: {{line}}"))));let k=await Promise.all(s);this._errorMoreInfo=k.join(`
`)}_toggleErrorPanel({open:n}){this._openErrorPanel=n}close(){if(this._toggleErrorPanel({open:!1}),!this._pdfLoadingTask)return Promise.resolve();let n=this._pdfLoadingTask.destroy();return this._pdfLoadingTask=null,this._pdfDocument&&(this._pdfDocument=null,this._pdfViewer.setDocument(null),this._pdfLinkService.setDocument(null,null)),n}progress(n){let t=Math.round(n*100);(t>this._loadingPercent||Number.isNaN(t))&&(this._loadingPercent=t)}initViewer(){var n;this._eventBus=new De.EventBus,this._pdfLinkService=new De.PDFLinkService({eventBus:this._eventBus}),this._pdfFindController=new De.PDFFindController({linkService:this._pdfLinkService,eventBus:this._eventBus}),this._downloadManager=new De.DownloadManager,(n=this.searchQueries)!=null&&n.length&&(this._orginalCalculatMatch=this._pdfFindController._calculateRegExpMatch,this._pdfFindController._calculateRegExpMatch=(...t)=>this._multiPhraseSearch(...t)),this._l10n=De.NullL10n,this._pdfViewer=new De.PDFViewer({container:this._viewerContainer,removePageBorders:!0,renderer:null,eventBus:this._eventBus,linkService:this._pdfLinkService,findController:this._pdfFindController,downloadManager:this._downloadManager,l10n:this._l10n,useOnlyCssZoom:Oi}),this._pdfLinkService.setViewer(this._pdfViewer),this._eventBus.on("pagechanging",t=>{let u=t.pageNumber;this._pageNumberEl.value=u,this._previousPageEl.disabled=u<=1,this._nextPageEl.disabled=u>=this.pagesCount},!0),this._eventBus.on("pagesinit",()=>{this._pdfViewer.currentScaleValue=this.scale})}_handleZoomIn(n){let t=this._pdfViewer.currentScale;do t=Number((t*Si).toFixed(2)),t=Math.ceil(t*10)/10,t=Math.min(wi,t);while(--n&&t<wi);this._pdfViewer.currentScaleValue=t.toString()}_handleZoomOut(n){let t=this._pdfViewer.currentScale;do t=Number((t/Si).toFixed(2)),t=Math.floor(t*10)/10,t=Math.max(Pi,t);while(--n&&t>Pi);this._pdfViewer.currentScaleValue=t.toString()}_handleRotateCw(){this._pdfViewer.pagesRotation+=90}_handleRotateCcw(){this._pdfViewer.pagesRotation-=90}_handlePrevious(){this.page-=1}_handleNext(){this.page+=1}_handlePageChange(){let n=this._pageNumberEl;this.page=n.value!==void 0?Number(n.value):0,n.value!==this.page.toString()&&(n.value=this.page.toString())}async _handlePrint(n){let t=n.target;t.toggleAttribute("isPrintDisabled",!0);let u=$e.getInstance();await u.print({printSrc:this.printSrc,token:this.token,pdfDocument:this._pdfDocument}),u.onProgress=s=>{let k=s.loaded/s.total;this.progress(k),this.loaded=k===1},t.toggleAttribute("isPrintDisabled",!1)}async _handleDownload(n){let t=n.target;t.toggleAttribute("isDownloadDisabled",!0);let u=await this._pdfDocument.getData(),s=new Blob([u],{type:"application/pdf"});this._downloadManager.download(s,this.src,(0,Te.getFilenameFromUrl)(this.src),"download"),t.toggleAttribute("isDownloadDisabled",!1)}_handleToolbarConnected(n){this._toolbarEl=n.target,this._pageNumberEl=n.detail.pageNumberEl,this._previousPageEl=n.detail.previousPageEl,this._nextPageEl=n.detail.nextPageEl}_handleWindowResise(){let{currentScaleValue:n}=this._pdfViewer;(n==="auto"||n==="page-fit"||n==="page-width")&&(this._pdfViewer.currentScaleValue=n),this._pdfViewer.update()}async _searchWords(){await this._loadingTaskPromise,await this.updateComplete,setTimeout(()=>{this._eventBus.dispatch("find",{source:this,type:"",query:this._searchQueriesNormalized[0],caseSensitive:!1,entireWord:this.entireWord,phraseSearch:!0,findPrevious:!1,highlightAll:!0,matchDiacritics:!1,allowMatchScroll:!1})},500)}_removeAccents(){this._searchQueriesNormalized=this.searchQueries.map(n=>_i(n))}_multiPhraseSearch(n,t,u,s){this._searchQueriesNormalized.forEach(k=>{var w,g;let _=this._pdfFindController._hasDiacritics[u],[p,E]=this._pdfFindController._convertToRegExpString(k,_),M=`g${p?"u":""}${this._pdfFindController._state.caseSensitive?"":"i"}`,b=new RegExp(E,M),A=[];(w=this._pdfFindController._pageMatches[u])==null||w.forEach((P,f)=>{A.push({match:P,length:this._pdfFindController._pageMatchesLength[u][f]})}),this._orginalCalculatMatch.call(this._pdfFindController,b,t,u,s),(g=this._pdfFindController._pageMatches[u])==null||g.forEach((P,f)=>{A.push({match:P,length:this._pdfFindController._pageMatchesLength[u][f]})}),A.length&&(A.sort((P,f)=>P.match-f.match),this._pdfFindController._pageMatches[u].length=0,this._pdfFindController._pageMatchesLength[u].length=0,A.forEach(P=>{this._pdfFindController._pageMatches[u].push(P.match),this._pdfFindController._pageMatchesLength[u].push(P.length)}))})}};he([me({type:String})],Pe.prototype,"src",2),he([me({type:String})],Pe.prototype,"printSrc",2),he([me({type:String})],Pe.prototype,"token",2),he([me({type:Array})],Pe.prototype,"searchQueries",2),he([me({type:Boolean})],Pe.prototype,"entireWord",2),he([me({type:String})],Pe.prototype,"scale",2),he([me({type:Number})],Pe.prototype,"scaleUpdateDelay",2),he([me({type:String})],Pe.prototype,"authorization",2),he([me({type:Boolean,reflect:!0})],Pe.prototype,"loaded",2),he([Ve("#viewerContainer")],Pe.prototype,"_viewerContainer",2),he([ut()],Pe.prototype,"_loadingPercent",2),he([ut()],Pe.prototype,"_errorMessage",2),he([ut()],Pe.prototype,"_errorMoreInfo",2),he([ut()],Pe.prototype,"_openErrorPanel",2),Pe=he([Ue("lit-pdf-viewer")],Pe);var At=class extends xe{render(){return Be` <lit-pdf-viewer
      src="pdf-example.pdf"
      .searchQueries=${["java*","loop","Dynamic Languages","native code"]}
    >
    </lit-pdf-viewer>`}};At=he([Ue("lit-app")],At);
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
